<!DOCTYPE html>
<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.35">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<link rel="stylesheet" type="text/css" href="manual.css">
<title>Chapter ‍27 The threads library</title>
</head>
<body>
<a href="libstr.html"><img src="previous_motif.svg" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.svg" alt="Up"></a>
<a href="libdynlink.html"><img src="next_motif.svg" alt="Next"></a>
<hr>
<h1 class="chapter" id="sec572">Chapter ‍27 The threads library</h1>
<p>
<a id="c:threads"></a></p><p>The <span class="c004">threads</span> library allows concurrent programming in OCaml.
It provides multiple threads of control (also called lightweight
processes) that execute concurrently in the same memory space. Threads
communicate by in-place modification of shared data structures, or by
sending and receiving data on communication channels.</p><p>The <span class="c004">threads</span> library is implemented on top of the threading
facilities provided by the operating system: POSIX 1003.1c threads for
Linux, MacOS, and other Unix-like systems; Win32 threads for Windows.
Only one thread at a time is allowed to run OCaml code, hence
opportunities for parallelism are limited to the parts of the program
that run system or C library code. However, threads provide
concurrency and can be used to structure programs as several
communicating processes. Threads also efficiently support concurrent,
overlapping I/O operations.</p><p>Programs that use threads must be linked as follows:
</p><pre>
        ocamlc -I +threads <span class="c010">other options</span> unix.cma threads.cma <span class="c010">other files</span>
        ocamlopt -I +threads <span class="c010">other options</span> unix.cmxa threads.cmxa <span class="c010">other files</span>
</pre><p>
Compilation units that use the <span class="c004">threads</span> library must also be compiled with
the <span class="c004">-I +threads</span> option (see chapter ‍<a href="comp.html#c%3Acamlc">9</a>).</p><ul class="ftoc2"><li class="li-links">
<a href="libref/Thread.html">Module <span class="c004">Thread</span>: lightweight threads</a>
</li><li class="li-links"><a href="libref/Mutex.html">Module <span class="c004">Mutex</span>: locks for mutual exclusion</a>
</li><li class="li-links"><a href="libref/Condition.html">Module <span class="c004">Condition</span>: condition variables to synchronize between threads</a>
</li><li class="li-links"><a href="libref/Semaphore.html">Module <span class="c004">Semaphore</span>: semaphores, another thread synchronization mechanism</a>
</li><li class="li-links"><a href="libref/Event.html">Module <span class="c004">Event</span>: first-class synchronous communication</a>
</li></ul>
<hr>
<a href="libstr.html"><img src="previous_motif.svg" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.svg" alt="Up"></a>
<a href="libdynlink.html"><img src="next_motif.svg" alt="Next"></a>
</body>
</html>
