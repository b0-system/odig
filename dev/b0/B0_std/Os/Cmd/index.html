<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cmd (b0.B0_std.Os.Cmd)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">b0</a> &#x00BB; <a href="../../index.html">B0_std</a> &#x00BB; <a href="../index.html">Os</a> &#x00BB; Cmd</nav><h1>Module <code>Os.Cmd</code></h1><p>Executing commands.</p><nav class="toc"><ul><li><a href="#search">Tool search</a></li><li><a href="#statuses">Process completion statuses</a></li><li><a href="#stdis">Process standard inputs</a></li><li><a href="#stdos">Process standard outputs</a></li><li><a href="#run">Command execution</a><ul><li><a href="#run_block">Blocking</a></li><li><a href="#spawn">Non-blocking</a></li><li><a href="#tracing">Tracing</a></li></ul></li><li><a href="#exec">Executing files</a></li></ul></nav></header><section><header><h2 id="search"><a href="#search" class="anchor"></a>Tool search</h2><p><b>Portability.</b> In order to maximize portability no <code>.exe</code> suffix should be added to executable names on Windows, tool search adds the suffix during the tool search procedure.</p></header><dl><dt class="spec value" id="val-find_tool"><a href="#val-find_tool" class="anchor"></a><code><span class="keyword">val</span> find_tool : ?&#8288;search:<a href="../../Fpath/index.html#type-t">Fpath.t</a> list <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-tool">Cmd.tool</a> <span>&#45;&gt;</span> (<a href="../../Fpath/index.html#type-t">Fpath.t</a> option, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>find_tool ~search tool</code> is the file path, if any, to the program executable for the tool specification <code>tool</code>.</p><ul><li>If <code>tool</code> has a single path segment. The <code>tool</code> file is searched, in list order, for the first matching executable file in the directories of <code>search</code>. These directories default to those that result from parsing <code>PATH</code> with <a href="../../Fpath/index.html#val-list_of_search_path"><code>Fpath.list_of_search_path</code></a>.</li><li>If <code>tool</code> has multiple path segments the corresponding file is simply tested for <a href="../File/index.html#val-is_executable"><span>existence and executability</span></a>. <code>Ok (Some tool)</code> is returned if that is case and <code>Ok None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-must_find_tool"><a href="#val-must_find_tool" class="anchor"></a><code><span class="keyword">val</span> must_find_tool : ?&#8288;search:<a href="../../Fpath/index.html#type-t">Fpath.t</a> list <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-tool">Cmd.tool</a> <span>&#45;&gt;</span> (<a href="../../Fpath/index.html#type-t">Fpath.t</a>, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>must_find_tool</code> is like <a href="index.html#val-find_tool"><code>find_tool</code></a> except it errors if <code>Ok None</code> is returned.</p></dd></dl><dl><dt class="spec value" id="val-find_first_tool"><a href="#val-find_first_tool" class="anchor"></a><code><span class="keyword">val</span> find_first_tool : ?&#8288;search:<a href="../../Fpath/index.html#type-t">Fpath.t</a> list <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-tool">Cmd.tool</a> list <span>&#45;&gt;</span> (<a href="../../Fpath/index.html#type-t">Fpath.t</a> option, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>find_first_tool</code> is the first tool that can be found in the list with <a href="index.html#val-find_tool"><code>find_tool</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : ?&#8288;search:<a href="../../Fpath/index.html#type-t">Fpath.t</a> list <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (<a href="../../Cmd/index.html#type-t">Cmd.t</a> option, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>find ~search cmd</code> resolves <code>cmd</code>'s tool as <a href="index.html#val-find_tool"><code>find_tool</code></a> does.</p></dd></dl><dl><dt class="spec value" id="val-must_find"><a href="#val-must_find" class="anchor"></a><code><span class="keyword">val</span> must_find : ?&#8288;search:<a href="../../Fpath/index.html#type-t">Fpath.t</a> list <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (<a href="../../Cmd/index.html#type-t">Cmd.t</a>, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>must_find ~search cmd</code> resolves <code>cmd</code>'s tool as <a href="index.html#val-must_find_tool"><code>must_find_tool</code></a> does.</p></dd></dl><dl><dt class="spec value" id="val-find_first"><a href="#val-find_first" class="anchor"></a><code><span class="keyword">val</span> find_first : ?&#8288;search:<a href="../../Fpath/index.html#type-t">Fpath.t</a> list <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> list <span>&#45;&gt;</span> (<a href="../../Cmd/index.html#type-t">Cmd.t</a> option, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>find_first ~search cmds</code> resolves <code>cmds</code>'s <span class="xref-unresolved" title="unresolved reference to &quot;Cmd.too&quot;"><a href="../index.html#module-Cmd"><code>Cmd</code></a>.too</span>s as <a href="index.html#val-find_first_tool"><code>find_first_tool</code></a> does.</p></dd></dl></section><section><header><h2 id="statuses"><a href="#statuses" class="anchor"></a>Process completion statuses</h2></header><dl><dt class="spec type" id="type-status"><a href="#type-status" class="anchor"></a><code><span class="keyword">type</span> status</code> = <code>[ </code><table class="variant"><tr id="type-status.Exited" class="anchored"><td class="def constructor"><a href="#type-status.Exited" class="anchor"></a><code>| </code><code>`Exited <span class="keyword">of</span> int</code></td></tr><tr id="type-status.Signaled" class="anchored"><td class="def constructor"><a href="#type-status.Signaled" class="anchor"></a><code>| </code><code>`Signaled <span class="keyword">of</span> int</code></td></tr></table><code> ]</code></dt><dd><p>The type for process exit statuses.</p></dd></dl><dl><dt class="spec value" id="val-pp_status"><a href="#val-pp_status" class="anchor"></a><code><span class="keyword">val</span> pp_status : <a href="index.html#type-status">status</a> <a href="../../Fmt/index.html#type-t">Fmt.t</a></code></dt><dd><p><code>pp_status</code> is a formatter for process exit statuses.</p></dd></dl><dl><dt class="spec value" id="val-pp_cmd_status"><a href="#val-pp_cmd_status" class="anchor"></a><code><span class="keyword">val</span> pp_cmd_status : (<a href="../../Cmd/index.html#type-t">Cmd.t</a> * <a href="index.html#type-status">status</a>) <a href="../../Fmt/index.html#type-t">Fmt.t</a></code></dt><dd><p><code>pp_cmd_status</code> is a formatter for command process exit statuses.</p></dd></dl></section><section><header><h2 id="stdis"><a href="#stdis" class="anchor"></a>Process standard inputs</h2></header><dl><dt class="spec type" id="type-stdi"><a href="#type-stdi" class="anchor"></a><code><span class="keyword">type</span> stdi</code></dt><dd><p>The type for representing the standard input of a process.</p></dd></dl><dl><dt class="spec value" id="val-in_string"><a href="#val-in_string" class="anchor"></a><code><span class="keyword">val</span> in_string : string <span>&#45;&gt;</span> <a href="index.html#type-stdi">stdi</a></code></dt><dd><p><code>in_string s</code> is a standard input that reads the string <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-in_file"><a href="#val-in_file" class="anchor"></a><code><span class="keyword">val</span> in_file : <a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-stdi">stdi</a></code></dt><dd><p><code>in_file f</code> is a standard input that reads from file <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-in_fd"><a href="#val-in_fd" class="anchor"></a><code><span class="keyword">val</span> in_fd : close:bool <span>&#45;&gt;</span> <a href="../../../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> <span>&#45;&gt;</span> <a href="index.html#type-stdi">stdi</a></code></dt><dd><p><code>in_fd ~close fd</code> is a standard input that reads from file descriptor <code>fd</code>. If <code>close</code> is <code>true</code>, <code>fd</code> is closed after the process is spawn.</p></dd></dl><dl><dt class="spec value" id="val-in_stdin"><a href="#val-in_stdin" class="anchor"></a><code><span class="keyword">val</span> in_stdin : <a href="index.html#type-stdi">stdi</a></code></dt><dd><p><code>in_stdin</code> is <code>in_fd ~close:false Unix.stdin</code>, a standard input that reads from the current process standard input.</p></dd></dl><dl><dt class="spec value" id="val-in_null"><a href="#val-in_null" class="anchor"></a><code><span class="keyword">val</span> in_null : <a href="index.html#type-stdi">stdi</a></code></dt><dd><p><code>in_null</code> is <code>in_file File.null</code>.</p></dd></dl></section><section><header><h2 id="stdos"><a href="#stdos" class="anchor"></a>Process standard outputs</h2></header><dl><dt class="spec type" id="type-stdo"><a href="#type-stdo" class="anchor"></a><code><span class="keyword">type</span> stdo</code></dt><dd><p>The type for representing the standard output of a process.</p></dd></dl><dl><dt class="spec value" id="val-out_file"><a href="#val-out_file" class="anchor"></a><code><span class="keyword">val</span> out_file : <a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-stdo">stdo</a></code></dt><dd><p><code>out_file f</code> is a standard output that writes to file <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-out_fd"><a href="#val-out_fd" class="anchor"></a><code><span class="keyword">val</span> out_fd : close:bool <span>&#45;&gt;</span> <a href="../../../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> <span>&#45;&gt;</span> <a href="index.html#type-stdo">stdo</a></code></dt><dd><p><code>out_fd ~close fd</code> is a standard output that writes to file descriptor <code>fd</code>. If <code>close</code> is <code>true</code>, <code>fd</code> is closed after the process spawn.</p></dd></dl><dl><dt class="spec value" id="val-out_stdout"><a href="#val-out_stdout" class="anchor"></a><code><span class="keyword">val</span> out_stdout : <a href="index.html#type-stdo">stdo</a></code></dt><dd><p><code>out_stdout</code> is <code>out_fd ~close:false Unix.stdout</code></p></dd></dl><dl><dt class="spec value" id="val-out_stderr"><a href="#val-out_stderr" class="anchor"></a><code><span class="keyword">val</span> out_stderr : <a href="index.html#type-stdo">stdo</a></code></dt><dd><p><code>out_stderr</code> is <code>out_fd ~close:false Unix.stderr</code></p></dd></dl><dl><dt class="spec value" id="val-out_null"><a href="#val-out_null" class="anchor"></a><code><span class="keyword">val</span> out_null : <a href="index.html#type-stdo">stdo</a></code></dt><dd><p><code>out_null</code> is <code>out_file File.null</code></p></dd></dl></section><section><header><h2 id="run"><a href="#run" class="anchor"></a>Command execution</h2></header><section><header><h3 id="run_block"><a href="#run_block" class="anchor"></a>Blocking</h3><p>These functions wait for the command to complete before proceeding.</p></header><dl><dt class="spec value" id="val-run_status"><a href="#val-run_status" class="anchor"></a><code><span class="keyword">val</span> run_status : ?&#8288;env:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span>&#45;&gt;</span> ?&#8288;cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> ?&#8288;stdin:<a href="index.html#type-stdi">stdi</a> <span>&#45;&gt;</span> ?&#8288;stdout:<a href="index.html#type-stdo">stdo</a> <span>&#45;&gt;</span> ?&#8288;stderr:<a href="index.html#type-stdo">stdo</a> <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-status">status</a>, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>run_status ~env ~cwd ~stdin ~stdout ~stderr cmd</code> runs and waits for the completion of <code>cmd</code> in environment <code>env</code> with current directory <code>cwd</code> and standard IO connections <code>stdin</code>, <code>stdout</code> and <code>stderr</code>.</p><ul><li><code>env</code> defaults to <a href="../Env/index.html#val-current_assignments"><code>Env.current_assignments</code></a><code> ()</code></li><li><code>cwd</code> defaults to <a href="../Dir/index.html#cwd"><span>Current working directory (cwd)</span></a><code> ()</code></li><li><code>stdin</code> defaults to <a href="index.html#val-in_stdin"><code>in_stdin</code></a></li><li><code>stdout</code> defaults to <a href="index.html#val-out_stdout"><code>out_stdout</code></a></li><li><code>stderr</code> defaults to <a href="index.html#val-out_stderr"><code>out_stderr</code></a></li></ul><p>.</p></dd></dl><dl><dt class="spec value" id="val-run_status_out"><a href="#val-run_status_out" class="anchor"></a><code><span class="keyword">val</span> run_status_out : ?&#8288;env:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span>&#45;&gt;</span> ?&#8288;cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> ?&#8288;stdin:<a href="index.html#type-stdi">stdi</a> <span>&#45;&gt;</span> ?&#8288;stderr:[ `Stdo of <a href="index.html#type-stdo">stdo</a> | `Out ] <span>&#45;&gt;</span> ?&#8288;trim:bool <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-status">status</a> * string, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>run_status_out</code> is like <a href="index.html#val-run_status"><code>run_status</code></a> except <code>stdout</code> is read from the process to a string. The string is <a href="../../String/index.html#val-trim"><code>String.trim</code></a>ed if <code>trim</code> is <code>true</code> (default). If <code>stderr</code> is <code>`Out</code> the process' <code>stderr</code> is redirected to <code>stdout</code> and thus read back in the string aswell.</p></dd></dl><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : ?&#8288;env:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span>&#45;&gt;</span> ?&#8288;cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> ?&#8288;stdin:<a href="index.html#type-stdi">stdi</a> <span>&#45;&gt;</span> ?&#8288;stdout:<a href="index.html#type-stdo">stdo</a> <span>&#45;&gt;</span> ?&#8288;stderr:<a href="index.html#type-stdo">stdo</a> <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (unit, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>run</code> is <a href="index.html#val-run_status"><code>run_status</code></a> with non-<code>`Exited 0</code> statuses turned into errors via <a href="index.html#val-pp_cmd_status"><code>pp_cmd_status</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-run_out"><a href="#val-run_out" class="anchor"></a><code><span class="keyword">val</span> run_out : ?&#8288;env:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span>&#45;&gt;</span> ?&#8288;cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> ?&#8288;stdin:<a href="index.html#type-stdi">stdi</a> <span>&#45;&gt;</span> ?&#8288;stderr:[ `Stdo of <a href="index.html#type-stdo">stdo</a> | `Out ] <span>&#45;&gt;</span> ?&#8288;trim:bool <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (string, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>run</code> is <a href="index.html#val-run_status_out"><code>run_status_out</code></a> with non-<code>`Exited 0</code> statuses turned into errors via <a href="index.html#val-pp_cmd_status"><code>pp_cmd_status</code></a>.</p></dd></dl></section><section><header><h3 id="spawn"><a href="#spawn" class="anchor"></a>Non-blocking</h3><p><b>Note.</b> In contrast to <code>waitpid(2)</code> the following API does not allow to collect <em>any</em> child process completion. There are two reasons: first this is not supported on Windows, second this is anti-modular.</p></header><dl><dt class="spec type" id="type-pid"><a href="#type-pid" class="anchor"></a><code><span class="keyword">type</span> pid</code></dt><dd><p>The type for process identifiers.</p></dd></dl><dl><dt class="spec value" id="val-pid_to_int"><a href="#val-pid_to_int" class="anchor"></a><code><span class="keyword">val</span> pid_to_int : <a href="index.html#type-pid">pid</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>pid_to_int pid</code> is the system identifier for process identifier <code>pid</code>.</p></dd></dl><dl><dt class="spec value" id="val-spawn"><a href="#val-spawn" class="anchor"></a><code><span class="keyword">val</span> spawn : ?&#8288;env:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span>&#45;&gt;</span> ?&#8288;cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> ?&#8288;stdin:<a href="index.html#type-stdi">stdi</a> <span>&#45;&gt;</span> ?&#8288;stdout:<a href="index.html#type-stdo">stdo</a> <span>&#45;&gt;</span> ?&#8288;stderr:<a href="index.html#type-stdo">stdo</a> <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-pid">pid</a>, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>spawn ~env ~cwd ~stdin ~stdout ~stderr cmd</code> spawns command <code>cmd</code> in environment <code>env</code> with current directory <code>cwd</code> and standard IO connections <code>stdin</code>, <code>stdout</code> and <code>stderr</code>. <code>env</code> defaults to <a href="../Env/index.html#val-current_assignments"><code>Env.current_assignments</code></a><code> ()</code>, <code>cwd</code> to <span class="xref-unresolved" title="unresolved reference to &quot;Dir.current&quot;"><a href="../index.html#module-Dir"><code>Dir</code></a>.current</span><code>
        ()</code>, <code>stdin</code> to <a href="index.html#val-in_stdin"><code>in_stdin</code></a>, <code>stdout</code> to <a href="index.html#val-out_stdout"><code>out_stdout</code></a> and <code>stderr</code> to <a href="index.html#val-out_stderr"><code>out_stderr</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-spawn_poll_status"><a href="#val-spawn_poll_status" class="anchor"></a><code><span class="keyword">val</span> spawn_poll_status : <a href="index.html#type-pid">pid</a> <span>&#45;&gt;</span> (<a href="index.html#type-status">status</a> option, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>spawn_poll_status pid</code> tries to collect the exit status of command spawn <code>pid</code>. If <code>block</code> is <code>false</code>, <code>Ok None</code> is immediately returned if <code>pid</code> has not terinated yet.</p></dd></dl><dl><dt class="spec value" id="val-spawn_wait_status"><a href="#val-spawn_wait_status" class="anchor"></a><code><span class="keyword">val</span> spawn_wait_status : <a href="index.html#type-pid">pid</a> <span>&#45;&gt;</span> (<a href="index.html#type-status">status</a>, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>spawn_wait_status</code> blocks and waits for <code>pid</code>'s termination status to become available.</p></dd></dl></section><section><header><h3 id="tracing"><a href="#tracing" class="anchor"></a>Tracing</h3></header><dl><dt class="spec type" id="type-spawn_tracer"><a href="#type-spawn_tracer" class="anchor"></a><code><span class="keyword">type</span> spawn_tracer</code><code> = <a href="index.html#type-pid">pid</a> <span>&#45;&gt;</span> <a href="../Env/index.html#type-assignments">Env.assignments</a> option <span>&#45;&gt;</span> cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> option <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>The type for spawn tracers. Called with each blocking and non-blocking spawned command. The function is given the process identifier of the spawn, the environment if different from the program's one, the current working directory if different from the program's one and the acctual command.</p></dd></dl><dl><dt class="spec value" id="val-spawn_tracer_nop"><a href="#val-spawn_tracer_nop" class="anchor"></a><code><span class="keyword">val</span> spawn_tracer_nop : <a href="index.html#type-spawn_tracer">spawn_tracer</a></code></dt><dd><p><code>spawn_tracer_nop</code> is a spawn tracer that does nothing. This is the initial spawn tracer.</p></dd></dl><dl><dt class="spec value" id="val-spawn_tracer"><a href="#val-spawn_tracer" class="anchor"></a><code><span class="keyword">val</span> spawn_tracer : unit <span>&#45;&gt;</span> <a href="index.html#type-spawn_tracer">spawn_tracer</a></code></dt><dd><p><code>tracer ()</code> is the current spawn tracer. Initially this is <a href="index.html#val-spawn_tracer_nop"><code>spawn_tracer_nop</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-set_spawn_tracer"><a href="#val-set_spawn_tracer" class="anchor"></a><code><span class="keyword">val</span> set_spawn_tracer : <a href="index.html#type-spawn_tracer">spawn_tracer</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_tracer t</code> sets the current spawn tracer to <code>t</code>.</p></dd></dl></section></section><section><header><h2 id="exec"><a href="#exec" class="anchor"></a>Executing files</h2><p><b>Windows.</b> On Windows a program executing an <code>execv*</code> function yields back control to the terminal as soon as the child starts (vs. ends on POSIX). This entails all sorts of unwanted behaviours. To workaround this, the following function executes, on Windows, the file as a spawned child process which is waited on for completion via <code>waitpid(2)</code>. Once the child process has terminated the calling process is immediately <code>exit</code>ed with the status of the child.</p></header><dl><dt class="spec value" id="val-execv"><a href="#val-execv" class="anchor"></a><code><span class="keyword">val</span> execv : ?&#8288;env:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span>&#45;&gt;</span> ?&#8288;cwd:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> <a href="../../Fpath/index.html#type-t">Fpath.t</a> <span>&#45;&gt;</span> <a href="../../Cmd/index.html#type-t">Cmd.t</a> <span>&#45;&gt;</span> (unit, string) <a href="../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>execv ~env ~cwd f argv</code> executes file <code>f</code> as a new process in environment <code>env</code> with <code>args</code> as the <span class="xref-unresolved" title="unresolved reference to &quot;Sys.argv&quot;"><code>Sys</code>.argv</span> of this process (in particular <code>Sys.argv.(0)</code> is the name of the program not the first argument to the program). The function only recturns in case of error. <code>env</code> defaults to <span class="xref-unresolved" title="unresolved reference to &quot;B0.OS.Env.current_assignments&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;B0.OS.Env&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;B0.OS&quot;"><code>B0</code>.OS</span>.Env</span>.current_assignments</span><code> ()</code>, <code>cwd</code> to <span class="xref-unresolved" title="unresolved reference to &quot;Dir.current&quot;"><a href="../index.html#module-Dir"><code>Dir</code></a>.current</span><code> ()</code>.</p></dd></dl></section></div></body></html>