<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Container (docker-api.Docker.Container)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">docker-api</a> &#x00BB; <a href="../index.html">Docker</a> &#x00BB; Container</nav><h1>Module <code>Docker.Container</code></h1></header><dl><dt class="spec type" id="type-port"><a href="#type-port" class="anchor"></a><code><span class="keyword">type</span> port</code><code> = </code><code>{</code><table class="record"><tr id="type-port.priv" class="anchored"><td class="def field"><a href="#type-port.priv" class="anchor"></a><code>priv : int;</code></td><td class="doc"><p>Private port number.</p></td></tr><tr id="type-port.pub" class="anchored"><td class="def field"><a href="#type-port.pub" class="anchor"></a><code>pub : int;</code></td><td class="doc"><p>Public port number.</p></td></tr><tr id="type-port.typ" class="anchored"><td class="def field"><a href="#type-port.typ" class="anchor"></a><code>typ : string;</code></td><td class="doc"><p>Type, e.g., &quot;tcp&quot;.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-id"><a href="#type-id" class="anchor"></a><code><span class="keyword">type</span> id</code><code> = string</code></dt><dt class="spec type" id="type-id_or_name"><a href="#type-id_or_name" class="anchor"></a><code><span class="keyword">type</span> id_or_name</code><code> = string</code></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.id" class="anchored"><td class="def field"><a href="#type-t.id" class="anchor"></a><code>id : <a href="index.html#type-id">id</a>;</code></td><td class="doc"><p>Identifier of the container.</p></td></tr><tr id="type-t.names" class="anchored"><td class="def field"><a href="#type-t.names" class="anchor"></a><code>names : string list;</code></td><td class="doc"><p>Names given to the container.</p></td></tr><tr id="type-t.image" class="anchored"><td class="def field"><a href="#type-t.image" class="anchor"></a><code>image : string;</code></td><td class="doc"><p>Name of the image used to create the container.</p></td></tr><tr id="type-t.command" class="anchored"><td class="def field"><a href="#type-t.command" class="anchor"></a><code>command : string;</code></td><td class="doc"><p>Command passed to the container.</p></td></tr><tr id="type-t.created" class="anchored"><td class="def field"><a href="#type-t.created" class="anchor"></a><code>created : float;</code></td><td class="doc"><p>Unix time of creation.</p></td></tr><tr id="type-t.status" class="anchored"><td class="def field"><a href="#type-t.status" class="anchor"></a><code>status : string;</code></td><td class="doc"><p>Human readable status.</p></td></tr><tr id="type-t.ports" class="anchored"><td class="def field"><a href="#type-t.ports" class="anchor"></a><code>ports : <a href="index.html#type-port">port</a> list;</code></td></tr><tr id="type-t.size_rw" class="anchored"><td class="def field"><a href="#type-t.size_rw" class="anchor"></a><code>size_rw : int option;</code></td></tr><tr id="type-t.size_root_fs" class="anchored"><td class="def field"><a href="#type-t.size_root_fs" class="anchor"></a><code>size_root_fs : int option;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-bind"><a href="#type-bind" class="anchor"></a><code><span class="keyword">type</span> bind</code><code> = </code><table class="variant"><tr id="type-bind.Vol" class="anchored"><td class="def constructor"><a href="#type-bind.Vol" class="anchor"></a><code>| </code><code><span class="constructor">Vol</span> <span class="keyword">of</span> string</code></td><td class="doc"><p>create a new volume for the container</p></td></tr><tr id="type-bind.Mount" class="anchored"><td class="def constructor"><a href="#type-bind.Mount" class="anchor"></a><code>| </code><code><span class="constructor">Mount</span> <span class="keyword">of</span> string * string</code></td><td class="doc"><p><code>Mount(host_path, container_path)</code> bind-mount a host path into the container. A relative <code>host_path</code> will be interpreted as relative to the current working directory (at the time of the function calling this binding). <code>container_path</code> must be an <i>absolute</i> path inside the container.</p></td></tr><tr id="type-bind.Mount_ro" class="anchored"><td class="def constructor"><a href="#type-bind.Mount_ro" class="anchor"></a><code>| </code><code><span class="constructor">Mount_ro</span> <span class="keyword">of</span> string * string</code></td><td class="doc"><p>As <code>Mount</code> but make the bind-mount read-only inside the container.</p></td></tr></table></dt></dl><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;all:bool <span>&#45;&gt;</span> ?&#8288;limit:int <span>&#45;&gt;</span> ?&#8288;size:bool <span>&#45;&gt;</span> ?&#8288;before:<a href="index.html#type-id_or_name">id_or_name</a> <span>&#45;&gt;</span> ?&#8288;exited:int list <span>&#45;&gt;</span> ?&#8288;health:[ `Starting | `Healthy | `Unhealthy | `None ] list <span>&#45;&gt;</span> ?&#8288;name:string list <span>&#45;&gt;</span> ?&#8288;since:<a href="index.html#type-id_or_name">id_or_name</a> <span>&#45;&gt;</span> ?&#8288;status:[ `Created | `Restarting | `Running | `Removing | `Paused | `Exited | `Dead ] list <span>&#45;&gt;</span> ?&#8288;volume:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dd><p><code>list ()</code> lists running containers (or all containers if <code>~all</code> is set to <code>true</code>).</p><dl><dt>parameter all</dt><dd><p>Show all containers. Only running containers are shown by default (i.e., this defaults to <code>false</code>).</p></dd></dl><dl><dt>parameter limit</dt><dd><p>Return this number of most recently created containers, including non-running ones.</p></dd></dl><dl><dt>parameter size</dt><dd><p>Return the size of container as fields <code>size_rw</code> and <code>size_root_fs</code>.</p><p>The following options set filters on the returned container list: <code>before</code>, <code>exited</code> (containers with exit code given by <code>exited</code>), <code>health</code>, <code>name</code>, <code>since</code>, <code>status</code>, <code>volume</code>.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-host_config"><a href="#type-host_config" class="anchor"></a><code><span class="keyword">type</span> host_config</code><code> = </code><code>{</code><table class="record"><tr id="type-host_config.cpu_shares" class="anchored"><td class="def field"><a href="#type-host_config.cpu_shares" class="anchor"></a><code>cpu_shares : int;</code></td><td class="doc"><p>Represents this container's relative CPU weight versus other containers. Non-positive values are ignored.</p></td></tr><tr id="type-host_config.memory" class="anchored"><td class="def field"><a href="#type-host_config.memory" class="anchor"></a><code>memory : int;</code></td><td class="doc"><p>Memory limit in bytes.</p></td></tr><tr id="type-host_config.cgroup_parent" class="anchored"><td class="def field"><a href="#type-host_config.cgroup_parent" class="anchor"></a><code>cgroup_parent : string;</code></td><td class="doc"><p>Path to cgroups under which the container's cgroup is created. If the path is not absolute, the path is considered to be relative to the cgroups path of the init process. Cgroups are created if they do not already exist.</p></td></tr><tr id="type-host_config.blk_io_weight" class="anchored"><td class="def field"><a href="#type-host_config.blk_io_weight" class="anchor"></a><code>blk_io_weight : int;</code></td><td class="doc"><p>Block IO weight (relative weight). Values outside <code>0 .. 1000</code> do not set this field.</p></td></tr><tr id="type-host_config.cpu_period" class="anchored"><td class="def field"><a href="#type-host_config.cpu_period" class="anchor"></a><code>cpu_period : int;</code></td><td class="doc"><p>The length of a CPU period in microseconds. Non-positive values do not set this field.</p></td></tr><tr id="type-host_config.memory_swap" class="anchored"><td class="def field"><a href="#type-host_config.memory_swap" class="anchor"></a><code>memory_swap : int;</code></td><td class="doc"><p>Total memory limit (memory + swap). Set as -1 to enable unlimited swap.</p></td></tr><tr id="type-host_config.binds" class="anchored"><td class="def field"><a href="#type-host_config.binds" class="anchor"></a><code>binds : <a href="index.html#type-bind">bind</a> list;</code></td><td class="doc"><p>A list of volume bindings for this container.</p></td></tr><tr id="type-host_config.network_mode" class="anchored"><td class="def field"><a href="#type-host_config.network_mode" class="anchor"></a><code>network_mode : string;</code></td><td class="doc"><p>Network mode to use for this container. Supported standard values are: bridge, host, none, and container:&lt;name|id&gt;. Any other value is taken as a custom network's name to which this container should connect to.</p></td></tr><tr id="type-host_config.policy" class="anchored"><td class="def field"><a href="#type-host_config.policy" class="anchor"></a><code>policy : [ `None | `Auto_remove | `Restart_always | `Restart_unless_stopped | `Restart_on_failure of int ];</code></td><td class="doc"><p>The behavior to apply when the container exits. The default is not to restart and not to remove the container (<code>`None</code>). An ever increasing delay (double the previous delay, starting at 100ms) is added before each restart to prevent flooding the server.</p><ul><li><code>`Auto_remove</code> Automatically remove the container when the container's process exits.</li><li><code>`Restart_always</code> Always restart.</li><li><code>`Restart_unless_stopped</code> Restart always except when the user has manually stopped the container.</li><li><code>`Restart_on_failure n</code> Restart only when the container exit code is non-zero. The number <code>n</code> says how many times to retry before giving up.</li></ul></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-host"><a href="#val-host" class="anchor"></a><code><span class="keyword">val</span> host : ?&#8288;cpu_shares:int <span>&#45;&gt;</span> ?&#8288;memory:int <span>&#45;&gt;</span> ?&#8288;cgroup_parent:string <span>&#45;&gt;</span> ?&#8288;blk_io_weight:int <span>&#45;&gt;</span> ?&#8288;cpu_period:int <span>&#45;&gt;</span> ?&#8288;memory_swap:int <span>&#45;&gt;</span> ?&#8288;binds:<a href="index.html#type-bind">bind</a> list <span>&#45;&gt;</span> ?&#8288;network_mode:string <span>&#45;&gt;</span> ?&#8288;policy:[ `Auto_remove | `None | `Restart_always | `Restart_on_failure of int | `Restart_unless_stopped ] <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-host_config">host_config</a></code></dt><dd><p>Return the default host configuration changed according to which optional labels were set.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;hostname:string <span>&#45;&gt;</span> ?&#8288;domainname:string <span>&#45;&gt;</span> ?&#8288;user:string <span>&#45;&gt;</span> ?&#8288;stdin:bool <span>&#45;&gt;</span> ?&#8288;stdout:bool <span>&#45;&gt;</span> ?&#8288;stderr:bool <span>&#45;&gt;</span> ?&#8288;open_stdin:bool <span>&#45;&gt;</span> ?&#8288;stdin_once:bool <span>&#45;&gt;</span> ?&#8288;env:string list <span>&#45;&gt;</span> ?&#8288;workingdir:string <span>&#45;&gt;</span> ?&#8288;networking:bool <span>&#45;&gt;</span> ?&#8288;host:<a href="index.html#type-host_config">host_config</a> <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> <a href="index.html#type-id">id</a></code></dt><dd><p><code>create image cmd</code> create a container and returns its ID where <code>image</code> is the image name to use for the container and <code>cmd</code> the command to run. <code>cmd</code> has the form <code>[prog; arg1;...; argN]</code>. BEWARE that the output of <code>cmd</code> (on stdout and stderr) will be logged by the container (see <code>logs</code>) so it will consume disk space.</p><dl><dt>parameter hostname</dt><dd><p>the desired hostname to use for the container.</p></dd></dl><dl><dt>parameter domainname</dt><dd><p>the desired domain name to use for the container.</p></dd></dl><dl><dt>parameter user</dt><dd><p>the user (or UID) to use inside the container.</p></dd></dl><dl><dt>parameter stdin</dt><dd><p>Attaches to stdin (default <code>false</code>).</p></dd></dl><dl><dt>parameter stdout</dt><dd><p>Attaches to stdout (default <code>true</code>).</p></dd></dl><dl><dt>parameter stdout</dt><dd><p>Attaches to stderr (default <code>true</code>).</p></dd></dl><dl><dt>parameter open_stdin</dt><dd><p>opens stdin (sic).</p></dd></dl><dl><dt>parameter stdin_once</dt><dd><p>Close stdin after the 1 attached client disconnects. Default: <code>false</code>.</p></dd></dl><dl><dt>parameter env</dt><dd><p>A list of environment variables of the form <code>&quot;VAR=value&quot;</code>. A variable without = is removed from the environment, rather than to have an empty value.</p></dd></dl><dl><dt>parameter workingdir</dt><dd><p>The working dir for commands to run in.</p></dd></dl><dl><dt>parameter networking</dt><dd><p>Whether networking is enabled for the container. Default: <code>false</code>.</p></dd></dl><dl><dt>parameter name</dt><dd><p>The name of the container. The name must match <code>/?[a-zA-Z0-9_-]+</code> or <code>Invalid_argument</code> is raised. It can be used in place of the container ID. If the name exists (whether the container is running or not), the container will not be recreated. Note that the corresponding name in <a href="index.html#type-t"><code>t</code></a> (as obtained by <a href="index.html#val-list"><code>list</code></a>) will have an initial '/' which means that the Docker daemon is the parent container.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-changes"><a href="#val-changes" class="anchor"></a><code><span class="keyword">val</span> changes : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> (string * [ `Modified | `Added | `Deleted ]) list</code></dt><dd><p><code>changes conn id</code> returns which files in a container's filesystem have been added, deleted, or modified.</p></dd></dl><aside><p><code>export conn id</code> export the contents of container <code>id</code>.</p></aside><dl><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;detach_keys:string <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>start id</code> starts the container <code>id</code>.</p><dl><dt>raises Server_error</dt><dd><p>when, for example, if the command given by <a href="index.html#val-create"><code>create</code></a> does not exist in the container.</p></dd></dl><dl><dt>parameter detach_keys</dt><dd><p>override the key sequence for detaching a container. Format is a single character <code>[a-Z]</code> or <code>ctrl-&lt;value&gt;</code> where &lt;value&gt; is one of: <code>a-z</code>, <code>@</code>, <code>^</code>, <code>[</code>, <code>,</code> or <code>_</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-stop"><a href="#val-stop" class="anchor"></a><code><span class="keyword">val</span> stop : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;wait:int <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>stop id</code> stops the container <code>id</code>.</p><dl><dt>parameter wait</dt><dd><p>number of seconds to wait before killing the container.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-wait"><a href="#val-wait" class="anchor"></a><code><span class="keyword">val</span> wait : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>wait id</code> block until a container <code>id</code> stops, then returns the exit code.</p></dd></dl><dl><dt class="spec value" id="val-restart"><a href="#val-restart" class="anchor"></a><code><span class="keyword">val</span> restart : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;wait:int <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>restart id</code> restart the container <code>id</code>.</p><dl><dt>parameter wait</dt><dd><p>number of seconds to wait before killing the container.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-kill"><a href="#val-kill" class="anchor"></a><code><span class="keyword">val</span> kill : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;signal:int <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>kill id</code> kill the container <code>id</code>.</p><dl><dt>parameter signal</dt><dd><p>Signal to send to the container (see the standard module <code>Sys</code>). When not set, <code>Sys.sigkill</code> is assumed and the call will waits for the container to exit.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-pause"><a href="#val-pause" class="anchor"></a><code><span class="keyword">val</span> pause : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pause id</code> pause the container <code>id</code>.</p></dd></dl><dl><dt class="spec value" id="val-unpause"><a href="#val-unpause" class="anchor"></a><code><span class="keyword">val</span> unpause : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>unpause id</code> unpause the container <code>id</code>.</p></dd></dl><dl><dt class="spec value" id="val-attach"><a href="#val-attach" class="anchor"></a><code><span class="keyword">val</span> attach : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;stdin:bool <span>&#45;&gt;</span> ?&#8288;stdout:bool <span>&#45;&gt;</span> ?&#8288;stderr:bool <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> [ `Logs | `Stream | `Logs_and_stream ] <span>&#45;&gt;</span> <a href="../Stream/index.html#type-t">Stream.t</a></code></dt><dd><p><code>attach id what</code> view or interact with any running container <code>id</code> primary process (pid 1).</p><ul><li>If <code>what = `Logs</code> replay the logs from the container: you will get the output since the container started.</li><li>If <code>what = `Stream</code>, stream <code>stdin</code>, <code>stdout</code> and <code>stderr</code> (if enabled) from the time the request was made onwards.</li><li>If <code>what = `Logs_and_stream</code> after getting the output of <code>`Logs</code>, it will seamlessly transition into streaming current output.</li></ul><dl><dt>parameter stdin</dt><dd><p>attach to stdin. Default <code>false</code>.</p></dd></dl><dl><dt>parameter stdout</dt><dd><p>return and/or attach to stdout. Default <code>false</code>.</p></dd></dl><dl><dt>parameter stderr</dt><dd><p>return and/or attach to stderr. Default <code>false</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rm"><a href="#val-rm" class="anchor"></a><code><span class="keyword">val</span> rm : ?&#8288;addr:<a href="../../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a> <span>&#45;&gt;</span> ?&#8288;volumes:bool <span>&#45;&gt;</span> ?&#8288;force:bool <span>&#45;&gt;</span> ?&#8288;link:bool <span>&#45;&gt;</span> <a href="index.html#type-id">id</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>rm id</code> remove the container <code>id</code> from the filesystem.</p><dl><dt>raises Docker.Invalid_argument</dt><dd><p>if the container does not exist.</p></dd></dl><dl><dt>parameter volumes</dt><dd><p>Remove the volumes associated to the container. Default <code>false</code>.</p></dd></dl><dl><dt>parameter force</dt><dd><p>Kill then remove the container. Default <code>false</code>.</p></dd></dl><dl><dt>parameter link</dt><dd><p>Remove the specified link associated with the container. Default: <code>false</code>.</p></dd></dl></dd></dl><div class="spec module" id="module-Exec"><a href="#module-Exec" class="anchor"></a><code><span class="keyword">module</span> <a href="Exec/index.html">Exec</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>