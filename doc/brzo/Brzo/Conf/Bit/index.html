<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bit (brzo.Brzo.Conf.Bit)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../index.html">brzo</a> &#x00BB; <a href="../../index.html">Brzo</a> &#x00BB; <a href="../index.html">Conf</a> &#x00BB; Bit</nav><header class="odoc-preamble"><h1>Module <code><span>Conf.Bit</span></code></h1><p>Configuration bits.</p><p>Bundles a cli interface and a configuration file lookup.</p><p><b>Note.</b> For Cmdliner proper support we would likely hide it in Cmdliner terms and let them handle the merge logic. Though that poses a few problems with e.g. configuration error report/recovery. Another problem is the recursion between specifying the configuration file lookup on the cli itself while using it terms themselves. Also lazy absents.</p></header><nav class="odoc-toc"><ul><li><a href="#bits">Configuration bits</a></li></ul></nav><div class="odoc-content"><h2 id="bits"><a href="#bits" class="anchor"></a>Configuration bits</h2><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>The type for configuration bits of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_cli_arg" class="anchored"><a href="#val-with_cli_arg" class="anchor"></a><code><span><span class="keyword">val</span> with_cli_arg : <span>?docs:string <span class="arrow">&#45;&gt;</span></span> <span>?docv:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>doc:string <span class="arrow">&#45;&gt;</span></span> <span>absent:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
<span>conf:<span><span class="type-var">'a</span> <a href="../../../../b0/B00_serialk_sexp/Sexpq/index.html#type-t">B00_serialk_sexp.Sexpq.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>arg:<span>(<span><a href="../../../../cmdliner/Cmdliner/Arg/index.html#type-info">Cmdliner.Arg.info</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="../../../../cmdliner/Cmdliner/Arg/index.html#type-t">Cmdliner.Arg.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>with_cli_arg n ~doc ~docs ~docv ~absent ~conf ~arg</code> is a configuration bit named by <code>n</code>.</p><ul><li><code>arg</code> is used to parse the bit from the cli using an option argument named <code>n</code> documented with <code>doc</code> in section <code>docs</code> and metavariable <code>docv</code>.</li><li><code>conf</code> is used to lookup the bit value in a configuration dictionary with an optional key <code>n</code>.</li><li><code>absent</code> is used as a default value.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-with_cli" class="anchored"><a href="#val-with_cli" class="anchor"></a><code><span><span class="keyword">val</span> with_cli : <span>string <span class="arrow">&#45;&gt;</span></span> <span>absent:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>conf:<span><span class="type-var">'a</span> <a href="../../../../b0/B00_serialk_sexp/Sexpq/index.html#type-t">B00_serialk_sexp.Sexpq.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>cli:<span><span><span class="type-var">'a</span> option</span> <a href="../../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>with_cli n ~absent ~conf ~cli</code> is a configuration bit named by <code>n</code></p><ul><li><code>cli</code> is used to get the bit from the cli.</li><li><code>conf</code> is used to lookup the bit value in a configuration dictionary with an optional key <code>n</code>.</li><li><code>basent</code> is used as a default value.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-cli" class="anchored"><a href="#val-cli" class="anchor"></a><code><span><span class="keyword">val</span> cli : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="../../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span></span></code></div><div class="spec-doc"><p><code>cli b</code> is the command line interface for <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-conf" class="anchored"><a href="#val-conf" class="anchor"></a><code><span><span class="keyword">val</span> conf : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../../../b0/B00_serialk_sexp/Sexpq/index.html#type-t">B00_serialk_sexp.Sexpq.t</a></span></span></code></div><div class="spec-doc"><p><code>conf b</code> is the configuration <em>key</em> query for <code>b</code>. If the key is not found <code>absent</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../../../b0/B00_serialk_sexp/Sexp/index.html#type-t">B00_serialk_sexp.Sexp.t</a> * <a href="../../../../b0/B00_serialk_sexp/Sexpq/index.html#type-path">B00_serialk_sexp.Sexpq.path</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, string)</span> <a href="../../../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>get b cli sexp</code> gets the configuration bit from <code>sexp</code> if <code>cli</code> is <code>None</code>. If it's not in the configuration then <code>absent</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-append" class="anchored"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><span><span><span class="type-var">'a</span> list</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> list</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../../../b0/B00_serialk_sexp/Sexp/index.html#type-t">B00_serialk_sexp.Sexp.t</a> * <a href="../../../../b0/B00_serialk_sexp/Sexpq/index.html#type-path">B00_serialk_sexp.Sexpq.path</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> list</span>, string)</span> <a href="../../../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>append b cli sexp</code> gets the configuration bit from <code>sexp</code> and appends them to <code>cli</code>.</p></div></div></div></body></html>