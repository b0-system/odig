<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mindstorm_NXT (mindstorm.Mindstorm_NXT)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">mindstorm</a> &#x00BB; Mindstorm_NXT</nav><h1>Module <code>Mindstorm_NXT</code></h1><nav class="toc"><ul><li><a href="#exception-for-errors">Exception for errors</a></li><li><a href="#direct-commands">Direct commands</a></li><li><a href="#system-commands">System commands</a><ul><li><a href="#files">Files</a></li><li><a href="#brick-information">Brick information</a></li><li><a href="#polling">Polling</a></li></ul></li></ul></nav></header><dl><dt class="spec type" id="type-usb"><a href="#type-usb" class="anchor"></a><code><span class="keyword">type</span> usb</code></dt><dt class="spec type" id="type-bluetooth"><a href="#type-bluetooth" class="anchor"></a><code><span class="keyword">type</span> bluetooth</code></dt><dt class="spec type" id="type-conn"><a href="#type-conn" class="anchor"></a><code><span class="keyword">type</span> 'a conn</code></dt><dd><p>Abstract type representing a connection to a LEGO® mindstorm brick. The type parameter indicates whether this connection is a USB or a bluetooth one.</p></dd></dl><dl><dt class="spec value" id="val-connect_bluetooth"><a href="#val-connect_bluetooth" class="anchor"></a><code><span class="keyword">val</span> connect_bluetooth : ?&#8288;check_status:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-bluetooth">bluetooth</a> <a href="index.html#type-conn">conn</a></code></dt><dd><p><code>connect_bluetooth bdaddr</code> connects through bluetooth to the brick with bluetooth address <code>bdaddr</code>. See the section &quot;<span class="xref-unresolved" title="unresolved reference to &quot;Mindstorm.connectBluetooth&quot;"><a href="../Mindstorm/index.html"><code>Mindstorm</code></a>.connectBluetooth</span>&quot; for more information.</p><dl><dt>parameter check_status</dt><dd><p>set the default value for the <code>check_status</code> optional argument. This global default allows to easily globally activate status checking for a given connection. Checking the status ensures the command was transmitted properly but incur a cost of 60ms between two transmissions. Default: <code>false</code>.</p></dd></dl><dl><dt>raises Unix.Unix_error</dt><dd><p>in case of a connection problem. In particular, <code>Unix.Unix_error(Unix.EHOSTDOWN, _,_)</code> is raised if the brick is not turned on.</p></dd></dl></dd></dl><dl><dt class="spec module" id="module-USB"><a href="#module-USB" class="anchor"></a><code><span class="keyword">module</span> <a href="USB/index.html">USB</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Functions to choose and connect to NXT bricks connected through USB. So far, it works on Linux (users of other platforms, your help is welcome).</p></dd></dl><dl><dt class="spec value" id="val-close"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>close conn</code> closes the connection <code>conn</code> to the brick.</p></dd></dl><section><header><h3 id="exception-for-errors"><a href="#exception-for-errors" class="anchor"></a>Exception for errors</h3></header><dl><dt class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error</code><code> = </code><table class="variant"><tr id="type-error.No_more_handles" class="anchored"><td class="def constructor"><a href="#type-error.No_more_handles" class="anchor"></a><code>| </code><code><span class="constructor">No_more_handles</span></code></td><td class="doc"><p>All 16 handles are in use.</p></td></tr><tr id="type-error.No_space" class="anchored"><td class="def constructor"><a href="#type-error.No_space" class="anchor"></a><code>| </code><code><span class="constructor">No_space</span></code></td></tr><tr id="type-error.No_more_files" class="anchored"><td class="def constructor"><a href="#type-error.No_more_files" class="anchor"></a><code>| </code><code><span class="constructor">No_more_files</span></code></td></tr><tr id="type-error.EOF_expected" class="anchored"><td class="def constructor"><a href="#type-error.EOF_expected" class="anchor"></a><code>| </code><code><span class="constructor">EOF_expected</span></code></td></tr><tr id="type-error.Not_a_linear_file" class="anchored"><td class="def constructor"><a href="#type-error.Not_a_linear_file" class="anchor"></a><code>| </code><code><span class="constructor">Not_a_linear_file</span></code></td></tr><tr id="type-error.No_linear_space" class="anchored"><td class="def constructor"><a href="#type-error.No_linear_space" class="anchor"></a><code>| </code><code><span class="constructor">No_linear_space</span></code></td></tr><tr id="type-error.Undefined_error" class="anchored"><td class="def constructor"><a href="#type-error.Undefined_error" class="anchor"></a><code>| </code><code><span class="constructor">Undefined_error</span></code></td></tr><tr id="type-error.File_is_busy" class="anchored"><td class="def constructor"><a href="#type-error.File_is_busy" class="anchor"></a><code>| </code><code><span class="constructor">File_is_busy</span></code></td></tr><tr id="type-error.No_write_buffers" class="anchored"><td class="def constructor"><a href="#type-error.No_write_buffers" class="anchor"></a><code>| </code><code><span class="constructor">No_write_buffers</span></code></td></tr><tr id="type-error.Append_not_possible" class="anchored"><td class="def constructor"><a href="#type-error.Append_not_possible" class="anchor"></a><code>| </code><code><span class="constructor">Append_not_possible</span></code></td></tr><tr id="type-error.File_is_full" class="anchored"><td class="def constructor"><a href="#type-error.File_is_full" class="anchor"></a><code>| </code><code><span class="constructor">File_is_full</span></code></td></tr><tr id="type-error.File_exists" class="anchored"><td class="def constructor"><a href="#type-error.File_exists" class="anchor"></a><code>| </code><code><span class="constructor">File_exists</span></code></td></tr><tr id="type-error.Module_not_found" class="anchored"><td class="def constructor"><a href="#type-error.Module_not_found" class="anchor"></a><code>| </code><code><span class="constructor">Module_not_found</span></code></td></tr><tr id="type-error.Out_of_boundary" class="anchored"><td class="def constructor"><a href="#type-error.Out_of_boundary" class="anchor"></a><code>| </code><code><span class="constructor">Out_of_boundary</span></code></td></tr><tr id="type-error.Illegal_file_name" class="anchored"><td class="def constructor"><a href="#type-error.Illegal_file_name" class="anchor"></a><code>| </code><code><span class="constructor">Illegal_file_name</span></code></td></tr><tr id="type-error.Pending" class="anchored"><td class="def constructor"><a href="#type-error.Pending" class="anchor"></a><code>| </code><code><span class="constructor">Pending</span></code></td><td class="doc"><p>Pending communication transaction in progress</p></td></tr><tr id="type-error.Empty_mailbox" class="anchored"><td class="def constructor"><a href="#type-error.Empty_mailbox" class="anchor"></a><code>| </code><code><span class="constructor">Empty_mailbox</span></code></td><td class="doc"><p>Specified mailbox queue is empty</p></td></tr><tr id="type-error.Failed" class="anchored"><td class="def constructor"><a href="#type-error.Failed" class="anchor"></a><code>| </code><code><span class="constructor">Failed</span></code></td><td class="doc"><p>Request failed (i.e. specified file not found)</p></td></tr><tr id="type-error.Unknown" class="anchored"><td class="def constructor"><a href="#type-error.Unknown" class="anchor"></a><code>| </code><code><span class="constructor">Unknown</span></code></td><td class="doc"><p>Unknown command opcode</p></td></tr><tr id="type-error.Insane" class="anchored"><td class="def constructor"><a href="#type-error.Insane" class="anchor"></a><code>| </code><code><span class="constructor">Insane</span></code></td><td class="doc"><p>Insane packet</p></td></tr><tr id="type-error.Out_of_range" class="anchored"><td class="def constructor"><a href="#type-error.Out_of_range" class="anchor"></a><code>| </code><code><span class="constructor">Out_of_range</span></code></td><td class="doc"><p>Data contains out-of-range values</p></td></tr><tr id="type-error.Bus_error" class="anchored"><td class="def constructor"><a href="#type-error.Bus_error" class="anchor"></a><code>| </code><code><span class="constructor">Bus_error</span></code></td><td class="doc"><p>Communication bus error, can indicate a device failure.</p></td></tr><tr id="type-error.Buffer_full" class="anchored"><td class="def constructor"><a href="#type-error.Buffer_full" class="anchor"></a><code>| </code><code><span class="constructor">Buffer_full</span></code></td><td class="doc"><p>No free memory in communication buffer</p></td></tr><tr id="type-error.Invalid_conn" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_conn" class="anchor"></a><code>| </code><code><span class="constructor">Invalid_conn</span></code></td><td class="doc"><p>Specified channel/connection is not valid</p></td></tr><tr id="type-error.Busy_conn" class="anchored"><td class="def constructor"><a href="#type-error.Busy_conn" class="anchor"></a><code>| </code><code><span class="constructor">Busy_conn</span></code></td><td class="doc"><p>Specified channel/connection not configured or busy</p></td></tr><tr id="type-error.No_program" class="anchored"><td class="def constructor"><a href="#type-error.No_program" class="anchor"></a><code>| </code><code><span class="constructor">No_program</span></code></td><td class="doc"><p>No active program</p></td></tr><tr id="type-error.Bad_size" class="anchored"><td class="def constructor"><a href="#type-error.Bad_size" class="anchor"></a><code>| </code><code><span class="constructor">Bad_size</span></code></td><td class="doc"><p>Illegal size specified</p></td></tr><tr id="type-error.Bad_mailbox" class="anchored"><td class="def constructor"><a href="#type-error.Bad_mailbox" class="anchor"></a><code>| </code><code><span class="constructor">Bad_mailbox</span></code></td><td class="doc"><p>Illegal mailbox queue ID specified</p></td></tr><tr id="type-error.Bad_field" class="anchored"><td class="def constructor"><a href="#type-error.Bad_field" class="anchor"></a><code>| </code><code><span class="constructor">Bad_field</span></code></td><td class="doc"><p>Attempted to access invalid field of a structure</p></td></tr><tr id="type-error.Bad_io" class="anchored"><td class="def constructor"><a href="#type-error.Bad_io" class="anchor"></a><code>| </code><code><span class="constructor">Bad_io</span></code></td><td class="doc"><p>Bad input or output specified</p></td></tr><tr id="type-error.Out_of_memory" class="anchored"><td class="def constructor"><a href="#type-error.Out_of_memory" class="anchor"></a><code>| </code><code><span class="constructor">Out_of_memory</span></code></td><td class="doc"><p>Insufficient memory available</p></td></tr><tr id="type-error.Bad_arg" class="anchored"><td class="def constructor"><a href="#type-error.Bad_arg" class="anchor"></a><code>| </code><code><span class="constructor">Bad_arg</span></code></td><td class="doc"><p>Bad arguments</p></td></tr></table></dt><dd><p>Error codes</p></dd></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> <a href="index.html#type-error">error</a></code></dt><dd><p>This exception can be raised by any of the functions below except when the optional argument <code>~check_status</code> is set to false. Note that checking for errors leads to up to approximately a 60ms latency between two commands.</p></dd></dl><dl><dt class="spec exception" id="exception-File_not_found"><a href="#exception-File_not_found" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">File_not_found</span></code></dt><dd><p>Raised to indicate that a file is not present on the brick.</p></dd></dl></section><section><header><h3 id="direct-commands"><a href="#direct-commands" class="anchor"></a>Direct commands</h3></header><dl><dt class="spec module" id="module-Program"><a href="#module-Program" class="anchor"></a><code><span class="keyword">module</span> <a href="Program/index.html">Program</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Starting and stopping programs (.rxe files) on the brick.</p></dd></dl><dl><dt class="spec module" id="module-Motor"><a href="#module-Motor" class="anchor"></a><code><span class="keyword">module</span> <a href="Motor/index.html">Motor</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Output ports.</p></dd></dl><dl><dt class="spec module" id="module-Sensor"><a href="#module-Sensor" class="anchor"></a><code><span class="keyword">module</span> <a href="Sensor/index.html">Sensor</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Input ports.</p></dd></dl><dl><dt class="spec module" id="module-Sound"><a href="#module-Sound" class="anchor"></a><code><span class="keyword">module</span> <a href="Sound/index.html">Sound</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Play sounds (.rso files) and tones.</p></dd></dl><dl><dt class="spec module" id="module-Message"><a href="#module-Message" class="anchor"></a><code><span class="keyword">module</span> <a href="Message/index.html">Message</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Read and write messages from the 10 message queues. This can be thought as advanced direct commands.</p></dd></dl></section><section><header><h3 id="system-commands"><a href="#system-commands" class="anchor"></a>System commands</h3></header><section><header><h4 id="files"><a href="#files" class="anchor"></a>Files</h4></header><dl><dt class="spec type" id="type-in_channel"><a href="#type-in_channel" class="anchor"></a><code><span class="keyword">type</span> 'a in_channel</code></dt><dd><p>Handle for reading from the brick.</p></dd></dl><dl><dt class="spec value" id="val-open_in"><a href="#val-open_in" class="anchor"></a><code><span class="keyword">val</span> open_in : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-in_channel">in_channel</a></code></dt><dd><p><code>open_in conn fname</code> opens the file named <code>fname</code> on the brick for reading. The channel must be closed with <a href="index.html#val-close_in"><code>Mindstorm.NXT.close_in</code></a>. Close it as soon as possible as channels are a scarce resource.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>fname</code> is not a ASCIIZ string with maximum 15.3 characters.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-in_channel_length"><a href="#val-in_channel_length" class="anchor"></a><code><span class="keyword">val</span> in_channel_length : <span class="type-var">'a</span> <a href="index.html#type-in_channel">in_channel</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>in_channel_length ch</code> returns the length of the channel <code>ch</code>.</p></dd></dl><dl><dt class="spec value" id="val-close_in"><a href="#val-close_in" class="anchor"></a><code><span class="keyword">val</span> close_in : <span class="type-var">'a</span> <a href="index.html#type-in_channel">in_channel</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>close_in ch</code> closes the channel <code>ch</code>. Closing an already closed channel does nothing.</p></dd></dl><dl><dt class="spec value" id="val-input"><a href="#val-input" class="anchor"></a><code><span class="keyword">val</span> input : <span class="type-var">'a</span> <a href="index.html#type-in_channel">in_channel</a> <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>input ch buf ofs len</code> reads a block of data of length <code>len</code> from the channel <code>ch</code> and write it to <code>buf</code> starting at position <code>ofs</code>.</p><dl><dt>raises End_of_file</dt><dd><p>if there is no more data to read.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-out_channel"><a href="#type-out_channel" class="anchor"></a><code><span class="keyword">type</span> 'a out_channel</code></dt><dd><p>Handle for writing data to the brick.</p></dd></dl><dl><dt class="spec type" id="type-out_flag"><a href="#type-out_flag" class="anchor"></a><code><span class="keyword">type</span> out_flag</code> = <code>[ </code><table class="variant"><tr id="type-out_flag.File" class="anchored"><td class="def constructor"><a href="#type-out_flag.File" class="anchor"></a><code>| </code><code>`File <span class="keyword">of</span> int</code></td></tr><tr id="type-out_flag.Linear" class="anchored"><td class="def constructor"><a href="#type-out_flag.Linear" class="anchor"></a><code>| </code><code>`Linear <span class="keyword">of</span> int</code></td></tr><tr id="type-out_flag.Data" class="anchored"><td class="def constructor"><a href="#type-out_flag.Data" class="anchor"></a><code>| </code><code>`Data <span class="keyword">of</span> int</code></td></tr><tr id="type-out_flag.Append" class="anchored"><td class="def constructor"><a href="#type-out_flag.Append" class="anchor"></a><code>| </code><code>`Append</code></td></tr></table><code> ]</code></dt><dd><p>The standard NXT firmware requires that executable files and icons are linear but all other types of files (including sound files) can be non-contiguous (i.e., fragmented).</p><ul><li><code>`File length</code>: Default file, the parameter is its <code>length</code>.</li><li><code>`Linear length</code>: Write a linear file, the parameter is its <code>length</code>.</li></ul></dd></dl><dl><dt class="spec value" id="val-open_out"><a href="#val-open_out" class="anchor"></a><code><span class="keyword">val</span> open_out : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> <a href="index.html#type-out_flag">out_flag</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-out_channel">out_channel</a></code></dt><dd><p><code>open_out conn flag fname</code> opens the file <code>fname</code> for writing. The channel must be closed with <a href="index.html#val-close_in"><code>Mindstorm.NXT.close_in</code></a>. Close it as soon as possible as channels are a scarce resource.</p><p>If the the file exists, <code>Error File_exists</code> is raised. If the brick does not like the extension you use, <code>Error File_is_full</code> may be raised.</p></dd></dl><dl><dt class="spec value" id="val-close_out"><a href="#val-close_out" class="anchor"></a><code><span class="keyword">val</span> close_out : <span class="type-var">'a</span> <a href="index.html#type-out_channel">out_channel</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>close_out ch</code> closes the channel <code>ch</code>. Closing an already closed channel does nothing.</p></dd></dl><dl><dt class="spec value" id="val-output"><a href="#val-output" class="anchor"></a><code><span class="keyword">val</span> output : <span class="type-var">'a</span> <a href="index.html#type-out_channel">out_channel</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>output ch buf ofs len</code> ouputs the substring <code>buf.[ofs
      .. ofs+len-1]</code> to the channel <code>fd</code>. Returns the number of bytes actually written. If you try to write more bytes than declared when opening the file, <code>Error File_is_full</code> is raised.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>remove conn fname</code> remove the file <code>fname</code> from the brick.</p></dd></dl><dl><dt class="spec module" id="module-Find"><a href="#module-Find" class="anchor"></a><code><span class="keyword">module</span> <a href="Find/index.html">Find</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>List files on the brick matching a given pattern.</p></dd></dl></section><section><header><h4 id="brick-information"><a href="#brick-information" class="anchor"></a>Brick information</h4></header><dl><dt class="spec value" id="val-firmware_version"><a href="#val-firmware_version" class="anchor"></a><code><span class="keyword">val</span> firmware_version : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> int * int * int * int</code></dt><dd><p><code>firmware_version conn</code> returns a tuple <code>(p1, p0, f1, f0)</code> where <code>p1</code> is the major version of the protocol, <code>p0</code> is the minor version of the protocol, <code>f1</code> is the major version of the firmware, <code>f0</code> is the minor version of the firmware,</p></dd></dl><dl><dt class="spec value" id="val-set_brick_name"><a href="#val-set_brick_name" class="anchor"></a><code><span class="keyword">val</span> set_brick_name : ?&#8288;check_status:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_brick_name conn name</code> change the name to which one is connected through <code>conn</code> to <code>name</code>.</p><dl><dt>parameter check_status</dt><dd><p>whether to check the status returned by the brick (and raise <code>Error</code> accordingly). Default: see <a href="index.html#val-connect_bluetooth"><code>Mindstorm.NXT.connect_bluetooth</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-brick_info"><a href="#type-brick_info" class="anchor"></a><code><span class="keyword">type</span> brick_info</code><code> = </code><code>{</code><table class="record"><tr id="type-brick_info.brick_name" class="anchored"><td class="def field"><a href="#type-brick_info.brick_name" class="anchor"></a><code>brick_name : string;</code></td><td class="doc"><p>NXT name (set with <a href="index.html#val-set_brick_name"><code>Mindstorm.NXT.set_brick_name</code></a>)</p></td></tr><tr id="type-brick_info.bluetooth_addr" class="anchored"><td class="def field"><a href="#type-brick_info.bluetooth_addr" class="anchor"></a><code>bluetooth_addr : string;</code></td><td class="doc"><p>Bluetooth address</p></td></tr><tr id="type-brick_info.signal_strength" class="anchored"><td class="def field"><a href="#type-brick_info.signal_strength" class="anchor"></a><code>signal_strength : int;</code></td><td class="doc"><p>Bluetooth signal strength (for some reason is always 0)</p></td></tr><tr id="type-brick_info.free_user_flash" class="anchored"><td class="def field"><a href="#type-brick_info.free_user_flash" class="anchor"></a><code>free_user_flash : int;</code></td><td class="doc"><p>Free user FLASH</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-get_device_info"><a href="#val-get_device_info" class="anchor"></a><code><span class="keyword">val</span> get_device_info : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> <a href="index.html#type-brick_info">brick_info</a></code></dt><dd><p><code>get_device_info conn</code> returns some informations about the brick connected through <code>conn</code>.</p></dd></dl><dl><dt class="spec value" id="val-keep_alive"><a href="#val-keep_alive" class="anchor"></a><code><span class="keyword">val</span> keep_alive : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>keep_alive conn</code> returns the current sleep time limit in milliseconds.</p></dd></dl><dl><dt class="spec value" id="val-battery_level"><a href="#val-battery_level" class="anchor"></a><code><span class="keyword">val</span> battery_level : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>battery_level conn</code> return the voltages in millivolts of the battery on the brick.</p></dd></dl><dl><dt class="spec value" id="val-delete_user_flash"><a href="#val-delete_user_flash" class="anchor"></a><code><span class="keyword">val</span> delete_user_flash : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-bluetooth_reset"><a href="#val-bluetooth_reset" class="anchor"></a><code><span class="keyword">val</span> bluetooth_reset : <a href="index.html#type-usb">usb</a> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>bluetooth_reset conn</code> performs a factory reset of the brick. (The type system does will a allow this command to be transmitted via bluetooth because all bluetooth functionality is reset by this command.)</p></dd></dl><dl><dt class="spec value" id="val-boot"><a href="#val-boot" class="anchor"></a><code><span class="keyword">val</span> boot : <a href="index.html#type-usb">usb</a> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h4 id="polling"><a href="#polling" class="anchor"></a>Polling</h4></header><dl><dt class="spec value" id="val-poll_length"><a href="#val-poll_length" class="anchor"></a><code><span class="keyword">val</span> poll_length : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> [ `Poll_buffer | `High_speed_buffer ] <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the number of bytes for a command in the low-speed buffer or the high-speed buffer (0 = no command is ready).</p></dd></dl><dl><dt class="spec value" id="val-poll_command"><a href="#val-poll_command" class="anchor"></a><code><span class="keyword">val</span> poll_command : <span class="type-var">'a</span> <a href="index.html#type-conn">conn</a> <span>&#45;&gt;</span> [ `Poll_buffer | `High_speed_buffer ] <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int * string</code></dt><dd><p>Returns the number of bytes for a command in the low-speed buffer or the high-speed buffer (0 = no command is ready).</p><p>Reads bytes from the low-speed or high-speed buffer.</p></dd></dl></section></section></div></body></html>