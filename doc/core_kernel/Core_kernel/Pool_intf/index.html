<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pool_intf (core_kernel.Core_kernel.Pool_intf)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">core_kernel</a> &#x00BB; <a href="../index.html">Core_kernel</a> &#x00BB; Pool_intf</nav><h1>Module <code>Core_kernel.Pool_intf</code></h1><p>A manual memory manager for a set of mutable tuples. The point of <code>Pool</code> is to allocate a single long-lived block of memory (the pool) that lives in the OCaml major heap, and then to reuse the block, rather than continually allocating blocks on the minor heap.</p><p>A pool stores a bounded-size set of tuples, where client code is responsible for explicitly controlling when the pool allocates and frees tuples. One <code>create</code>s a pool of a certain capacity, which returns an empty pool that can hold that many tuples. One then uses <code>new</code> to allocate a tuple, which returns a <code>Pointer.t</code> to the tuple. One then uses <code>get</code> and <code>set</code> along with the pointer to get and set slots of the tuple. Finally, one <code>free</code>'s a pointer to the pool's memory for a tuple, making the memory available for subsequent reuse.</p><p>In typical usage, one wraps up a pool with an abstract interface, giving nice names to the tuple slots, and only exposing mutation where desired.</p><p>All the usual problems with manual memory allocation are present with pools:</p><ul><li>one can mistakenly use a pointer after it is freed</li><li>one can mistakenly free a pointer multiple times</li><li>one can forget to free a pointer</li></ul><p>There is a debugging functor, <code>Pool.Error_check</code>, that is useful for building pools to help debug incorrect pointer usage.</p></header><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>S</code> is the module type for a pool.</p></dd></dl><div class="spec module-type" id="module-type-Pool"><a href="#module-type-Pool" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Pool/index.html">Pool</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>