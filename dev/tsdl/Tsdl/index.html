<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tsdl (tsdl.Tsdl)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">tsdl</a> &#x00BB; Tsdl</nav><h1>Module <code>Tsdl</code></h1><p>SDL thin bindings.</p><p>Consult the <a href="index.html#conventions"><span>binding conventions</span></a>, the <a href="Sdl/index.html#coverage"><span>binding coverage</span></a> and <a href="index.html#examples"><span>examples</span></a> of use.</p><p>Given the thinness of the binding most functions are documented by linking directly to SDL's own documentation. Unfortunately it seems that the wiki that held it is no longer being updated. For this reason latest API entry points no longer link to the documentation for now (upstream <a href="https://bugzilla.libsdl.org/show_bug.cgi?id=3841">issue</a> about the problem).</p><p>Open the module to use it, this defines only the module <code>Sdl</code> in your scope.</p><p><b>Note.</b> The module initialization code calls <a href="http://wiki.libsdl.org/SDL_SetMainReady">SDL_SetMainReady</a>.</p><p><b>References</b></p><ul><li><a href="http://wiki.libsdl.org/APIByCategory">SDL API</a></li></ul><p><em>Release v0.9.6 — SDL 2.0.6 — <a href="http://erratique.ch/software/tsdl">homepage</a></em></p><nav class="toc"><ul><li><a href="#sdl">SDL</a></li><li><a href="#conventions">Binding conventions</a><ul><li><a href="#naming">Naming</a></li><li><a href="#errors">Errors</a></li><li><a href="#enums">Bit fields and enumerants</a></li></ul></li><li><a href="#examples">Examples</a><ul><li><a href="#toplevel">Toplevel</a></li><li><a href="#opengl">OpenGL window</a></li></ul></li></ul></nav></header><section><header><h2 id="sdl"><a href="#sdl" class="anchor"></a>SDL</h2></header><dl><dt class="spec module" id="module-Sdl"><a href="#module-Sdl" class="anchor"></a><code><span class="keyword">module</span> <a href="Sdl/index.html">Sdl</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>SDL bindings.</p></dd></dl></section><section><header><h2 id="conventions"><a href="#conventions" class="anchor"></a>Binding conventions</h2></header><section><header><h3 id="naming"><a href="#naming" class="anchor"></a>Naming</h3><p>C names are transformed as follows. The <code>SDL_</code> is mapped to the module name <a href="Sdl/index.html"><code>Sdl</code></a>, for the rest add an underscore between each minuscule and majuscule and lower case the result (e.g. <code>SDL_GetError</code> maps to <a href="Sdl/index.html#val-get_error"><code>Sdl.get_error</code></a>). Part of the name may also be wrapped by a module, (e.g. SDL_INIT_VIDEO becomes <a href="Sdl/Init/index.html#val-video"><code>Sdl.Init.video</code></a>). If you open <a href="index.html"><code>Tsdl</code></a>, your code will look mostly like SDL code but in accordance with OCaml's programming conventions. Exceptions to the naming convention do occur for technical reasons.</p></header></section><section><header><h3 id="errors"><a href="#errors" class="anchor"></a>Errors</h3><p>All functions that return an <a href="Sdl/index.html#type-result"><code>Sdl.result</code></a> have the string returned by <code>Sdl.get_error ()</code> in the <code>Error (`Msg _)</code> case.</p></header></section><section><header><h3 id="enums"><a href="#enums" class="anchor"></a>Bit fields and enumerants</h3><p>Most bit fields and enumerants are not mapped to variants, they are represented by OCaml values of a given abstract type in a specific module with a composition operator to combine them and a testing operator to test them. The flags for initializing SDL in the module <a href="Sdl/Init/index.html"><code>Sdl.Init</code></a> is an example of that:</p><pre><code class="ml">match Sdl.init Sdl.Init.(video + timer + audio) with
| Error _ -&gt; ...
| Ok () -&gt; ...</code></pre><p>Using variants in that case is inconvenient for the binding function and of limited use since most of the time bit fields are given to setup state and, as such, are less likley to be used for pattern matching.</p></header></section></section><section><header><h2 id="examples"><a href="#examples" class="anchor"></a>Examples</h2></header><section><header><h3 id="toplevel"><a href="#toplevel" class="anchor"></a>Toplevel</h3><p>To use <code>Tsdl</code> in the toplevel with <code>findlib</code> just issue:</p><pre><code class="ml">&gt; #use &quot;topfind&quot;;;
&gt; #require &quot;tsdl.top&quot;;;</code></pre><p>This automatically loads the library and opens the <code>Tsdl</code> module.</p></header></section><section><header><h3 id="opengl"><a href="#opengl" class="anchor"></a>OpenGL window</h3><p>The following is the minimum you need to get a working OpenGL window with SDL.</p><pre><code class="ml">open Tsdl
open Result

let main () = match Sdl.init Sdl.Init.video with
| Error (`Msg e) -&gt; Sdl.log &quot;Init error: %s&quot; e; exit 1
| Ok () -&gt;
    match Sdl.create_window ~w:640 ~h:480 &quot;SDL OpenGL&quot; Sdl.Window.opengl with
    | Error (`Msg e) -&gt; Sdl.log &quot;Create window error: %s&quot; e; exit 1
    | Ok w -&gt;
        Sdl.delay 3000l;
        Sdl.destroy_window w;
        Sdl.quit ();
        exit 0

let () = main ()</code></pre><p>This can be compiled to byte and native code with:</p><pre>&gt; ocamlfind ocamlc -package tsdl -linkpkg -o min.byte min.ml
&gt; ocamlfind ocamlopt -package tsdl -linkpkg -o min.native min.ml</pre></header></section></section></div></body></html>