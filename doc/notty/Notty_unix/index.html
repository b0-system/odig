<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Notty_unix (notty.Notty_unix)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">notty</a> &#x00BB; Notty_unix</nav><header class="odoc-preamble"><h1>Module <code><span>Notty_unix</span></code></h1><p><code>Notty</code> IO for pure <code>Unix</code>.</p><p>This is an IO module for <a href="../Notty/index.html"><code>Notty</code></a>.</p><p><em>v0.2.2 — <a href="https://github.com/pqwy/notty">homepage</a></em></p></header><nav class="odoc-toc"><ul><li><a href="#fullscreen">Fullscreen input and output</a></li><li><a href="#inline">Inline output</a></li><li><a href="#caps">Capability detection</a></li></ul></nav><div class="odoc-content"><h2 id="fullscreen"><a href="#fullscreen" class="anchor"></a>Fullscreen input and output</h2><p>.</p><div class="odoc-spec"><div class="spec module" id="module-Term" class="anchored"><a href="#module-Term" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Term/index.html">Term</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Terminal IO abstraction for fullscreen, interactive applications.</p></div></div><h2 id="inline"><a href="#inline" class="anchor"></a>Inline output</h2><p>These operations do not assume exclusive access to the output. This means that they can be combined with other means of producing output. At the same time, it means that they are affected by the current terminal state, and that this state is not tracked.</p><div class="odoc-spec"><div class="spec value" id="val-winsize" class="anchored"><a href="#val-winsize" class="anchor"></a><code><span><span class="keyword">val</span> winsize : <span><a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> option</span></span></code></div><div class="spec-doc"><p><code>winsize fd</code> is <code>Some (columns, rows)</code>, the current dimensions of <code>fd</code>'s backing tty, or <code>None</code>, when <code>fd</code> is not backed by a tty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-eol" class="anchored"><a href="#val-eol" class="anchor"></a><code><span><span class="keyword">val</span> eol : <span><a href="../Notty/index.html#type-image">Notty.image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Notty/index.html#type-image">Notty.image</a></span></code></div><div class="spec-doc"><p><code>eol image</code> is <code>image</code>, producing an extra newline when printed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output_image" class="anchored"><a href="#val-output_image" class="anchor"></a><code><span><span class="keyword">val</span> output_image : <span>?cap:<a href="../Notty/Cap/index.html#type-t">Notty.Cap.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?fd:<a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Notty/index.html#type-image">Notty.image</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>output_image ?cap ?fd image</code> writes <code>image</code> to <code>fd</code>.</p><p>The image is displayed in its full height. If the output is a tty, image width is clipped to the output width. Otherwise, full width is used.</p><p><code>~cap</code> is the <a href="#caps">optional</a> terminal capability set.</p><p><code>~fd</code> defaults to <code>stdout</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output_image_size" class="anchored"><a href="#val-output_image_size" class="anchor"></a><code><span><span class="keyword">val</span> output_image_size : <span>?cap:<a href="../Notty/Cap/index.html#type-t">Notty.Cap.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?fd:<a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Notty/index.html#type-image">Notty.image</a>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>output_image_size ?cap ?fd f</code> is <code>output_image ?cap ?fd (f size)</code> where <code>size</code> are <code>fd</code>'s current <a href="#val-winsize">output dimensions</a>.</p><p>If <code>fd</code> is not backed by a tty, as a matter of convenience, <code>f</code> is applied to <code>(80, 24)</code>. Use <a href="../../ocaml/Unix/index.html#val-isatty"><code>Unix.isatty</code></a> or <a href="#val-winsize"><code>winsize</code></a> to detect whether the output has a well-defined size.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-show_cursor" class="anchored"><a href="#val-show_cursor" class="anchor"></a><code><span><span class="keyword">val</span> show_cursor : <span>?cap:<a href="../Notty/Cap/index.html#type-t">Notty.Cap.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?fd:<a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>show_cursor ?cap ?fd visible</code> toggles the cursor visibility on <code>fd</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-move_cursor" class="anchored"><a href="#val-move_cursor" class="anchor"></a><code><span><span class="keyword">val</span> move_cursor : <span>?cap:<a href="../Notty/Cap/index.html#type-t">Notty.Cap.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?fd:<a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span>
<span><span>[ `Home <span><span>| `By</span> of int * int</span> <span><span>| `To</span> of int * int</span> ]</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>move_cursor ?cap ?fd motion</code> moves the cursor on <code>fd</code>.</p><p><code>motion</code> is one of:</p><ul><li><code>`To (column, line)</code>, positioning the cursor to <code>(column, line)</code>. Origin is <code>(0, 0)</code>, the upper-left corner of the screen.</li><li><code>`Home</code>, moving the cursor the beginning of line.</li><li><p><code>`By (columns, lines)</code>, moving the cursor <code>columns</code> to the right (left if negative) and <code>lines</code> down (up if negative).</p><p><b>Note</b> Behavior is terminal dependent if the movement overshoots the output size.</p></li></ul></div></div><h2 id="caps"><a href="#caps" class="anchor"></a>Capability detection</h2><p>All <code>image</code> output requires <a href="../Notty/Cap/index.html#type-t">terminal capabilities</a>.</p><p>When not provided, capabilities are auto-detected, by checking that the output is a tty, that the environment variable <code>$TERM</code> is set, and that it is not set to either <code>&quot;&quot;</code> or <code>&quot;dumb&quot;</code>. If these conditions hold, <a href="../Notty/Cap/index.html#val-ansi">ANSI</a> escapes are used. Otherwise, <a href="../Notty/Cap/index.html#val-dumb">no</a> escapes are used.</p></div></body></html>