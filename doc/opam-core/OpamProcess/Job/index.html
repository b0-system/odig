<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Job (opam-core.OpamProcess.Job)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">opam-core</a> &#x00BB; <a href="../index.html">OpamProcess</a> &#x00BB; Job</nav><header class="odoc-preamble"><h1>Module <code><span>OpamProcess.Job</span></code></h1><p>Higher-level interface to allow parallelism</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Op" class="anchored"><a href="#module-Op" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Op/index.html">Op</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Open type and add combinators. Meant to be opened</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Sequential run of a job</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dry_run" class="anchored"><a href="#val-dry_run" class="anchor"></a><code><span><span class="keyword">val</span> dry_run : <span><span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <code>run</code> but doesn't actually run any shell command, and feed a dummy result to the cont.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-catch" class="anchored"><a href="#val-catch" class="anchor"></a><code><span><span class="keyword">val</span> catch : <span><span>(<span>exn <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Catch exceptions raised within a job</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ignore_errors" class="anchored"><a href="#val-ignore_errors" class="anchor"></a><code><span><span class="keyword">val</span> ignore_errors : <span>default:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>?message:string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Ignore all non-fatal exceptions raised by job and return default</p></div></div><div class="odoc-spec"><div class="spec value" id="val-finally" class="anchored"><a href="#val-finally" class="anchor"></a><code><span><span class="keyword">val</span> finally : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Register an exception-safe finaliser in a job. <code>finally job fin</code> is equivalent to <code>catch job (fun e -&gt; fin (); raise e) @@+ fun r -&gt; fin (); Done r</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_list" class="anchored"><a href="#val-of_list" class="anchor"></a><code><span><span class="keyword">val</span> of_list : <span>?keep_going:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../index.html#type-command">command</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../index.html#type-command">command</a> * <a href="../index.html#type-result">result</a>)</span> option</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Converts a list of commands into a job that returns None on success, or the first failed command and its result. Unless <code>keep_going</code> is true, stops on first error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_fun_list" class="anchored"><a href="#val-of_fun_list" class="anchor"></a><code><span><span class="keyword">val</span> of_fun_list : <span>?keep_going:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-command">command</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../index.html#type-command">command</a> * <a href="../index.html#type-result">result</a>)</span> option</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>As <code>of_list</code>, but takes a list of functions that return the commands. The functions will only be evaluated when the command needs to be run.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-seq" class="anchored"><a href="#val-seq" class="anchor"></a><code><span><span class="keyword">val</span> seq : <span><span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Returns the job made of the the given homogeneous jobs run sequentially</p></div></div><div class="odoc-spec"><div class="spec value" id="val-seq_map" class="anchored"><a href="#val-seq_map" class="anchor"></a><code><span><span class="keyword">val</span> seq_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="Op/index.html#type-job">Op.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> list</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Sequentially maps jobs on a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_text" class="anchored"><a href="#val-with_text" class="anchor"></a><code><span><span class="keyword">val</span> with_text : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Op/index.html#type-job">Op.job</a></span></span></code></div><div class="spec-doc"><p>Sets and overrides text of the underlying commands</p></div></div></div></body></html>