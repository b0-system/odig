<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pager (b0.B0_ui.Pager)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B0_ui</a> &#x00BB; Pager</nav><h1>Module <code>B0_ui.Pager</code></h1><p>Pager interaction.</p><nav class="toc"><ul><li><a href="#cli">Cli arguments</a></li><li><a href="#pager">Pager</a></li></ul></nav></header><section><header><h2 id="cli"><a href="#cli" class="anchor"></a>Cli arguments</h2></header><dl><dt class="spec value" id="val-envs"><a href="#val-envs" class="anchor"></a><code><span class="keyword">val</span> envs : <a href="../../../cmdliner/Cmdliner/Term/index.html#type-env_info">Cmdliner.Term.env_info</a> list</code></dt><dd><p><code>envs</code> describe the <code>PAGER</code> and <code>TERM</code> environment variable.</p></dd></dl><dl><dt class="spec value" id="val-don't"><a href="#val-don't" class="anchor"></a><code><span class="keyword">val</span> don't : ?&#8288;docs:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> bool <a href="../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></code></dt><dd><p><code>don't ~docs ()</code> is a <code>--no-pager</code> command line option to unconditionally request not use a pager. <code>docs</code> is the manual section where the option is documented.</p></dd></dl></section><section><header><h2 id="pager"><a href="#pager" class="anchor"></a>Pager</h2></header><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : ?&#8288;search:<a href="../../B0_std/Fpath/index.html#type-t">B0_std.Fpath.t</a> list <span>&#45;&gt;</span> don't:bool <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a> option, string) <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>find ~search ~don't</code> finds a suitable pager. This is (in order):</p><ol><li><code>Ok None</code> if <code>don't</code> is <code>true</code> or if the <code>TERM</code> environment variable is <code>dumb</code> or undefined.</li><li><code>Ok (Some pager)</code> if <code>pager</code> is a tool invocation parsed from the <code>PAGER</code> environment variable that can be found via <code>Os.Cmd.find ?search</code>.</li><li><code>Ok (Some pager)</code> if either <code>less</code> or <code>more</code> can be found (in that order) via <code>Os.Cmd.find ?search</code>.</li><li><code>Ok None</code> otherwise.</li></ol></dd></dl><dl><dt class="spec value" id="val-page_stdout"><a href="#val-page_stdout" class="anchor"></a><code><span class="keyword">val</span> page_stdout : <a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a> option <span>&#45;&gt;</span> (unit, string) <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>page_stdout pager</code> setups the program so that if <code>pager</code> is <code>Some cmd</code>, the standard output of the program is redirected to a spawn of <code>cmd</code> with the following twists:</p><ul><li>If the environment variable <code>LESS</code> is undefined in the current environment it is set to <code>LESS=FRX</code> for the spawn of <code>cmd</code>.</li><li>A <span class="xref-unresolved" title="unresolved reference to &quot;Pervasive.at_exit&quot;"><code>Pervasive</code>.at_exit</span> function is installed that flushes <span class="xref-unresolved" title="unresolved reference to &quot;Fmt.stdout&quot;"><code>Fmt</code>.stdout</span> and <code>stdout</code>, closes <code>Unix.stdout</code> and waits upon the <code>cmd</code> spawn termination.</li></ul><p>If <code>pager</code> is <code>None</code> this function has no effect.</p></dd></dl><dl><dt class="spec value" id="val-page_files"><a href="#val-page_files" class="anchor"></a><code><span class="keyword">val</span> page_files : <a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a> option <span>&#45;&gt;</span> <a href="../../B0_std/Fpath/index.html#type-t">B0_std.Fpath.t</a> list <span>&#45;&gt;</span> (unit, string) <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>page_files pager fs</code> uses <code>pager</code> to page the files <code>fs</code>. If <code>pager</code> is:</p><ul><li><code>None</code>, each of the <code>fs</code> files is output on stdout in order separated by a file separator character (U+001C).</li><li><code>Some cmd</code>, <code>cmd</code> is run with <code>fs</code> as arguments. If <code>fs</code> is empty does nothing.</li></ul></dd></dl></section></div></body></html>