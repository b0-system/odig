<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>manual (odig.manual)</title><link rel="stylesheet" href="../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="index.html">Up</a> â€“ <a href="index.html">odig</a> &#x00BB; manual</nav></header><h1 id="manual"><a href="#manual" class="anchor"></a>Odig manual</h1><p><code>odig</code> helps you to access information about installed OCaml packages. The following shows basic <code>odig</code> usage, to understand how odig looks up that information see the <a href="packaging.html"><span>packaging conventions</span></a>.</p><p>In this manual we use <code>odig</code> itself as the example package.</p><h2 id="meta"><a href="#meta" class="anchor"></a>Package metadata</h2><p>Basic information about packages and their metadata is available with the <code>pkg</code> command.</p><pre>odig pkg              # List recognized packages and their version
odig pkg odig --long  # Show odig's package full metadata</pre><p>Metadata fields of packages can be queried individually with the <code>show</code> command:</p><pre>odig show repo odig        # Show odig's repository address
odig show homepage odig    # Show odig's homepage address
odig show license odig     # Show odig's license(s) tags</pre><p>A few URI metadata fields can be opened directly in your browser with the <code>browse</code> command:</p><pre>odig browse homepage odig    # Open odig's homepage in your browser
odig browse issues odig      # Open odig's issue tracker in your browser
odig browse online-doc odig  # Open odig's online docs in your browser</pre><h2 id="distrib"><a href="#distrib" class="anchor"></a>Package distribution documentation</h2><p>If the package installed them <code>odig</code> provides instant access to the the readme, change log and license files of a package via: the</p><pre>odig readme odig    # Show the readme of odig
odig changes odig   # Show the changes of odig
odig license odig   # Show the license of odig</pre><p>If you want to access the file paths rather than the content use <code>show</code>:</p><pre>odig show readme-files odig    # Show path to the readme of odig
odig show changes-files odig   # Show path the changes of odig
odig show license-files odig   # Show path the license of odig</pre><h2 id="odoc_docs"><a href="#odoc_docs" class="anchor"></a>Package odoc API documentation and manuals</h2><p>To open the HTML package list or the page of a package in your browser use:</p><pre>odig doc          # Package list
odig doc odig     # Doc for the odig package</pre><p>In general if <code>odig doc</code> can't satisfy your request it will try to generate documentation for it unless prevented by the <code>-n</code> option. If the documentation for your request was already generated it will open it without checking if it's up-to-date, use the option <code>-u</code> to guarantee it's fresh.</p><pre>odig doc -u       # Up-to-date package list and package docs
odig doc -u odig  # Up-to-date doc for the odig package</pre><p>If you only want to generate the documentation use the `odoc` command:</p><pre>odig odoc       # Generate API docs and manuals for all packages
odig odoc odig  # Generate API docs and manuals for the odig package</pre><p>If the OCaml manual is installed as the <code>ocaml-manual</code> package (e.g. via <code>opam install ocaml-manual</code>), the local copy gets linked from the package list page.</p><h2 id="odoc_themes"><a href="#odoc_themes" class="anchor"></a>odoc API documentation theme</h2><p>The way new themes can be installed is described <a href="packaging.html#theme_install"><span>here</span></a>.</p><p>The <code>odoc</code> theme used for odoc API documentation and manuals can be changed via the <code>odoc-theme</code> command:</p><pre>odig odoc-theme list            # List available themes
odig odoc-theme default         # Show the default theme name</pre><p>The default theme is used and restored whenever a documentation generation action occurs either through <code>odig doc</code> or <code>odig odoc</code>. It is defined in order: on the command line via the <code>--odoc-theme</code> option, in the <code>ODIG_ODOC_THEME</code> environment variable or in the <code>~/.config/odig/odoc-theme</code> file.</p><p>The theme can be set on the current documentation set via the <code>set</code> action:</p><pre>odig odoc-theme set odig.dark   # Use the theme odig.dark
odig odoc-theme set             # Use the default theme</pre><p>However whenever a documentation generation action occurs this restores the default theme. If you want to persist your choice, use the <code>--default</code> option when you <code>set</code> the theme; this writes the theme name to <code>~/.config/odig/odoc-theme</code>.</p><pre>odig odoc-theme set --default odig.dark # Use theme and set as default</pre><h2 id="publish"><a href="#publish" class="anchor"></a>Publishing odoc documentation sets</h2><p>In general the self-contained bundle of generated HTML files is available in:</p><pre>$(odig cache path)/html</pre><p>The following describes one possible workflow to publish the documentation for a set of packages.</p><p>Write an <code>intro.mld</code> file that briefly documents the purpose of the documentation set, it will be used as a preamble on the package list page. Continue with:</p><pre>opam switch create .
opam install odig PKG...
odig odoc-theme set --default $MYTHEME
odig odoc -v --index-title='My docset' --index-intro=intro.mld \
  --no-pkg-deps PKG...
ln -s $(odig cache path)/html /var/www/doc</pre><p>The odig package also installs the <code>gh-pages-amend</code> tool that helps with publishing a documentation set on GitHub for the current git repository:</p><pre>gh-pages-amend $(odig cache path)/html doc</pre><p>by default this fetches the <code>gh-pages</code> on the <code>origin</code> remote, checks it out, replaces the directory <code>doc</code> by the contents of <code>$(odig cache
path)/html</code> and pushes it back. See <code>gh-pages-amend --help</code> for more information.</p></div></body></html>