<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Console (brr.Brr.Console)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../index.html">brr</a> &#x00BB; <a href="../index.html">Brr</a> &#x00BB; Console</nav><header class="odoc-preamble"><h1>Module <code><span>Brr.Console</span></code></h1><p>Browser console.</p><p>See <a href="https://developer.mozilla.org/en-US/docs/Web/API/console"><code>Console</code></a>. Take a few minutes to <a href="#val-log">understand this</a>.</p></header><nav class="odoc-toc"><ul><li><a href="#log_funs">Log functions</a></li><li><a href="#result"><code>Result</code> logging</a></li><li><a href="#logging">Levelled logging</a></li><li><a href="#assert_dump">Asserting and dumping</a></li><li><a href="#grouping">Grouping</a></li><li><a href="#count">Counting</a></li><li><a href="#timing">Timing</a></li><li><a href="#profiling">Profiling</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for <a href="https://developer.mozilla.org/en-US/docs/Web/API/console"><code>console</code></a> objects. See <a href="../G/index.html#val-console"><code>G.console</code></a> for the global console object.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>get ()</code> is the console object on which the functions below act. Initially this is <a href="../G/index.html#val-console"><code>G.console</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set" class="anchored"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set o</code> sets the console object to <code>o</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear" class="anchored"><a href="#val-clear" class="anchor"></a><code><span><span class="keyword">val</span> clear : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>clear ()</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/clear">clears</a> the console.</p></div></div><h2 id="log_funs"><a href="#log_funs" class="anchor"></a>Log functions</h2><div class="odoc-spec"><div class="spec type" id="type-msg" class="anchored"><a href="#type-msg" class="anchor"></a><code><span><span class="keyword">type</span> msg</span><span> = </span></code><table><tr id="type-msg.[]" class="anchored"><td class="def variant constructor"><a href="#type-msg.[]" class="anchor"></a><code><span>| </span><span><span class="constructor">[]</span> : <a href="#type-msg">msg</a></span></code></td></tr><tr id="type-msg.::" class="anchored"><td class="def variant constructor"><a href="#type-msg.::" class="anchor"></a><code><span>| </span><span><span class="constructor">::</span> : <span class="type-var">'a</span> * <a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span> <a href="#type-msg">msg</a></span></code></td></tr></table></div><div class="spec-doc"><p>The type for log messages.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-msgr" class="anchored"><a href="#type-msgr" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a msgr</span></span><span> = <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-msg">msg</a></span></code></div><div class="spec-doc"><p>The type for functions turning values of type <code>'a</code> into log messages.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-msg" class="anchored"><a href="#val-msg" class="anchor"></a><code><span><span class="keyword">val</span> msg : <span><span class="type-var">'a</span> <a href="#type-msgr">msgr</a></span></span></code></div><div class="spec-doc"><p><code>msg v</code> is <code>[v]</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-log" class="anchored"><a href="#type-log" class="anchor"></a><code><span><span class="keyword">type</span> log</span><span> = <span><a href="#type-msg">msg</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>The type for log functions.</p><p>Log messages rebind OCaml's list syntax. This allows to write heterogeneous logging statements concisely.</p><pre><code>let () = Console.(log [1; 2.; true; Jv.true'; str &quot;üê´&quot;; G.navigator])</code></pre><p>The console logs JavaScript values. For OCaml values this means that their <code>js_of_ocaml</code> representation is logged; see the <a href="../../ffi_manual.html">FFI manual</a> for details. Most OCaml values behind <code>Brr</code> types are however direct JavaScript values and logging them as is will be valuable. For other values you can use the <a href="#val-str"><code>str</code></a> function which invokes the JavaScript <code>toString</code> method on the value. It works on OCaml strings and is mostly equivalent and shorter than calling <a href="../../Jstr/index.html#val-v"><code>Jstr.v</code></a> before logging them.</p><p>In the JavaScript <code>console</code> API, if the first argument is a JavaScript string it can have <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console#Using_string_substitutions">formatting specifications</a>. Just remember this should be a JavaScript string, so wrap OCaml literals by <a href="#val-str"><code>str</code></a> or <a href="../../Jstr/index.html#val-v"><code>Jstr.v</code></a>:</p><pre><code>let () = Console.(log [str &quot;This is:\n%o\n the navigator&quot;; G.navigator])</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-str" class="anchored"><a href="#val-str" class="anchor"></a><code><span><span class="keyword">val</span> str : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>str v</code> is the result of invoking the JavaScript <code>toString</code> method on the representation of <code>v</code>. If <code>v</code> is <a href="../../Jv/index.html#val-null"><code>Jv.null</code></a> and <a href="../../Jv/index.html#val-undefined"><code>Jv.undefined</code></a> a string representing them is directly returned.</p></div></div><h2 id="result"><a href="#result" class="anchor"></a><code>Result</code> logging</h2><div class="odoc-spec"><div class="spec value" id="val-log_result" class="anchored"><a href="#val-log_result" class="anchor"></a><code><span><span class="keyword">val</span> log_result : <span>?ok:<span><span class="type-var">'a</span> <a href="#type-msgr">msgr</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?error:<span><span class="type-var">'b</span> <a href="#type-msgr">msgr</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,¬†<span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">result</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>,¬†<span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div></div><p><code>log_result ~ok ~error r</code> is <code>r</code> but logs <code>r</code> using <a href="#val-log"><code>log</code></a> and <code>ok</code> to format <code>Ok v</code> and <a href="#val-error"><code>error</code></a> and <code>error</code> for <code>Error
      e</code>. <code>ok</code> defaults to <code>[v]</code> and <code>error</code> to <code>[str e]</code>.</p><div class="odoc-spec"><div class="spec value" id="val-log_if_error" class="anchored"><a href="#val-log_if_error" class="anchor"></a><code><span><span class="keyword">val</span> log_if_error : <span>?l:<a href="#type-log">log</a> <span class="arrow">&#45;&gt;</span></span> <span>?error_msg:<span><span class="type-var">'b</span> <a href="#type-msgr">msgr</a></span> <span class="arrow">&#45;&gt;</span></span> <span>use:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,¬†<span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">result</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>log_if_error ~l ~error_msg ~use r</code> is <code>v</code> if <code>r</code> is <code>Ok v</code> and <code>use</code> if <code>r</code> is <code>Error e</code>. In this case <code>e</code> is logged with <code>l</code> (defaults to <a href="#val-error"><code>error</code></a>) and <code>error_msg</code> (defaults to <code>str e</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-log_if_error'" class="anchored"><a href="#val-log_if_error'" class="anchor"></a><code><span><span class="keyword">val</span> log_if_error' : <span>?l:<a href="#type-log">log</a> <span class="arrow">&#45;&gt;</span></span> <span>?error_msg:<span><span class="type-var">'b</span> <a href="#type-msgr">msgr</a></span> <span class="arrow">&#45;&gt;</span></span> <span>use:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,¬†<span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">result</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>,¬†<span class="type-var">'b</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>log_if_error'</code> is <a href="#val-log_if_error"><code>log_if_error</code></a> wrapped by <code>Result</code>.ok.</p></div></div><h2 id="logging"><a href="#logging" class="anchor"></a>Levelled logging</h2><div class="odoc-spec"><div class="spec value" id="val-log" class="anchored"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>log m</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/log">logs</a> <code>m</code> with no specific level.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-trace" class="anchored"><a href="#val-trace" class="anchor"></a><code><span><span class="keyword">val</span> trace : <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>trace m</code> logs <code>m</code> with no specific level but with a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/trace">stack trace</a>, like <a href="#val-error"><code>error</code></a> and <a href="#val-warn"><code>warn</code></a> do.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-error" class="anchored"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>error m</code> logs <code>m</code> with level <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/error">error</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-warn" class="anchored"><a href="#val-warn" class="anchor"></a><code><span><span class="keyword">val</span> warn : <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>warn m</code> logs <code>m</code> with level <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/warn">warn</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>warn m</code> logs <code>m</code> with level <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/info">info</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-debug" class="anchored"><a href="#val-debug" class="anchor"></a><code><span><span class="keyword">val</span> debug : <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>debug m</code> logs <code>m</code> with level <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/debug">debug</a>.</p></div></div><h2 id="assert_dump"><a href="#assert_dump" class="anchor"></a>Asserting and dumping</h2><div class="odoc-spec"><div class="spec value" id="val-assert'" class="anchored"><a href="#val-assert'" class="anchor"></a><code><span><span class="keyword">val</span> assert' : <span>bool <span class="arrow">&#45;&gt;</span></span> <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>assert' c m</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/assert">asserts</a> <code>c</code> and logs <code>m</code> with a stack trace iff <code>c</code> is <code>false</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dir" class="anchored"><a href="#val-dir" class="anchor"></a><code><span><span class="keyword">val</span> dir : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>dir o</code> logs a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/dir">listing</a> of the properties of the object <code>o</code> ‚Äì <a href="https://stackoverflow.com/a/11954537">this</a> explains the difference with <code>Console.(log [o])</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-table" class="anchored"><a href="#val-table" class="anchor"></a><code><span><span class="keyword">val</span> table : <span>?cols:<span><a href="../../Jstr/index.html#type-t">Jstr.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>table v</code> outputs <code>v</code> as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/table">tabular data</a>. If <code>cols</code> is specified only the specified properties are printed.</p></div></div><h2 id="grouping"><a href="#grouping" class="anchor"></a>Grouping</h2><div class="odoc-spec"><div class="spec value" id="val-group" class="anchored"><a href="#val-group" class="anchor"></a><code><span><span class="keyword">val</span> group : <span>?closed:bool <span class="arrow">&#45;&gt;</span></span> <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>group ~closed msg</code> logs <code>msg</code> and pushes a new inline <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/group">group</a> in the console. This indents messages until <a href="#val-group_end"><code>group_end</code></a> is called. If <code>closed</code> is <code>true</code> (defaults to <code>false</code>) the group's content is hidden behind a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/groupCollapsed">disclosure button</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-group_end" class="anchored"><a href="#val-group_end" class="anchor"></a><code><span><span class="keyword">val</span> group_end : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>group_end ()</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/groupEnd">pops</a> the last inline group.</p></div></div><h2 id="count"><a href="#count" class="anchor"></a>Counting</h2><div class="odoc-spec"><div class="spec value" id="val-count" class="anchored"><a href="#val-count" class="anchor"></a><code><span><span class="keyword">val</span> count : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>count label</code> logs <code>label</code> with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/count">number of times</a> <code>count label</code> was called.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-count_reset" class="anchored"><a href="#val-count_reset" class="anchor"></a><code><span><span class="keyword">val</span> count_reset : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>count_reset label</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/countReset">resets</a> the counter for <code>count label</code>.</p></div></div><h2 id="timing"><a href="#timing" class="anchor"></a>Timing</h2><div class="odoc-spec"><div class="spec value" id="val-time" class="anchored"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>time label</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/time">starts</a> a timer named <code>label</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time_log" class="anchored"><a href="#val-time_log" class="anchor"></a><code><span><span class="keyword">val</span> time_log : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-log">log</a></span></code></div><div class="spec-doc"><p><code>time_log label msg</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/timeLog">reports</a> the timer value of <code>label</code> with <code>msg</code> appended to the report.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time_end" class="anchored"><a href="#val-time_end" class="anchor"></a><code><span><span class="keyword">val</span> time_end : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>time_end label</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/timeEnd">ends</a> the timer named <code>label</code>.</p></div></div><h2 id="profiling"><a href="#profiling" class="anchor"></a>Profiling</h2><div class="odoc-spec"><div class="spec value" id="val-profile" class="anchored"><a href="#val-profile" class="anchor"></a><code><span><span class="keyword">val</span> profile : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>profile label</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/profile">starts</a> a new profile labelled <code>label</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-profile_end" class="anchored"><a href="#val-profile_end" class="anchor"></a><code><span><span class="keyword">val</span> profile_end : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>profile_end label</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/profileEnd">ends</a> ends the new profile labelled <code>label</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time_stamp" class="anchored"><a href="#val-time_stamp" class="anchor"></a><code><span><span class="keyword">val</span> time_stamp : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>time_stamp label</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/timeStamp">adds</a> a marker labeled by <code>label</code> in the waterfall view.</p></div></div></div></body></html>