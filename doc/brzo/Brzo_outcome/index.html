<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Brzo_outcome (brzo.Brzo_outcome)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">brzo</a> &#x00BB; Brzo_outcome</nav><header class="odoc-preamble"><h1>Module <code><span>Brzo_outcome</span></code></h1><p>Outcomes</p></header><nav class="odoc-toc"><ul><li><a href="#steps">Outcome steps</a></li><li><a href="#outcomes">Outcomes</a></li><li><a href="#predefined_actions">Predefined actions</a></li></ul></nav><div class="odoc-content"><h2 id="steps"><a href="#steps" class="anchor"></a>Outcome steps</h2><div class="odoc-spec"><div class="spec type" id="type-build_dir_suff" class="anchored"><a href="#type-build_dir_suff" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a build_dir_suff</span></span><span> = <span><a href="../../b0/B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Brzo/Conf/index.html#type-t">Brzo.Conf.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p>The type for build directory suffix determination. <code>build_dir_suff
    m c dc</code> is a suffix added to the build directory name. It can be used if your outcome has multiple targets (see e.g. the OCaml domain) and you would like to be able to have them live in parallel in the build dir.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-artefact" class="anchored"><a href="#type-artefact" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a artefact</span></span><span> = <span><a href="../../b0/B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Brzo/Conf/index.html#type-t">Brzo.Conf.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>build_dir:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p>The type for outcome artefact path determination. <code>artefact m c dc
    ~build_dir</code> is the absolute path, contained in the domain specific <code>build_dir</code> to the outcome artefact (can be a directory).</p></div></div><div class="odoc-spec"><div class="spec type" id="type-build" class="anchored"><a href="#type-build" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a build</span></span><span> = <span><a href="../../b0/B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Brzo/Conf/index.html#type-t">Brzo.Conf.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>build_dir:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>artefact:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>srcs:<a href="../../b0/B00_fexts/index.html#type-map">B00_fexts.map</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p>The type for outcome artefact constructions. <code>build m c dc
    ~build_dir ~artefact ~srcs</code> builds <code>artefact</code> from <code>srcs</code> using <code>m</code>. <code>build_dir</code> is clean. <code>artefact</code> is the result of the <a href="#val-artefact"><code>artefact</code></a> function.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-action" class="anchored"><a href="#type-action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a action</span></span><span> = <span><a href="../../b0/B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Brzo/Conf/index.html#type-t">Brzo.Conf.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>build_dir:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>artefact:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../b0/B00_std/Os/Exit/index.html#type-t">B00_std.Os.Exit.t</a>, string)</span> <a href="../../ocaml/Stdlib/index.html#type-result">result</a></span>)</span> <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p>The type for outcome action. <code>action m c dc ~artefact</code> returns the action on <code>artefact</code> (already tested for existence and constructed by the outcome's <a href="#val-artefact"><code>artefact</code></a> function). When the function is called it is made sure that build was peformed, finished, and that it didn't error.</p></div></div><h2 id="outcomes"><a href="#outcomes" class="anchor"></a>Outcomes</h2><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>The type for outcomes with domain specific configuration of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-v" class="anchored"><a href="#val-v" class="anchor"></a><code><span><span class="keyword">val</span> v : <span>name:string <span class="arrow">&#45;&gt;</span></span> <span>doc:string <span class="arrow">&#45;&gt;</span></span> <span>?build_dir_suff:<span><span class="type-var">'a</span> <a href="#type-build_dir_suff">build_dir_suff</a></span> <span class="arrow">&#45;&gt;</span></span> <span>artefact:<span><span class="type-var">'a</span> <a href="#type-artefact">artefact</a></span> <span class="arrow">&#45;&gt;</span></span> <span>build:<span><span class="type-var">'a</span> <a href="#type-build">build</a></span>
<span class="arrow">&#45;&gt;</span></span> <span>action_has_args:bool <span class="arrow">&#45;&gt;</span></span> <span>action:<span><span class="type-var">'a</span> <a href="#type-action">action</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>v</code> defines an outcome. See the corresponding accessors for the semantics of arguments. <code>build_dir_suff</code> defaults to <code>fun _ _ _ k -&gt; k &quot;&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>name o</code> is the outcome name. Used in particular to define the command line option to select the outcome.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build_dir_suff" class="anchored"><a href="#val-build_dir_suff" class="anchor"></a><code><span><span class="keyword">val</span> build_dir_suff : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-build_dir_suff">build_dir_suff</a></span></span></code></div><div class="spec-doc"><p><code>build_dir_suff o</code> is <code>o</code>'s build directory suffix function.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-artefact" class="anchored"><a href="#val-artefact" class="anchor"></a><code><span><span class="keyword">val</span> artefact : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-artefact">artefact</a></span></span></code></div><div class="spec-doc"><p><code>artefact o</code> is <code>o</code>'s artefact determination function.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build" class="anchored"><a href="#val-build" class="anchor"></a><code><span><span class="keyword">val</span> build : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-build">build</a></span></span></code></div><div class="spec-doc"><p><code>build o</code> is <code>o</code>'s build function.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-action_has_args" class="anchored"><a href="#val-action_has_args" class="anchor"></a><code><span><span class="keyword">val</span> action_has_args : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>action_has_args o</code> is <code>true</code> iff only the outcome action supports cli args.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-action" class="anchored"><a href="#val-action" class="anchor"></a><code><span><span class="keyword">val</span> action : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-action">action</a></span></span></code></div><div class="spec-doc"><p><code>action o</code> is <code>o</code>'s action function.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pre_outcome" class="anchored"><a href="#val-pre_outcome" class="anchor"></a><code><span><span class="keyword">val</span> pre_outcome : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../Brzo/Pre_domain/index.html#type-outcome">Brzo.Pre_domain.outcome</a></span></code></div><div class="spec-doc"><p><code>pre_outcome o</code> is <code>o</code> as a pre-outcome.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_outcome" class="anchored"><a href="#val-with_outcome" class="anchor"></a><code><span><span class="keyword">val</span> with_outcome : <span>name:string <span class="arrow">&#45;&gt;</span></span> <span>doc:string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>with_outcome ~name ~doc o</code> is <code>o</code> with name and doc string respectively changed to <code>name</code> and <code>doc</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>get n os</code> is the outcome of <code>os</code> with name <code>n</code>.</p></div></div><h2 id="predefined_actions"><a href="#predefined_actions" class="anchor"></a>Predefined actions</h2><div class="odoc-spec"><div class="spec module" id="module-Action" class="anchored"><a href="#module-Action" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Action/index.html">Action</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Predefined actions.</p></div></div></div></body></html>