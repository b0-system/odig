<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dir (bos.Bos.OS.Dir)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">bos</a> &#x00BB; <a href="../../index.html">Bos</a> &#x00BB; <a href="../index.html">OS</a> &#x00BB; Dir</nav><h1>Module <code>OS.Dir</code></h1><p>Directory operations.</p><nav class="toc"><ul><li><a href="#dirops">Existence, creation, deletion and contents</a></li><li><a href="#user_current">User and current working directory</a></li><li><a href="#tmpdirs">Temporary directories</a></li><li><a href="#defaulttmpdir">Default temporary directory</a></li></ul></nav></header><section><header><h2 id="dirops"><a href="#dirops" class="anchor"></a>Existence, creation, deletion and contents</h2></header><dl><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val </span>exists : Fpath.t <span>&#45;&gt;</span> (bool, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>exists dir</code> is <code>true</code> if <code>dir</code> is a directory in the file system and <code>false</code> otherwise. Symbolic links are followed.</p></dd></dl><dl><dt class="spec value" id="val-must_exist"><a href="#val-must_exist" class="anchor"></a><code><span class="keyword">val </span>must_exist : Fpath.t <span>&#45;&gt;</span> (Fpath.t, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>must_exist dir</code> is <code>Ok dir</code> if <code>dir</code> is a directory in the file system and an error otherwise. Symbolic links are followed.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : ?&#8288;path:bool <span>&#45;&gt;</span> ?&#8288;mode:int <span>&#45;&gt;</span> Fpath.t <span>&#45;&gt;</span> (bool, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>create ~path ~mode dir</code> creates, if needed, the directory <code>dir</code> with file permission <code>mode</code> (defaults <code>0o755</code> readable and traversable by everyone, writeable by the user). If <code>path</code> is <code>true</code> (default) intermediate directories are created with the same <code>mode</code>, otherwise missing intermediate directories lead to an error. The result is <code>false</code> if <code>dir</code> already exists.</p><p><b>Note.</b> The mode of existing directories, including <code>dir</code> if this is the case is kept unchanged.</p></dd></dl><dl><dt class="spec value" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span class="keyword">val </span>delete : ?&#8288;must_exist:bool <span>&#45;&gt;</span> ?&#8288;recurse:bool <span>&#45;&gt;</span> Fpath.t <span>&#45;&gt;</span> (unit, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>delete ~must_exist ~recurse dir</code> deletes the directory <code>dir</code>. If <code>must_exist</code> is <code>true</code> (defaults to <code>false</code>) an error is returned if <code>dir</code> doesn't exist. If <code>recurse</code> is <code>true</code> (default to <code>false</code>) no error occurs if the directory is non-empty: its contents is recursively deleted first.</p></dd></dl><dl><dt class="spec value" id="val-contents"><a href="#val-contents" class="anchor"></a><code><span class="keyword">val </span>contents : ?&#8288;dotfiles:bool <span>&#45;&gt;</span> ?&#8288;rel:bool <span>&#45;&gt;</span> Fpath.t <span>&#45;&gt;</span> (Fpath.t list, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>contents ~dotfiles ~rel dir</code> is the list of directories and files in <code>dir</code>. If <code>rel</code> is <code>true</code> (defaults to <code>false</code>) the resulting paths are relative to <code>dir</code>, otherwise they have <code>dir</code> prepended. See also <a href="index.html#val-fold_contents"><code>fold_contents</code></a>. If <code>dotfiles</code> is <code>false</code> (default) elements that start with a <code>.</code> are omitted.</p></dd></dl><dl><dt class="spec value" id="val-fold_contents"><a href="#val-fold_contents" class="anchor"></a><code><span class="keyword">val </span>fold_contents : ?&#8288;err:<span class="type-var">'b</span> <a href="../Path/index.html#type-fold_error">Path.fold_error</a> <span>&#45;&gt;</span> ?&#8288;dotfiles:bool <span>&#45;&gt;</span> ?&#8288;elements:<a href="../Path/index.html#type-elements">Path.elements</a> <span>&#45;&gt;</span> ?&#8288;traverse:<a href="../Path/index.html#type-traverse">Path.traverse</a> <span>&#45;&gt;</span> (Fpath.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Fpath.t <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>contents_fold err dotfiles elements traverse f acc d</code> is:</p><pre><code class="ml">contents d &gt;&gt;= Path.fold err dotfiles elements traverse f acc</code></pre><p>For more details see <a href="../Path/index.html#fold"><span>Folding over file system hierarchies</span></a>.</p></dd></dl></section><section><header><h2 id="user_current"><a href="#user_current" class="anchor"></a>User and current working directory</h2></header><dl><dt class="spec value" id="val-user"><a href="#val-user" class="anchor"></a><code><span class="keyword">val </span>user : unit <span>&#45;&gt;</span> (Fpath.t, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>user ()</code> is the home directory of the user executing the process. Determined by consulting the <code>passwd</code> database with the user id of the process. If this fails or on Windows falls back to parse a path from the <code>HOME</code> environment variable.</p></dd></dl><dl><dt class="spec value" id="val-current"><a href="#val-current" class="anchor"></a><code><span class="keyword">val </span>current : unit <span>&#45;&gt;</span> (Fpath.t, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>current ()</code> is the current working directory. The resulting path is guaranteed to be absolute.</p></dd></dl><dl><dt class="spec value" id="val-set_current"><a href="#val-set_current" class="anchor"></a><code><span class="keyword">val </span>set_current : Fpath.t <span>&#45;&gt;</span> (unit, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>set_current dir</code> sets the current working directory to <code>dir</code>.</p></dd></dl><dl><dt class="spec value" id="val-with_current"><a href="#val-with_current" class="anchor"></a><code><span class="keyword">val </span>with_current : Fpath.t <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>with_current dir f v</code> is <code>f v</code> with the current working directory bound to <code>dir</code>. After the function returns the current working directory is back to its initial value.</p></dd></dl></section><section><header><h2 id="tmpdirs"><a href="#tmpdirs" class="anchor"></a>Temporary directories</h2></header><dl><dt class="spec type" id="type-tmp_name_pat"><a href="#type-tmp_name_pat" class="anchor"></a><code><span class="keyword">type </span>tmp_name_pat</code><code><span class="keyword"> = </span>(string <span>&#45;&gt;</span> string, Format.formatter, unit, string) Pervasives.format4</code></dt><dd><p>The type for temporary directory name patterns. The string format is replaced by random characters.</p></dd></dl><dl><dt class="spec value" id="val-tmp"><a href="#val-tmp" class="anchor"></a><code><span class="keyword">val </span>tmp : ?&#8288;mode:int <span>&#45;&gt;</span> ?&#8288;dir:Fpath.t <span>&#45;&gt;</span> <a href="index.html#type-tmp_name_pat">tmp_name_pat</a> <span>&#45;&gt;</span> (Fpath.t, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>tmp mode dir pat</code> is a new empty directory in <code>dir</code> (defaults to <a href="index.html#val-default_tmp"><code>Dir.default_tmp</code></a>) named according to <code>pat</code> and created with permissions <code>mode</code> (defaults to <code>0o700</code> only readable and writable by the user). The directory path and its content is deleted at the end of program execution using a <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.at_exit&quot;"><code>Pervasives</code>.at_exit</span> handler.</p></dd></dl><dl><dt class="spec value" id="val-with_tmp"><a href="#val-with_tmp" class="anchor"></a><code><span class="keyword">val </span>with_tmp : ?&#8288;mode:int <span>&#45;&gt;</span> ?&#8288;dir:Fpath.t <span>&#45;&gt;</span> <a href="index.html#type-tmp_name_pat">tmp_name_pat</a> <span>&#45;&gt;</span> (Fpath.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'e</span>) <a href="../index.html#type-result">result</a></code></dt><dd><p><code>with_tmp mode dir pat f v</code> is a new empty directory in <code>dir</code> (defaults to <a href="index.html#val-default_tmp"><code>Dir.default_tmp</code></a>) named according to <code>pat</code> and created with permissions <code>mode</code> (defaults to <code>0o700</code> only readable and writable by the user). Returns the value of <code>f
        tmpdir v</code> with <code>tmpdir</code> the directory path. After the function returns the directory path <code>tmpdir</code> and its content is deleted.</p></dd></dl></section><section><header><h2 id="defaulttmpdir"><a href="#defaulttmpdir" class="anchor"></a>Default temporary directory</h2></header><dl><dt class="spec value" id="val-default_tmp"><a href="#val-default_tmp" class="anchor"></a><code><span class="keyword">val </span>default_tmp : unit <span>&#45;&gt;</span> Fpath.t</code></dt><dd><p><code>default_tmp ()</code> is the directory used as a default value for creating <a href="../File/index.html#tmpfiles"><span>temporary files</span></a> and <a href="index.html#tmpdirs"><span>directories</span></a>. If <a href="index.html#val-set_default_tmp"><code>set_default_tmp</code></a> hasn't been called this is:</p><ul><li>On POSIX, the value of the <code>TMPDIR</code> environment variable or <code>Fpath.v &quot;/tmp&quot;</code> if the variable is not set or empty.</li><li>On Windows, the value of the <code>TEMP</code> environment variable or <span class="xref-unresolved" title="unresolved reference to &quot;Fpath.cur_dir&quot;"><code>Fpath</code>.cur_dir</span> if it is not set or empty</li></ul></dd></dl><dl><dt class="spec value" id="val-set_default_tmp"><a href="#val-set_default_tmp" class="anchor"></a><code><span class="keyword">val </span>set_default_tmp : Fpath.t <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_default_tmp p</code> sets the value returned by <a href="index.html#val-default_tmp"><code>default_tmp</code></a> to <code>p</code>.</p></dd></dl></section></div></body></html>