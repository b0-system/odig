<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamTypes (opam-format.OpamTypes)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">opam-format</a> &#x00BB; OpamTypes</nav><header class="odoc-preamble"><h1>Module <code><span>OpamTypes</span></code></h1><p>Definitions of many types used throughout</p></header><nav class="odoc-toc"><ul><li><a href="#filenames">Filenames</a></li><li><a href="#packages">Packages</a></li><li><a href="#variables">Variables</a></li><li><a href="#formulas">Formulas</a></li><li><a href="#repositories">Repositories</a></li><li><a href="#variable-based-filters">Variable-based filters</a></li><li><a href="#filtered-formulas-(to-express-conditional-dependencies)">Filtered formulas (to express conditional dependencies)</a></li><li><a href="#solver">Solver</a></li><li><a href="#command-line-arguments">Command line arguments</a></li><li><a href="#generic-command-line-definitions-with-filters">Generic command-line definitions with filters</a></li><li><a href="#switches">Switches</a></li><li><a href="#misc">Misc</a></li><li><a href="#repository-and-global-states">Repository and global states</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-success" class="anchored"><a href="#type-success" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a success</span></span><span> = </span><span>[ </span></code><table><tr id="type-success.Successful" class="anchored"><td class="def constructor"><a href="#type-success.Successful" class="anchor"></a><code><span>| </span></code><code><span>`Successful <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Error and continuation handling</p></div></div><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a error</span></span><span> = </span><span>[ </span></code><table><tr id="type-error.Error" class="anchored"><td class="def constructor"><a href="#type-error.Error" class="anchor"></a><code><span>| </span></code><code><span>`Error <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-error.Exception" class="anchored"><td class="def constructor"><a href="#type-error.Exception" class="anchor"></a><code><span>| </span></code><code><span>`Exception <span class="keyword">of</span> exn</span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-status" class="anchored"><a href="#type-status" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) status</span></span><span> = </span><span>[ </span></code><table><tr id="type-status.success" class="anchored"><td class="def type"><a href="#type-status.success" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-success">success</a></span></span></code></td></tr><tr id="type-status.error" class="anchored"><td class="def type"><a href="#type-status.error" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'b</span> <a href="#type-error">error</a></span></span></code></td></tr></table><code><span> ]</span></code></div></div><h3 id="filenames"><a href="#filenames" class="anchor"></a>Filenames</h3><div class="odoc-spec"><div class="spec type" id="type-basename" class="anchored"><a href="#type-basename" class="anchor"></a><code><span><span class="keyword">type</span> basename</span><span> = <a href="../../opam-core/OpamFilename/Base/index.html#type-t">OpamFilename.Base.t</a></span></code></div><div class="spec-doc"><p>Basenames</p></div></div><div class="odoc-spec"><div class="spec type" id="type-dirname" class="anchored"><a href="#type-dirname" class="anchor"></a><code><span><span class="keyword">type</span> dirname</span><span> = <a href="../../opam-core/OpamFilename/Dir/index.html#type-t">OpamFilename.Dir.t</a></span></code></div><div class="spec-doc"><p>Directory names (translated to absolute)</p></div></div><div class="odoc-spec"><div class="spec type" id="type-filename" class="anchored"><a href="#type-filename" class="anchor"></a><code><span><span class="keyword">type</span> filename</span><span> = <a href="../../opam-core/OpamFilename/index.html#type-t">OpamFilename.t</a></span></code></div><div class="spec-doc"><p>Filenames</p></div></div><div class="odoc-spec"><div class="spec type" id="type-filename_set" class="anchored"><a href="#type-filename_set" class="anchor"></a><code><span><span class="keyword">type</span> filename_set</span><span> = <a href="../../opam-core/OpamFilename/Set/index.html#type-t">OpamFilename.Set.t</a></span></code></div><div class="spec-doc"><p>Set of files</p></div></div><div class="odoc-spec"><div class="spec type" id="type-filename_map" class="anchored"><a href="#type-filename_map" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a filename_map</span></span><span> = <span><span class="type-var">'a</span> <a href="../../opam-core/OpamFilename/Map/index.html#type-t">OpamFilename.Map.t</a></span></span></code></div><div class="spec-doc"><p>Map of files</p></div></div><div class="odoc-spec"><div class="spec type" id="type-std_path" class="anchored"><a href="#type-std_path" class="anchor"></a><code><span><span class="keyword">type</span> std_path</span><span> = </span></code><table><tr id="type-std_path.Prefix" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Prefix" class="anchor"></a><code><span>| </span><span><span class="constructor">Prefix</span></span></code></td></tr><tr id="type-std_path.Lib" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Lib" class="anchor"></a><code><span>| </span><span><span class="constructor">Lib</span></span></code></td></tr><tr id="type-std_path.Bin" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Bin" class="anchor"></a><code><span>| </span><span><span class="constructor">Bin</span></span></code></td></tr><tr id="type-std_path.Sbin" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Sbin" class="anchor"></a><code><span>| </span><span><span class="constructor">Sbin</span></span></code></td></tr><tr id="type-std_path.Share" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Share" class="anchor"></a><code><span>| </span><span><span class="constructor">Share</span></span></code></td></tr><tr id="type-std_path.Doc" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Doc" class="anchor"></a><code><span>| </span><span><span class="constructor">Doc</span></span></code></td></tr><tr id="type-std_path.Etc" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Etc" class="anchor"></a><code><span>| </span><span><span class="constructor">Etc</span></span></code></td></tr><tr id="type-std_path.Man" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Man" class="anchor"></a><code><span>| </span><span><span class="constructor">Man</span></span></code></td></tr><tr id="type-std_path.Toplevel" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Toplevel" class="anchor"></a><code><span>| </span><span><span class="constructor">Toplevel</span></span></code></td></tr><tr id="type-std_path.Stublibs" class="anchored"><td class="def variant constructor"><a href="#type-std_path.Stublibs" class="anchor"></a><code><span>| </span><span><span class="constructor">Stublibs</span></span></code></td></tr></table></div><div class="spec-doc"><p>Predefined installation directories within a switch</p></div></div><div class="odoc-spec"><div class="spec type" id="type-download" class="anchored"><a href="#type-download" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a download</span></span><span> = </span></code><table><tr id="type-download.Up_to_date" class="anchored"><td class="def variant constructor"><a href="#type-download.Up_to_date" class="anchor"></a><code><span>| </span><span><span class="constructor">Up_to_date</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-download.Not_available" class="anchored"><td class="def variant constructor"><a href="#type-download.Not_available" class="anchor"></a><code><span>| </span><span><span class="constructor">Not_available</span> <span class="keyword">of</span> <span>string option</span> * string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Arguments are respectively the short and long version of an error message. The usage is: the first argument is displayed on normal mode (nothing if <code>None</code>), and the second one on verbose mode.</p><span class="comment-delim">*)</span></td></tr><tr id="type-download.Result" class="anchored"><td class="def variant constructor"><a href="#type-download.Result" class="anchor"></a><code><span>| </span><span><span class="constructor">Result</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr></table></div><div class="spec-doc"><p>Download result</p></div></div><h3 id="packages"><a href="#packages" class="anchor"></a>Packages</h3><div class="odoc-spec"><div class="spec type" id="type-package" class="anchored"><a href="#type-package" class="anchor"></a><code><span><span class="keyword">type</span> package</span><span> = <span class="keyword">private</span> <a href="../OpamPackage/index.html#type-t">OpamPackage.t</a></span><span> = </span><span>{</span></code><table><tr id="type-package.name" class="anchored"><td class="def record field"><a href="#type-package.name" class="anchor"></a><code><span>name : <a href="../OpamPackage/Name/index.html#type-t">OpamPackage.Name.t</a>;</span></code></td></tr><tr id="type-package.version" class="anchored"><td class="def record field"><a href="#type-package.version" class="anchor"></a><code><span>version : <a href="../OpamPackage/Version/index.html#type-t">OpamPackage.Version.t</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Packages are (<code>name</code> * <code>version</code>) tuple</p></div></div><div class="odoc-spec"><div class="spec type" id="type-package_set" class="anchored"><a href="#type-package_set" class="anchor"></a><code><span><span class="keyword">type</span> package_set</span><span> = <a href="../OpamPackage/Set/index.html#type-t">OpamPackage.Set.t</a></span></code></div><div class="spec-doc"><p>Set of packages</p></div></div><div class="odoc-spec"><div class="spec type" id="type-package_map" class="anchored"><a href="#type-package_map" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a package_map</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamPackage/Map/index.html#type-t">OpamPackage.Map.t</a></span></span></code></div><div class="spec-doc"><p>Map of packages</p></div></div><div class="odoc-spec"><div class="spec type" id="type-name" class="anchored"><a href="#type-name" class="anchor"></a><code><span><span class="keyword">type</span> name</span><span> = <a href="../OpamPackage/Name/index.html#type-t">OpamPackage.Name.t</a></span></code></div><div class="spec-doc"><p>Package names</p></div></div><div class="odoc-spec"><div class="spec type" id="type-name_set" class="anchored"><a href="#type-name_set" class="anchor"></a><code><span><span class="keyword">type</span> name_set</span><span> = <a href="../OpamPackage/Name/Set/index.html#type-t">OpamPackage.Name.Set.t</a></span></code></div><div class="spec-doc"><p>Set of package names</p></div></div><div class="odoc-spec"><div class="spec type" id="type-name_map" class="anchored"><a href="#type-name_map" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a name_map</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamPackage/Name/Map/index.html#type-t">OpamPackage.Name.Map.t</a></span></span></code></div><div class="spec-doc"><p>Map of package names</p></div></div><div class="odoc-spec"><div class="spec type" id="type-version" class="anchored"><a href="#type-version" class="anchor"></a><code><span><span class="keyword">type</span> version</span><span> = <a href="../OpamPackage/Version/index.html#type-t">OpamPackage.Version.t</a></span></code></div><div class="spec-doc"><p>Package versions</p></div></div><div class="odoc-spec"><div class="spec type" id="type-version_set" class="anchored"><a href="#type-version_set" class="anchor"></a><code><span><span class="keyword">type</span> version_set</span><span> = <a href="../OpamPackage/Version/Set/index.html#type-t">OpamPackage.Version.Set.t</a></span></code></div><div class="spec-doc"><p>Set of package versions</p></div></div><div class="odoc-spec"><div class="spec type" id="type-opam_version" class="anchored"><a href="#type-opam_version" class="anchor"></a><code><span><span class="keyword">type</span> opam_version</span><span> = <a href="../../opam-core/OpamVersion/index.html#type-t">OpamVersion.t</a></span></code></div><div class="spec-doc"><p>OPAM versions</p></div></div><h3 id="variables"><a href="#variables" class="anchor"></a>Variables</h3><div class="odoc-spec"><div class="spec type" id="type-variable" class="anchored"><a href="#type-variable" class="anchor"></a><code><span><span class="keyword">type</span> variable</span><span> = <a href="../OpamVariable/index.html#type-t">OpamVariable.t</a></span></code></div><div class="spec-doc"><p>Variables</p></div></div><div class="odoc-spec"><div class="spec type" id="type-full_variable" class="anchored"><a href="#type-full_variable" class="anchor"></a><code><span><span class="keyword">type</span> full_variable</span><span> = <a href="../OpamVariable/Full/index.html#type-t">OpamVariable.Full.t</a></span></code></div><div class="spec-doc"><p>Fully qualified variables (ie. with the name of sections/sub-sections they appear in)</p></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_contents" class="anchored"><a href="#type-variable_contents" class="anchor"></a><code><span><span class="keyword">type</span> variable_contents</span><span> = <a href="../OpamVariable/index.html#type-variable_contents">OpamVariable.variable_contents</a></span><span> = </span></code><table><tr id="type-variable_contents.B" class="anchored"><td class="def variant constructor"><a href="#type-variable_contents.B" class="anchor"></a><code><span>| </span><span><span class="constructor">B</span> <span class="keyword">of</span> bool</span></code></td></tr><tr id="type-variable_contents.S" class="anchored"><td class="def variant constructor"><a href="#type-variable_contents.S" class="anchor"></a><code><span>| </span><span><span class="constructor">S</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-variable_contents.L" class="anchored"><td class="def variant constructor"><a href="#type-variable_contents.L" class="anchor"></a><code><span>| </span><span><span class="constructor">L</span> <span class="keyword">of</span> <span>string list</span></span></code></td></tr></table></div><div class="spec-doc"><p>Content of user-defined variables</p></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_map" class="anchored"><a href="#type-variable_map" class="anchor"></a><code><span><span class="keyword">type</span> variable_map</span><span> = <span><a href="../OpamVariable/index.html#type-variable_contents">OpamVariable.variable_contents</a> <a href="../OpamVariable/Map/index.html#type-t">OpamVariable.Map.t</a></span></span></code></div><div class="spec-doc"><p>A map from variables to their contents (i.e an environment)</p></div></div><div class="odoc-spec"><div class="spec type" id="type-package_flag" class="anchored"><a href="#type-package_flag" class="anchor"></a><code><span><span class="keyword">type</span> package_flag</span><span> = </span></code><table><tr id="type-package_flag.Pkgflag_LightUninstall" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_LightUninstall" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_LightUninstall</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The package doesn't require downloading to uninstall</p><span class="comment-delim">*)</span></td></tr><tr id="type-package_flag.Pkgflag_Verbose" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_Verbose" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_Verbose</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The package's scripts output is to be displayed to the user</p><span class="comment-delim">*)</span></td></tr><tr id="type-package_flag.Pkgflag_Plugin" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_Plugin" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_Plugin</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The package is an opam plugin that will install a <code>opam-&lt;name&gt;</code> exec, and may be auto-installed when doing <code>opam &lt;name&gt;</code></p><span class="comment-delim">*)</span></td></tr><tr id="type-package_flag.Pkgflag_Compiler" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_Compiler" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_Compiler</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Package may be used for 'opam switch'</p><span class="comment-delim">*)</span></td></tr><tr id="type-package_flag.Pkgflag_Conf" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_Conf" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_Conf</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Virtual package: no source, no install or remove instructions, .install, but likely has depexts</p><span class="comment-delim">*)</span></td></tr><tr id="type-package_flag.Pkgflag_HiddenVersion" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_HiddenVersion" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_HiddenVersion</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>This version of the package will only be installed if strictly required</p><span class="comment-delim">*)</span></td></tr><tr id="type-package_flag.Pkgflag_Unknown" class="anchored"><td class="def variant constructor"><a href="#type-package_flag.Pkgflag_Unknown" class="anchor"></a><code><span>| </span><span><span class="constructor">Pkgflag_Unknown</span> <span class="keyword">of</span> string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Used for error reporting, otherwise ignored</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Opam package flags</p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-GenericPackage" class="anchored"><a href="#module-type-GenericPackage" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-GenericPackage/index.html">GenericPackage</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>At some point we want to abstract so that the same functions can be used over CUDF and OPAM packages</p></div></div><h3 id="formulas"><a href="#formulas" class="anchor"></a>Formulas</h3><div class="odoc-spec"><div class="spec type" id="type-generic_formula" class="anchored"><a href="#type-generic_formula" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a generic_formula</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamFormula/index.html#type-formula">OpamFormula.formula</a></span></span><span> = </span></code><table><tr id="type-generic_formula.Empty" class="anchored"><td class="def variant constructor"><a href="#type-generic_formula.Empty" class="anchor"></a><code><span>| </span><span><span class="constructor">Empty</span></span></code></td></tr><tr id="type-generic_formula.Atom" class="anchored"><td class="def variant constructor"><a href="#type-generic_formula.Atom" class="anchor"></a><code><span>| </span><span><span class="constructor">Atom</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-generic_formula.Block" class="anchored"><td class="def variant constructor"><a href="#type-generic_formula.Block" class="anchor"></a><code><span>| </span><span><span class="constructor">Block</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-generic_formula">generic_formula</a></span></span></code></td></tr><tr id="type-generic_formula.And" class="anchored"><td class="def variant constructor"><a href="#type-generic_formula.And" class="anchor"></a><code><span>| </span><span><span class="constructor">And</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-generic_formula">generic_formula</a></span> * <span><span class="type-var">'a</span> <a href="#type-generic_formula">generic_formula</a></span></span></code></td></tr><tr id="type-generic_formula.Or" class="anchored"><td class="def variant constructor"><a href="#type-generic_formula.Or" class="anchor"></a><code><span>| </span><span><span class="constructor">Or</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-generic_formula">generic_formula</a></span> * <span><span class="type-var">'a</span> <a href="#type-generic_formula">generic_formula</a></span></span></code></td></tr></table></div><div class="spec-doc"><p>A generic formula</p></div></div><div class="odoc-spec"><div class="spec type" id="type-atom" class="anchored"><a href="#type-atom" class="anchor"></a><code><span><span class="keyword">type</span> atom</span><span> = <a href="../OpamFormula/index.html#type-atom">OpamFormula.atom</a></span></code></div><div class="spec-doc"><p>Formula atoms</p></div></div><div class="odoc-spec"><div class="spec type" id="type-formula" class="anchored"><a href="#type-formula" class="anchor"></a><code><span><span class="keyword">type</span> formula</span><span> = <a href="../OpamFormula/index.html#type-t">OpamFormula.t</a></span></code></div><div class="spec-doc"><p>Formula over versionned packages</p></div></div><div class="odoc-spec"><div class="spec type" id="type-conjunction" class="anchored"><a href="#type-conjunction" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a conjunction</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamFormula/index.html#type-conjunction">OpamFormula.conjunction</a></span></span></code></div><div class="spec-doc"><p>AND formulat</p></div></div><div class="odoc-spec"><div class="spec type" id="type-disjunction" class="anchored"><a href="#type-disjunction" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a disjunction</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamFormula/index.html#type-disjunction">OpamFormula.disjunction</a></span></span></code></div><div class="spec-doc"><p>OR formulat</p></div></div><h3 id="repositories"><a href="#repositories" class="anchor"></a>Repositories</h3><div class="odoc-spec"><div class="spec type" id="type-repository_name" class="anchored"><a href="#type-repository_name" class="anchor"></a><code><span><span class="keyword">type</span> repository_name</span><span> = <a href="../OpamRepositoryName/index.html#type-t">OpamRepositoryName.t</a></span></code></div><div class="spec-doc"><p>Repository names</p></div></div><div class="odoc-spec"><div class="spec type" id="type-repository_name_map" class="anchored"><a href="#type-repository_name_map" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a repository_name_map</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamRepositoryName/Map/index.html#type-t">OpamRepositoryName.Map.t</a></span></span></code></div><div class="spec-doc"><p>Maps of repository names</p></div></div><div class="odoc-spec"><div class="spec type" id="type-url" class="anchored"><a href="#type-url" class="anchor"></a><code><span><span class="keyword">type</span> url</span><span> = <a href="../../opam-core/OpamUrl/index.html#type-t">OpamUrl.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-trust_anchors" class="anchored"><a href="#type-trust_anchors" class="anchor"></a><code><span><span class="keyword">type</span> trust_anchors</span><span> = </span><span>{</span></code><table><tr id="type-trust_anchors.quorum" class="anchored"><td class="def record field"><a href="#type-trust_anchors.quorum" class="anchor"></a><code><span>quorum : int;</span></code></td></tr><tr id="type-trust_anchors.fingerprints" class="anchored"><td class="def record field"><a href="#type-trust_anchors.fingerprints" class="anchor"></a><code><span>fingerprints : <span>string list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-repository" class="anchored"><a href="#type-repository" class="anchor"></a><code><span><span class="keyword">type</span> repository</span><span> = </span><span>{</span></code><table><tr id="type-repository.repo_name" class="anchored"><td class="def record field"><a href="#type-repository.repo_name" class="anchor"></a><code><span>repo_name : <a href="#type-repository_name">repository_name</a>;</span></code></td></tr><tr id="type-repository.repo_url" class="anchored"><td class="def record field"><a href="#type-repository.repo_url" class="anchor"></a><code><span>repo_url : <a href="#type-url">url</a>;</span></code></td></tr><tr id="type-repository.repo_trust" class="anchored"><td class="def record field"><a href="#type-repository.repo_trust" class="anchor"></a><code><span>repo_trust : <span><a href="#type-trust_anchors">trust_anchors</a> option</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Repositories</p></div></div><h3 id="variable-based-filters"><a href="#variable-based-filters" class="anchor"></a>Variable-based filters</h3><div class="odoc-spec"><div class="spec type" id="type-relop" class="anchored"><a href="#type-relop" class="anchor"></a><code><span><span class="keyword">type</span> relop</span><span> = <a href="../../opam-file-format/OpamParserTypes/FullPos/index.html#type-relop_kind">OpamParserTypes.FullPos.relop_kind</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-filter" class="anchored"><a href="#type-filter" class="anchor"></a><code><span><span class="keyword">type</span> filter</span><span> = </span></code><table><tr id="type-filter.FBool" class="anchored"><td class="def variant constructor"><a href="#type-filter.FBool" class="anchor"></a><code><span>| </span><span><span class="constructor">FBool</span> <span class="keyword">of</span> bool</span></code></td></tr><tr id="type-filter.FString" class="anchored"><td class="def variant constructor"><a href="#type-filter.FString" class="anchor"></a><code><span>| </span><span><span class="constructor">FString</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-filter.FIdent" class="anchored"><td class="def variant constructor"><a href="#type-filter.FIdent" class="anchor"></a><code><span>| </span><span><span class="constructor">FIdent</span> <span class="keyword">of</span> <span><span><a href="#type-name">name</a> option</span> list</span> * <a href="#type-variable">variable</a> * <span><span>(string * string)</span> option</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>packages (or None for self-ref through &quot;_&quot;), variable name, string converter (val_if_true, val_if_false_or_undef)</p><span class="comment-delim">*)</span></td></tr><tr id="type-filter.FOp" class="anchored"><td class="def variant constructor"><a href="#type-filter.FOp" class="anchor"></a><code><span>| </span><span><span class="constructor">FOp</span> <span class="keyword">of</span> <a href="#type-filter">filter</a> * <a href="#type-relop">relop</a> * <a href="#type-filter">filter</a></span></code></td></tr><tr id="type-filter.FAnd" class="anchored"><td class="def variant constructor"><a href="#type-filter.FAnd" class="anchor"></a><code><span>| </span><span><span class="constructor">FAnd</span> <span class="keyword">of</span> <a href="#type-filter">filter</a> * <a href="#type-filter">filter</a></span></code></td></tr><tr id="type-filter.FOr" class="anchored"><td class="def variant constructor"><a href="#type-filter.FOr" class="anchor"></a><code><span>| </span><span><span class="constructor">FOr</span> <span class="keyword">of</span> <a href="#type-filter">filter</a> * <a href="#type-filter">filter</a></span></code></td></tr><tr id="type-filter.FNot" class="anchored"><td class="def variant constructor"><a href="#type-filter.FNot" class="anchor"></a><code><span>| </span><span><span class="constructor">FNot</span> <span class="keyword">of</span> <a href="#type-filter">filter</a></span></code></td></tr><tr id="type-filter.FDefined" class="anchored"><td class="def variant constructor"><a href="#type-filter.FDefined" class="anchor"></a><code><span>| </span><span><span class="constructor">FDefined</span> <span class="keyword">of</span> <a href="#type-filter">filter</a></span></code></td></tr><tr id="type-filter.FUndef" class="anchored"><td class="def variant constructor"><a href="#type-filter.FUndef" class="anchor"></a><code><span>| </span><span><span class="constructor">FUndef</span> <span class="keyword">of</span> <a href="#type-filter">filter</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Returned by reduce functions when the filter could not be resolved to an atom (due to undefined variables or string expansions). The argument contains the partially reduced filter, where strings may still contain expansions (and are otherwise escaped). Used both for partial evaluation, and error messaging. Not allowed as an argument to other filters</p><span class="comment-delim">*)</span></td></tr></table></div></div><h3 id="filtered-formulas-(to-express-conditional-dependencies)"><a href="#filtered-formulas-(to-express-conditional-dependencies)" class="anchor"></a>Filtered formulas (to express conditional dependencies)</h3><p>These are first reduced to only the dependency-flag variables build, doc, dev, test defined in <code>Opam formulas</code></p><div class="odoc-spec"><div class="spec type" id="type-filter_or_constraint" class="anchored"><a href="#type-filter_or_constraint" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a filter_or_constraint</span></span><span> = </span></code><table><tr id="type-filter_or_constraint.Filter" class="anchored"><td class="def variant constructor"><a href="#type-filter_or_constraint.Filter" class="anchor"></a><code><span>| </span><span><span class="constructor">Filter</span> <span class="keyword">of</span> <a href="#type-filter">filter</a></span></code></td></tr><tr id="type-filter_or_constraint.Constraint" class="anchored"><td class="def variant constructor"><a href="#type-filter_or_constraint.Constraint" class="anchor"></a><code><span>| </span><span><span class="constructor">Constraint</span> <span class="keyword">of</span> <a href="#type-relop">relop</a> * <span class="type-var">'a</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-filtered_formula" class="anchored"><a href="#type-filtered_formula" class="anchor"></a><code><span><span class="keyword">type</span> filtered_formula</span><span> = <span><span>(<a href="#type-name">name</a> * <span><span><a href="#type-filter">filter</a> <a href="#type-filter_or_constraint">filter_or_constraint</a></span> <a href="../OpamFormula/index.html#type-formula">OpamFormula.formula</a></span>)</span> <a href="../OpamFormula/index.html#type-formula">OpamFormula.formula</a></span></span></code></div></div><h3 id="solver"><a href="#solver" class="anchor"></a>Solver</h3><div class="odoc-spec"><div class="spec type" id="type-atomic_action" class="anchored"><a href="#type-atomic_action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a atomic_action</span></span><span> = </span><span>[ </span></code><table><tr id="type-atomic_action.Remove" class="anchored"><td class="def constructor"><a href="#type-atomic_action.Remove" class="anchor"></a><code><span>| </span></code><code><span>`Remove <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-atomic_action.Install" class="anchored"><td class="def constructor"><a href="#type-atomic_action.Install" class="anchor"></a><code><span>| </span></code><code><span>`Install <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Used internally when computing sequences of actions</p></div></div><div class="odoc-spec"><div class="spec type" id="type-highlevel_action" class="anchored"><a href="#type-highlevel_action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a highlevel_action</span></span><span> = </span><span>[ </span></code><table><tr id="type-highlevel_action.atomic_action" class="anchored"><td class="def type"><a href="#type-highlevel_action.atomic_action" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-atomic_action">atomic_action</a></span></span></code></td></tr><tr id="type-highlevel_action.Change" class="anchored"><td class="def constructor"><a href="#type-highlevel_action.Change" class="anchor"></a><code><span>| </span></code><code><span>`Change <span class="keyword">of</span> <span>[ `Up <span>| `Down</span> ]</span> * <span class="type-var">'a</span> * <span class="type-var">'a</span></span></code></td></tr><tr id="type-highlevel_action.Reinstall" class="anchored"><td class="def constructor"><a href="#type-highlevel_action.Reinstall" class="anchor"></a><code><span>| </span></code><code><span>`Reinstall <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Used to compact the atomic actions and display to the user in a more meaningful way</p></div></div><div class="odoc-spec"><div class="spec type" id="type-inst_action" class="anchored"><a href="#type-inst_action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a inst_action</span></span><span> = </span><span>[ </span></code><table><tr id="type-inst_action.Install" class="anchored"><td class="def constructor"><a href="#type-inst_action.Install" class="anchor"></a><code><span>| </span></code><code><span>`Install <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-inst_action.Change" class="anchored"><td class="def constructor"><a href="#type-inst_action.Change" class="anchor"></a><code><span>| </span></code><code><span>`Change <span class="keyword">of</span> <span>[ `Up <span>| `Down</span> ]</span> * <span class="type-var">'a</span> * <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Sub-type of <code>highlevel_action</code> corresponding to an installed package that changed state or version</p></div></div><div class="odoc-spec"><div class="spec type" id="type-concrete_action" class="anchored"><a href="#type-concrete_action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a concrete_action</span></span><span> = </span><span>[ </span></code><table><tr id="type-concrete_action.atomic_action" class="anchored"><td class="def type"><a href="#type-concrete_action.atomic_action" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-atomic_action">atomic_action</a></span></span></code></td></tr><tr id="type-concrete_action.Build" class="anchored"><td class="def constructor"><a href="#type-concrete_action.Build" class="anchor"></a><code><span>| </span></code><code><span>`Build <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-concrete_action.Fetch" class="anchored"><td class="def constructor"><a href="#type-concrete_action.Fetch" class="anchor"></a><code><span>| </span></code><code><span>`Fetch <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Used when applying solutions, separates build from install</p></div></div><div class="odoc-spec"><div class="spec type" id="type-action" class="anchored"><a href="#type-action" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a action</span></span><span> = </span><span>[ </span></code><table><tr id="type-action.atomic_action" class="anchored"><td class="def type"><a href="#type-action.atomic_action" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-atomic_action">atomic_action</a></span></span></code></td></tr><tr id="type-action.highlevel_action" class="anchored"><td class="def type"><a href="#type-action.highlevel_action" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-highlevel_action">highlevel_action</a></span></span></code></td></tr><tr id="type-action.concrete_action" class="anchored"><td class="def type"><a href="#type-action.concrete_action" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-concrete_action">concrete_action</a></span></span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-cause" class="anchored"><a href="#type-cause" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a cause</span></span><span> = </span></code><table><tr id="type-cause.Use" class="anchored"><td class="def variant constructor"><a href="#type-cause.Use" class="anchor"></a><code><span>| </span><span><span class="constructor">Use</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> list</span></span></code></td></tr><tr id="type-cause.Required_by" class="anchored"><td class="def variant constructor"><a href="#type-cause.Required_by" class="anchor"></a><code><span>| </span><span><span class="constructor">Required_by</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> list</span></span></code></td></tr><tr id="type-cause.Conflicts_with" class="anchored"><td class="def variant constructor"><a href="#type-cause.Conflicts_with" class="anchor"></a><code><span>| </span><span><span class="constructor">Conflicts_with</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> list</span></span></code></td></tr><tr id="type-cause.Upstream_changes" class="anchored"><td class="def variant constructor"><a href="#type-cause.Upstream_changes" class="anchor"></a><code><span>| </span><span><span class="constructor">Upstream_changes</span></span></code></td></tr><tr id="type-cause.Requested" class="anchored"><td class="def variant constructor"><a href="#type-cause.Requested" class="anchor"></a><code><span>| </span><span><span class="constructor">Requested</span></span></code></td></tr><tr id="type-cause.Unknown" class="anchored"><td class="def variant constructor"><a href="#type-cause.Unknown" class="anchor"></a><code><span>| </span><span><span class="constructor">Unknown</span></span></code></td></tr></table></div><div class="spec-doc"><p>The possible causes of an action.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-actions_result" class="anchored"><a href="#type-actions_result" class="anchor"></a><code><span><span class="keyword">type</span> actions_result</span><span> = </span><span>{</span></code><table><tr id="type-actions_result.actions_successes" class="anchored"><td class="def record field"><a href="#type-actions_result.actions_successes" class="anchor"></a><code><span>actions_successes : <span><span><a href="#type-package">package</a> <a href="#type-action">action</a></span> list</span>;</span></code></td></tr><tr id="type-actions_result.actions_errors" class="anchored"><td class="def record field"><a href="#type-actions_result.actions_errors" class="anchor"></a><code><span>actions_errors : <span><span>(<span><a href="#type-package">package</a> <a href="#type-action">action</a></span> * exn)</span> list</span>;</span></code></td></tr><tr id="type-actions_result.actions_aborted" class="anchored"><td class="def record field"><a href="#type-actions_result.actions_aborted" class="anchor"></a><code><span>actions_aborted : <span><span><a href="#type-package">package</a> <a href="#type-action">action</a></span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Solver result</p></div></div><div class="odoc-spec"><div class="spec type" id="type-solution_result" class="anchored"><a href="#type-solution_result" class="anchor"></a><code><span><span class="keyword">type</span> solution_result</span><span> = </span></code><table><tr id="type-solution_result.Nothing_to_do" class="anchored"><td class="def variant constructor"><a href="#type-solution_result.Nothing_to_do" class="anchor"></a><code><span>| </span><span><span class="constructor">Nothing_to_do</span></span></code></td></tr><tr id="type-solution_result.OK" class="anchored"><td class="def variant constructor"><a href="#type-solution_result.OK" class="anchor"></a><code><span>| </span><span><span class="constructor">OK</span> <span class="keyword">of</span> <span><span><a href="#type-package">package</a> <a href="#type-action">action</a></span> list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>List of successful actions</p><span class="comment-delim">*)</span></td></tr><tr id="type-solution_result.Aborted" class="anchored"><td class="def variant constructor"><a href="#type-solution_result.Aborted" class="anchor"></a><code><span>| </span><span><span class="constructor">Aborted</span></span></code></td></tr><tr id="type-solution_result.Partial_error" class="anchored"><td class="def variant constructor"><a href="#type-solution_result.Partial_error" class="anchor"></a><code><span>| </span><span><span class="constructor">Partial_error</span> <span class="keyword">of</span> <a href="#type-actions_result">actions_result</a></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-result" class="anchored"><a href="#type-result" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) result</span></span><span> = </span></code><table><tr id="type-result.Success" class="anchored"><td class="def variant constructor"><a href="#type-result.Success" class="anchor"></a><code><span>| </span><span><span class="constructor">Success</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td></tr><tr id="type-result.Conflicts" class="anchored"><td class="def variant constructor"><a href="#type-result.Conflicts" class="anchor"></a><code><span>| </span><span><span class="constructor">Conflicts</span> <span class="keyword">of</span> <span class="type-var">'b</span></span></code></td></tr></table></div><div class="spec-doc"><p>Solver result</p></div></div><div class="odoc-spec"><div class="spec type" id="type-solver_criteria" class="anchored"><a href="#type-solver_criteria" class="anchor"></a><code><span><span class="keyword">type</span> solver_criteria</span><span> = </span><span>[ </span></code><table><tr id="type-solver_criteria.Default" class="anchored"><td class="def constructor"><a href="#type-solver_criteria.Default" class="anchor"></a><code><span>| </span></code><code><span>`Default</span></code></td></tr><tr id="type-solver_criteria.Upgrade" class="anchored"><td class="def constructor"><a href="#type-solver_criteria.Upgrade" class="anchor"></a><code><span>| </span></code><code><span>`Upgrade</span></code></td></tr><tr id="type-solver_criteria.Fixup" class="anchored"><td class="def constructor"><a href="#type-solver_criteria.Fixup" class="anchor"></a><code><span>| </span></code><code><span>`Fixup</span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-request" class="anchored"><a href="#type-request" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a request</span></span><span> = </span><span>{</span></code><table><tr id="type-request.criteria" class="anchored"><td class="def record field"><a href="#type-request.criteria" class="anchor"></a><code><span>criteria : <a href="#type-solver_criteria">solver_criteria</a>;</span></code></td></tr><tr id="type-request.wish_install" class="anchored"><td class="def record field"><a href="#type-request.wish_install" class="anchor"></a><code><span>wish_install : <span><span class="type-var">'a</span> <a href="#type-conjunction">conjunction</a></span>;</span></code></td></tr><tr id="type-request.wish_remove" class="anchored"><td class="def record field"><a href="#type-request.wish_remove" class="anchor"></a><code><span>wish_remove : <span><span class="type-var">'a</span> <a href="#type-conjunction">conjunction</a></span>;</span></code></td></tr><tr id="type-request.wish_upgrade" class="anchored"><td class="def record field"><a href="#type-request.wish_upgrade" class="anchor"></a><code><span>wish_upgrade : <span><span class="type-var">'a</span> <a href="#type-conjunction">conjunction</a></span>;</span></code></td></tr><tr id="type-request.extra_attributes" class="anchored"><td class="def record field"><a href="#type-request.extra_attributes" class="anchor"></a><code><span>extra_attributes : <span>string list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Solver request</p></div></div><div class="odoc-spec"><div class="spec type" id="type-user_action" class="anchored"><a href="#type-user_action" class="anchor"></a><code><span><span class="keyword">type</span> user_action</span><span> = </span></code><table><tr id="type-user_action.Query" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Query" class="anchor"></a><code><span>| </span><span><span class="constructor">Query</span></span></code></td></tr><tr id="type-user_action.Install" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Install" class="anchor"></a><code><span>| </span><span><span class="constructor">Install</span></span></code></td></tr><tr id="type-user_action.Upgrade" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Upgrade" class="anchor"></a><code><span>| </span><span><span class="constructor">Upgrade</span></span></code></td></tr><tr id="type-user_action.Reinstall" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Reinstall" class="anchor"></a><code><span>| </span><span><span class="constructor">Reinstall</span></span></code></td></tr><tr id="type-user_action.Remove" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Remove" class="anchor"></a><code><span>| </span><span><span class="constructor">Remove</span></span></code></td></tr><tr id="type-user_action.Switch" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Switch" class="anchor"></a><code><span>| </span><span><span class="constructor">Switch</span></span></code></td></tr><tr id="type-user_action.Import" class="anchored"><td class="def variant constructor"><a href="#type-user_action.Import" class="anchor"></a><code><span>| </span><span><span class="constructor">Import</span></span></code></td></tr></table></div><div class="spec-doc"><p>user request action</p></div></div><div class="odoc-spec"><div class="spec type" id="type-universe" class="anchored"><a href="#type-universe" class="anchor"></a><code><span><span class="keyword">type</span> universe</span><span> = </span><span>{</span></code><table><tr id="type-universe.u_packages" class="anchored"><td class="def record field"><a href="#type-universe.u_packages" class="anchor"></a><code><span>u_packages : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_installed" class="anchored"><td class="def record field"><a href="#type-universe.u_installed" class="anchor"></a><code><span>u_installed : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_available" class="anchored"><td class="def record field"><a href="#type-universe.u_available" class="anchor"></a><code><span>u_available : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_depends" class="anchored"><td class="def record field"><a href="#type-universe.u_depends" class="anchor"></a><code><span>u_depends : <span><a href="#type-filtered_formula">filtered_formula</a> <a href="#type-package_map">package_map</a></span>;</span></code></td></tr><tr id="type-universe.u_depopts" class="anchored"><td class="def record field"><a href="#type-universe.u_depopts" class="anchor"></a><code><span>u_depopts : <span><a href="#type-filtered_formula">filtered_formula</a> <a href="#type-package_map">package_map</a></span>;</span></code></td></tr><tr id="type-universe.u_conflicts" class="anchored"><td class="def record field"><a href="#type-universe.u_conflicts" class="anchor"></a><code><span>u_conflicts : <span><a href="#type-formula">formula</a> <a href="#type-package_map">package_map</a></span>;</span></code></td></tr><tr id="type-universe.u_action" class="anchored"><td class="def record field"><a href="#type-universe.u_action" class="anchor"></a><code><span>u_action : <a href="#type-user_action">user_action</a>;</span></code></td></tr><tr id="type-universe.u_installed_roots" class="anchored"><td class="def record field"><a href="#type-universe.u_installed_roots" class="anchor"></a><code><span>u_installed_roots : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_pinned" class="anchored"><td class="def record field"><a href="#type-universe.u_pinned" class="anchor"></a><code><span>u_pinned : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_base" class="anchored"><td class="def record field"><a href="#type-universe.u_base" class="anchor"></a><code><span>u_base : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_invariant" class="anchored"><td class="def record field"><a href="#type-universe.u_invariant" class="anchor"></a><code><span>u_invariant : <a href="#type-formula">formula</a>;</span></code></td></tr><tr id="type-universe.u_reinstall" class="anchored"><td class="def record field"><a href="#type-universe.u_reinstall" class="anchor"></a><code><span>u_reinstall : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-universe.u_attrs" class="anchored"><td class="def record field"><a href="#type-universe.u_attrs" class="anchor"></a><code><span>u_attrs : <span><span>(string * <a href="#type-package_set">package_set</a>)</span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Solver universe</p></div></div><h3 id="command-line-arguments"><a href="#command-line-arguments" class="anchor"></a>Command line arguments</h3><div class="odoc-spec"><div class="spec type" id="type-pin_kind" class="anchored"><a href="#type-pin_kind" class="anchor"></a><code><span><span class="keyword">type</span> pin_kind</span><span> = </span><span>[ </span></code><table><tr id="type-pin_kind.version" class="anchored"><td class="def constructor"><a href="#type-pin_kind.version" class="anchor"></a><code><span>| </span></code><code><span>`version</span></code></td></tr><tr id="type-pin_kind.OpamUrl.backend" class="anchored"><td class="def type"><a href="#type-pin_kind.OpamUrl.backend" class="anchor"></a><code><span>| </span></code><code><span><a href="../../opam-core/OpamUrl/index.html#type-backend">OpamUrl.backend</a></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Pin kind</p></div></div><div class="odoc-spec"><div class="spec type" id="type-shell" class="anchored"><a href="#type-shell" class="anchor"></a><code><span><span class="keyword">type</span> shell</span><span> = <a href="../../opam-core/OpamStd/Sys/index.html#type-shell">OpamStd.Sys.shell</a></span><span> = </span></code><table><tr id="type-shell.SH_sh" class="anchored"><td class="def variant constructor"><a href="#type-shell.SH_sh" class="anchor"></a><code><span>| </span><span><span class="constructor">SH_sh</span></span></code></td></tr><tr id="type-shell.SH_bash" class="anchored"><td class="def variant constructor"><a href="#type-shell.SH_bash" class="anchor"></a><code><span>| </span><span><span class="constructor">SH_bash</span></span></code></td></tr><tr id="type-shell.SH_zsh" class="anchored"><td class="def variant constructor"><a href="#type-shell.SH_zsh" class="anchor"></a><code><span>| </span><span><span class="constructor">SH_zsh</span></span></code></td></tr><tr id="type-shell.SH_csh" class="anchored"><td class="def variant constructor"><a href="#type-shell.SH_csh" class="anchor"></a><code><span>| </span><span><span class="constructor">SH_csh</span></span></code></td></tr><tr id="type-shell.SH_fish" class="anchored"><td class="def variant constructor"><a href="#type-shell.SH_fish" class="anchor"></a><code><span>| </span><span><span class="constructor">SH_fish</span></span></code></td></tr></table></div><div class="spec-doc"><p>Shell compatibility modes</p></div></div><h3 id="generic-command-line-definitions-with-filters"><a href="#generic-command-line-definitions-with-filters" class="anchor"></a>Generic command-line definitions with filters</h3><div class="odoc-spec"><div class="spec type" id="type-simple_arg" class="anchored"><a href="#type-simple_arg" class="anchor"></a><code><span><span class="keyword">type</span> simple_arg</span><span> = </span></code><table><tr id="type-simple_arg.CString" class="anchored"><td class="def variant constructor"><a href="#type-simple_arg.CString" class="anchor"></a><code><span>| </span><span><span class="constructor">CString</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-simple_arg.CIdent" class="anchored"><td class="def variant constructor"><a href="#type-simple_arg.CIdent" class="anchor"></a><code><span>| </span><span><span class="constructor">CIdent</span> <span class="keyword">of</span> string</span></code></td></tr></table></div><div class="spec-doc"><p>A command argument</p></div></div><div class="odoc-spec"><div class="spec type" id="type-arg" class="anchored"><a href="#type-arg" class="anchor"></a><code><span><span class="keyword">type</span> arg</span><span> = <a href="#type-simple_arg">simple_arg</a> * <span><a href="#type-filter">filter</a> option</span></span></code></div><div class="spec-doc"><p>Command argument</p></div></div><div class="odoc-spec"><div class="spec type" id="type-command" class="anchored"><a href="#type-command" class="anchor"></a><code><span><span class="keyword">type</span> command</span><span> = <span><a href="#type-arg">arg</a> list</span> * <span><a href="#type-filter">filter</a> option</span></span></code></div><div class="spec-doc"><p>Command</p></div></div><h3 id="switches"><a href="#switches" class="anchor"></a>Switches</h3><div class="odoc-spec"><div class="spec type" id="type-switch" class="anchored"><a href="#type-switch" class="anchor"></a><code><span><span class="keyword">type</span> switch</span><span> = <a href="../OpamSwitch/index.html#type-t">OpamSwitch.t</a></span></code></div><div class="spec-doc"><p>Compiler switches</p></div></div><div class="odoc-spec"><div class="spec type" id="type-switch_set" class="anchored"><a href="#type-switch_set" class="anchor"></a><code><span><span class="keyword">type</span> switch_set</span><span> = <a href="../OpamSwitch/Set/index.html#type-t">OpamSwitch.Set.t</a></span></code></div><div class="spec-doc"><p>Set of compiler switches</p></div></div><div class="odoc-spec"><div class="spec type" id="type-switch_map" class="anchored"><a href="#type-switch_map" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a switch_map</span></span><span> = <span><span class="type-var">'a</span> <a href="../OpamSwitch/Map/index.html#type-t">OpamSwitch.Map.t</a></span></span></code></div><div class="spec-doc"><p>Map of compile switches</p></div></div><div class="odoc-spec"><div class="spec type" id="type-switch_selections" class="anchored"><a href="#type-switch_selections" class="anchor"></a><code><span><span class="keyword">type</span> switch_selections</span><span> = </span><span>{</span></code><table><tr id="type-switch_selections.sel_installed" class="anchored"><td class="def record field"><a href="#type-switch_selections.sel_installed" class="anchor"></a><code><span>sel_installed : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-switch_selections.sel_roots" class="anchored"><td class="def record field"><a href="#type-switch_selections.sel_roots" class="anchor"></a><code><span>sel_roots : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-switch_selections.sel_compiler" class="anchored"><td class="def record field"><a href="#type-switch_selections.sel_compiler" class="anchor"></a><code><span>sel_compiler : <a href="#type-package_set">package_set</a>;</span></code></td></tr><tr id="type-switch_selections.sel_pinned" class="anchored"><td class="def record field"><a href="#type-switch_selections.sel_pinned" class="anchor"></a><code><span>sel_pinned : <a href="#type-package_set">package_set</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><h3 id="misc"><a href="#misc" class="anchor"></a>Misc</h3><div class="odoc-spec"><div class="spec type" id="type-lock" class="anchored"><a href="#type-lock" class="anchor"></a><code><span><span class="keyword">type</span> lock</span><span> = </span></code><table><tr id="type-lock.Read_lock" class="anchored"><td class="def variant constructor"><a href="#type-lock.Read_lock" class="anchor"></a><code><span>| </span><span><span class="constructor">Read_lock</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The function does not modify anything, but it needs the state not to change while it is running.</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock.Global_lock" class="anchored"><td class="def variant constructor"><a href="#type-lock.Global_lock" class="anchor"></a><code><span>| </span><span><span class="constructor">Global_lock</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Take the global lock, all subsequent calls to OPAM are blocked.</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock.Switch_lock" class="anchored"><td class="def variant constructor"><a href="#type-lock.Switch_lock" class="anchor"></a><code><span>| </span><span><span class="constructor">Switch_lock</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-switch">switch</a> * <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Take a global read lock and a switch lock. The first function is called with the read lock, then the second function is called with the returned switch write-locked.</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock.Global_with_switch_cont_lock" class="anchored"><td class="def variant constructor"><a href="#type-lock.Global_with_switch_cont_lock" class="anchor"></a><code><span>| </span><span><span class="constructor">Global_with_switch_cont_lock</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-switch">switch</a> * <span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Call the function in a global lock, then relax to a switch lock and call the function it returned</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The different kinds of locks</p></div></div><div class="odoc-spec"><div class="spec type" id="type-file_attribute" class="anchored"><a href="#type-file_attribute" class="anchor"></a><code><span><span class="keyword">type</span> file_attribute</span><span> = <a href="../../opam-core/OpamFilename/Attribute/index.html#type-t">OpamFilename.Attribute.t</a></span></code></div><div class="spec-doc"><p>A line in <i>urls.tx</i></p></div></div><div class="odoc-spec"><div class="spec type" id="type-file_attribute_set" class="anchored"><a href="#type-file_attribute_set" class="anchor"></a><code><span><span class="keyword">type</span> file_attribute_set</span><span> = <a href="../../opam-core/OpamFilename/Attribute/Set/index.html#type-t">OpamFilename.Attribute.Set.t</a></span></code></div><div class="spec-doc"><p>All the lines in <i>urls.txt</i></p></div></div><div class="odoc-spec"><div class="spec type" id="type-optional" class="anchored"><a href="#type-optional" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a optional</span></span><span> = </span><span>{</span></code><table><tr id="type-optional.c" class="anchored"><td class="def record field"><a href="#type-optional.c" class="anchor"></a><code><span>c : <span class="type-var">'a</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Contents</p><span class="comment-delim">*)</span></td></tr><tr id="type-optional.optional" class="anchored"><td class="def record field"><a href="#type-optional.optional" class="anchor"></a><code><span>optional : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Is the contents optional</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Optional contents</p></div></div><div class="odoc-spec"><div class="spec type" id="type-stats" class="anchored"><a href="#type-stats" class="anchor"></a><code><span><span class="keyword">type</span> stats</span><span> = </span><span>{</span></code><table><tr id="type-stats.s_install" class="anchored"><td class="def record field"><a href="#type-stats.s_install" class="anchor"></a><code><span>s_install : int;</span></code></td></tr><tr id="type-stats.s_reinstall" class="anchored"><td class="def record field"><a href="#type-stats.s_reinstall" class="anchor"></a><code><span>s_reinstall : int;</span></code></td></tr><tr id="type-stats.s_upgrade" class="anchored"><td class="def record field"><a href="#type-stats.s_upgrade" class="anchor"></a><code><span>s_upgrade : int;</span></code></td></tr><tr id="type-stats.s_downgrade" class="anchored"><td class="def record field"><a href="#type-stats.s_downgrade" class="anchor"></a><code><span>s_downgrade : int;</span></code></td></tr><tr id="type-stats.s_remove" class="anchored"><td class="def record field"><a href="#type-stats.s_remove" class="anchor"></a><code><span>s_remove : int;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Upgrade statistics</p></div></div><div class="odoc-spec"><div class="spec type" id="type-env" class="anchored"><a href="#type-env" class="anchor"></a><code><span><span class="keyword">type</span> env</span><span> = <span><span>(string * string * <span>string option</span>)</span> list</span></span></code></div><div class="spec-doc"><p>Environement variables: var name, value, optional comment</p></div></div><div class="odoc-spec"><div class="spec type" id="type-env_update" class="anchored"><a href="#type-env_update" class="anchor"></a><code><span><span class="keyword">type</span> env_update</span><span> = string * <a href="../../opam-file-format/OpamParserTypes/FullPos/index.html#type-env_update_op_kind">OpamParserTypes.FullPos.env_update_op_kind</a> * string * <span>string option</span></span></code></div><div class="spec-doc"><p>Environment updates</p><p>var, update_op, value, comment</p></div></div><div class="odoc-spec"><div class="spec type" id="type-tags" class="anchored"><a href="#type-tags" class="anchor"></a><code><span><span class="keyword">type</span> tags</span><span> = <span><a href="../../opam-core/OpamStd/String/Set/index.html#type-t">OpamStd.String.Set.t</a> <a href="../../opam-core/OpamStd/String/SetMap/index.html#type-t">OpamStd.String.SetMap.t</a></span></span></code></div><div class="spec-doc"><p>Tags</p></div></div><h3 id="repository-and-global-states"><a href="#repository-and-global-states" class="anchor"></a>Repository and global states</h3><div class="odoc-spec"><div class="spec type" id="type-checksums" class="anchored"><a href="#type-checksums" class="anchor"></a><code><span><span class="keyword">type</span> checksums</span><span> = <span>string list</span></span></code></div><div class="spec-doc"><p>Checksums</p></div></div><div class="odoc-spec"><div class="spec type" id="type-json" class="anchored"><a href="#type-json" class="anchor"></a><code><span><span class="keyword">type</span> json</span><span> = <a href="../../opam-core/OpamJson/index.html#type-t">OpamJson.t</a></span></code></div><div class="spec-doc"><p>JSON</p></div></div><div class="odoc-spec"><div class="spec type" id="type-sys_package" class="anchored"><a href="#type-sys_package" class="anchor"></a><code><span><span class="keyword">type</span> sys_package</span><span> = <a href="../OpamSysPkg/index.html#type-t">OpamSysPkg.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-sys_pkg_status" class="anchored"><a href="#type-sys_pkg_status" class="anchor"></a><code><span><span class="keyword">type</span> sys_pkg_status</span><span> = <a href="../OpamSysPkg/index.html#type-status">OpamSysPkg.status</a></span></code></div></div></div></body></html>