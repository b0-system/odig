<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ocb_stubblr_topkg (ocb-stubblr.Ocb_stubblr_topkg)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocb-stubblr</a> &#x00BB; Ocb_stubblr_topkg</nav><h1>Module <code>Ocb_stubblr_topkg</code></h1><p>Hook up <code>Ocb_stubblr</code> with <code>topkg</code>.</p><nav class="toc"><ul><li><a href="#activating-ocb-stubblr">Activating <code>ocb-stubblr</code></a></li><li><a href="#install-helpers">Install helpers</a></li><li><a href="#usage">Usage</a><ul><li><a href="#making-ocb-stubblr-available-from-myocamlbuild.ml">Making <code>ocb-stubblr</code> available from <code>myocamlbuild.ml</code></a></li><li><a href="#mirage">Mirage</a></li></ul></li></ul></nav></header><section><header><h2 id="activating-ocb-stubblr"><a href="#activating-ocb-stubblr" class="anchor"></a>Activating <code>ocb-stubblr</code></h2></header><dl><dt class="spec value" id="val-build_arg"><a href="#val-build_arg" class="anchor"></a><code><span class="keyword">val</span> build_arg : <a href="../../topkg/Topkg/Cmd/index.html#type-t">Topkg.Cmd.t</a></code></dt><dd><p><code>build_arg</code> is the command-line parameter that needs to be passed to <code>ocamlbuild</code> in order to access <code>Ocb_stubblr</code> inside <code>myocamlbuild.ml</code>.</p></dd></dl><dl><dt class="spec value" id="val-build_cmd"><a href="#val-build_cmd" class="anchor"></a><code><span class="keyword">val</span> build_cmd : <a href="../../topkg/Topkg/Conf/index.html#type-t">Topkg.Conf.t</a> <span>&#45;&gt;</span> <a href="../../topkg/Topkg/Conf/index.html#type-os">Topkg.Conf.os</a> <span>&#45;&gt;</span> <a href="../../topkg/Topkg/Cmd/index.html#type-t">Topkg.Cmd.t</a></code></dt><dd><p><code>build_cmd c os</code> is the default <span class="xref-unresolved" title="unresolved reference to &quot;Topkg.build_cmd&quot;"><a href="../../topkg/Topkg/index.html"><code>Topkg</code></a>.build_cmd</span> extended with <a href="index.html#val-build_arg"><span><code>build_arg</code></span></a>.</p></dd></dl><dl><dt class="spec value" id="val-cmd"><a href="#val-cmd" class="anchor"></a><code><span class="keyword">val</span> cmd : <a href="../../topkg/Topkg/Conf/index.html#type-t">Topkg.Conf.t</a> <span>&#45;&gt;</span> <a href="../../topkg/Topkg/Conf/index.html#type-os">Topkg.Conf.os</a> <span>&#45;&gt;</span> <a href="../../topkg/Topkg/index.html#type-fpath">Topkg.fpath</a> list <span>&#45;&gt;</span> unit <a href="../../topkg/Topkg/index.html#type-result">Topkg.result</a></code></dt><dd><p><code>cmd c os files</code> is a full invocation of <a href="index.html#val-build_cmd"><span><code>build_cmd</code></span></a>.</p></dd></dl></section><section><header><h2 id="install-helpers"><a href="#install-helpers" class="anchor"></a>Install helpers</h2></header><dl><dt class="spec value" id="val-mirage"><a href="#val-mirage" class="anchor"></a><code><span class="keyword">val</span> mirage : ?&#8288;xen:bool <span>&#45;&gt;</span> ?&#8288;fs:bool <span>&#45;&gt;</span> <a href="../../topkg/Topkg/index.html#type-fpath">Topkg.fpath</a> <span>&#45;&gt;</span> <a href="../../topkg/Topkg/Pkg/index.html#type-install">Topkg.Pkg.install</a></code></dt><dd><p><code>mirage ?xen ?fs clib</code> installs Mirage-specific <span class="xref-unresolved" title="unresolved reference to &quot;Ocb_stubblr.multilib&quot;"><span>multi-lib</span></span> variants of the given <code>.clib</code> file.</p><p><code>xen</code> enables <code>mirage-xen</code> target. Defaults to <code>false</code>.</p><p><code>fs</code> enables <code>mirage-freestanding</code> target. Defaults to <code>false</code>.</p></dd></dl></section><section><header><h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><p>In <code>pkg.ml</code>:</p></header><section><header><h3 id="making-ocb-stubblr-available-from-myocamlbuild.ml"><a href="#making-ocb-stubblr-available-from-myocamlbuild.ml" class="anchor"></a>Making <code>ocb-stubblr</code> available from <code>myocamlbuild.ml</code></h3><pre><code class="ml">#require &quot;ocb-stubblr.topkg&quot;

let build = Pkg.build ~cmd:Ocb_stubblr_topkg.cmd ()

let () = Pkg.describe ~build ...</code></pre></header></section><section><header><h3 id="mirage"><a href="#mirage" class="anchor"></a>Mirage</h3><pre><code class="ml">Pkg.describe ... @@ fun c -&gt;
  ...
  Ok [ ...; mirage ~xen ~fs &quot;path/to/libstubs.clib&quot;]</code></pre></header></section></section></div></body></html>