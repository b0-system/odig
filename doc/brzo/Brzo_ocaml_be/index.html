<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Brzo_ocaml_be (brzo.Brzo_ocaml_be)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">brzo</a> &#x00BB; Brzo_ocaml_be</nav><header class="odoc-preamble"><h1>Module <code><span>Brzo_ocaml_be</span></code></h1><p>OCaml domain best-effort helpers.</p></header><nav class="odoc-toc"><ul><li><a href="#resolver">Resolver helpers</a></li><li><a href="#suggest">Suggesting</a></li></ul></nav><div class="odoc-content"><h2 id="resolver"><a href="#resolver" class="anchor"></a>Resolver helpers</h2><div class="odoc-spec"><div class="spec type" id="type-ambs" class="anchored"><a href="#type-ambs" class="anchor"></a><code><span><span class="keyword">type</span> ambs</span><span> = </span><span>[ </span></code><table><tr id="type-ambs.Ambs" class="anchored"><td class="def constructor"><a href="#type-ambs.Ambs" class="anchor"></a><code><span>| </span></code><code><span>`Ambs <span class="keyword">of</span> <span><span>(<a href="../../b0/B00_ocaml/Mod/Name/index.html#type-t">B00_ocaml.Mod.Name.t</a> * <span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span>)</span> list</span></span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>The type for ambiguous external resolutions. The module name and the list of files that could match.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-resolve_intf_deps" class="anchored"><a href="#val-resolve_intf_deps" class="anchor"></a><code><span><span class="keyword">val</span> resolve_intf_deps : <span><a href="../Brzo_b0_ocaml/Mod_resolver/index.html#type-t">Brzo_b0_ocaml.Mod_resolver.t</a> <span class="arrow">&#45;&gt;</span></span> <span>local_mods:<span><a href="../../b0/B00_ocaml/Mod/Src/index.html#type-t">B00_ocaml.Mod.Src.t</a> <a href="../../b0/B00_std/String/Map/index.html#type-t">B00_ocaml.Mod.Name.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>in_dir:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../b0/B00_std/String/Set/index.html#type-t">B00_ocaml.Mod.Name.Set.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> * <span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> * <a href="../../b0/B00_std/String/Set/index.html#type-t">B00_ocaml.Mod.Name.Set.t</a> * <a href="#type-ambs">ambs</a>)</span> <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p><code>resolve_intf_deps</code> is like <a href="#val-resolve_impl_deps"><code>resolve_impl_deps</code></a> but for compiling and interface.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-resolve_impl_deps" class="anchored"><a href="#val-resolve_impl_deps" class="anchor"></a><code><span><span class="keyword">val</span> resolve_impl_deps : <span><a href="../Brzo_b0_ocaml/Mod_resolver/index.html#type-t">Brzo_b0_ocaml.Mod_resolver.t</a> <span class="arrow">&#45;&gt;</span></span> <span>code:<a href="../../b0/B00_ocaml/Conf/index.html#type-code">B00_ocaml.Conf.code</a> <span class="arrow">&#45;&gt;</span></span> <span>local_mods:<span><a href="../../b0/B00_ocaml/Mod/Src/index.html#type-t">B00_ocaml.Mod.Src.t</a> <a href="../../b0/B00_std/String/Map/index.html#type-t">B00_ocaml.Mod.Name.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>in_dir:<a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
<span><a href="../../b0/B00_std/String/Set/index.html#type-t">B00_ocaml.Mod.Name.Set.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> * <span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> * <a href="../../b0/B00_std/String/Set/index.html#type-t">B00_ocaml.Mod.Name.Set.t</a> * <a href="#type-ambs">ambs</a>)</span> <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p><code>resolve_comp_deps r ~code ~local_mods ~in_dir deps</code> resolve <code>deps</code> for compiling an implementation to <code>code</code> assuming local module <code>local_mods</code> are compiled in <code>in_dir</code>. This results in <code>local_objs, ext_objs, unresolved, amb</code> with:</p><ul><li><code>local_deps</code> are path to compilation objects that corresponds to <code>local_mods</code>.</li><li><code>ext_objs</code> are external compilatino objects as resolved by <code>r</code> and its constraints.</li><li><code>unresolved</code> are the elements of <code>deps</code> that couldn't be resolved.</li><li><code>amb</code> are the external resolutions that were ambiguous.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-handle_amb_deps" class="anchored"><a href="#val-handle_amb_deps" class="anchor"></a><code><span><span class="keyword">val</span> handle_amb_deps : <span><a href="../Brzo_b0_ocaml/Mod_resolver/index.html#type-t">Brzo_b0_ocaml.Mod_resolver.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../b0/B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unresolved:<a href="../../b0/B00_std/String/Set/index.html#type-t">B00_ocaml.Mod.Name.Set.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ambs">ambs</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p><code>handle_amb_deps file ~unresolved ambs</code> continues if <code>ambs</code> is empty and otherwise fails the fiber (* FIXME *) with help on how to restrict the resolver or getting unresolved dependencies. <code>file</code> is the file for which amibguities were reported.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-handle_miss_user_deps" class="anchored"><a href="#val-handle_miss_user_deps" class="anchor"></a><code><span><span class="keyword">val</span> handle_miss_user_deps : <span><a href="../Brzo_b0_ocaml/Mod_resolver/index.html#type-t">Brzo_b0_ocaml.Mod_resolver.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>[ <span>`Miss_deps of <span><a href="../Brzo_b0_ocaml/Mod_resolver/index.html#type-dep">Brzo_b0_ocaml.Mod_resolver.dep</a> list</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../b0/B00_std/Fut/index.html#type-t">B00_std.Fut.t</a></span></span></code></div><div class="spec-doc"><p><code>handle_miss_user_deps r miss k</code> continues with <code>k</code> if <code>miss</code> is empty and otherwise fails the Fut.t with help on how to try to get the missing dependencies.</p></div></div><h2 id="suggest"><a href="#suggest" class="anchor"></a>Suggesting</h2><div class="odoc-spec"><div class="spec value" id="val-suggest_pkgs_for_mod_name" class="anchored"><a href="#val-suggest_pkgs_for_mod_name" class="anchor"></a><code><span><span class="keyword">val</span> suggest_pkgs_for_mod_name : <span><a href="../../b0/B00_ocaml/Mod/Name/index.html#type-t">B00_ocaml.Mod.Name.t</a> <span class="arrow">&#45;&gt;</span></span> <span>pkgs:<span><span>(string * <span>string option</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
<span>[ <span>`Fuzzy_prefix_match of <span>string list</span></span> <span><span>| `Prefix_match</span> of string</span> <span>| `None</span> ]</span></span></code></div><div class="spec-doc"><p><code>suggest_package_for_mod_name m pkgs</code> does basically what it says.</p></div></div></div></body></html>