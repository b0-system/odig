<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>I (notty.Notty.I)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">notty</a> &#x00BB; <a href="../index.html">Notty</a> &#x00BB; I</nav><h1>Module <code>Notty.I</code></h1><p><code>I</code> is for image.</p><p>Construction and composition of images.</p><p>Consult the <a href="../index.html#basics"><span>basics</span></a> for an overview.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="../index.html#type-image">image</a></code></dt></dl><dl><dt class="spec value" id="val-height"><a href="#val-height" class="anchor"></a><code><span class="keyword">val </span>height : <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-width"><a href="#val-width" class="anchor"></a><code><span class="keyword">val </span>width : <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val </span>equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal t1 t2</code> is <code>true</code> iff <code>t1</code> and <code>t2</code> are constructed by the same term.</p><p><b>Note</b> This is a weak form of equality. Images that are not <code>equal</code> could still render the same.</p></dd></dl><section><header><h2 id="imgprims"><a href="#imgprims" class="anchor"></a>Primitives</h2></header><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val </span>empty : <a href="../index.html#type-image">image</a></code></dt><dd><p><code>empty</code> is a zero-sized image.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val </span>string : <a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>string attr s</code> is an image containing text <code>s</code>, styled with <code>attr</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>string</code> is not a valid UTF-8 sequence, or contains <a href="../index.html#ctrls"><span>control characters</span></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-uchars"><a href="#val-uchars" class="anchor"></a><code><span class="keyword">val </span>uchars : <a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> Uchar.t array <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>uchars attr us</code> is an image containing text <code>us</code>, styled with <code>attr</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>us</code> contains <a href="../index.html#ctrls"><span>control characters</span></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-char"><a href="#val-char" class="anchor"></a><code><span class="keyword">val </span>char : <a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> char <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>char attr c w h</code> is a <code>w * h</code> grid of <code>c</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>c</code> is a <a href="../index.html#ctrls"><span>control character</span></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-uchar"><a href="#val-uchar" class="anchor"></a><code><span class="keyword">val </span>uchar : <a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> Uchar.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>uchar attr u w h</code> is a <code>w * h</code> grid of <code>u</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>u</code> is a <a href="../index.html#ctrls"><span>control character</span></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-void"><a href="#val-void" class="anchor"></a><code><span class="keyword">val </span>void : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>void w h</code> is a <code>w * h</code> rectangle of transparent cells.</p><p><code>void</code> is magical: it has geometry, but no displayable content. This is different, for example, from the space character <code>U+0020</code>, which renders as a cell filled with the background color. This means that <code>void</code> interacts specially with <a href="index.html#val-(&lt;/&gt;)"><span>overlays</span></a>.</p><p><code>void 0 0 = empty</code>. <code>void</code> with only one dimension <code>0</code> acts as a spacing element in the other dimension. Negative size is treated as <code>0</code>.</p></dd></dl></section><section><header><h2 id="imgcomp"><a href="#imgcomp" class="anchor"></a>Image composition</h2><p>Three basic composition modes allow construction of more complex images from simpler ones.</p><p>Composition operators are left-associative and form a monoid with <code>void</code>.</p></header><dl><dt class="spec value" id="val-(&lt;|&gt;)"><a href="#val-(&lt;|&gt;)" class="anchor"></a><code><span class="keyword">val </span>(&lt;|&gt;) : <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>i1 &lt;|&gt; i2</code> is the horizontal combination of <code>i1</code> and <code>i2</code>.</p><p><code>width (i1 &lt;|&gt; i2) = width i1 + width i2</code> <code>height (i1 &lt;|&gt; i2) = max (height i1) (height i2)</code></p><p>Images are top-aligned. The missing region is implicitly filled with <a href="index.html#val-void"><span><code>void</code></span></a>.</p><pre>[x] &lt;|&gt; [y] = [xy]
        [y]   [.y]</pre><p>where <code>.</code> denotes <a href="index.html#val-void"><span><code>void</code></span></a>.</p></dd></dl><dl><dt class="spec value" id="val-(&lt;-&gt;)"><a href="#val-(&lt;-&gt;)" class="anchor"></a><code><span class="keyword">val </span>(&lt;-&gt;) : <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>i1 &lt;-&gt; i2</code> is the vertical combination of <code>i1</code> and <code>i2</code>.</p><p><code>width (i1 &lt;-&gt; i2) = max (width i1) (width i2)</code> <code>height (i1 &lt;-&gt; i2) = height i1 + height i2</code></p><p>Images are left-aligned. The missing region is implicitly filled with <a href="index.html#val-void"><span><code>void</code></span></a>.</p><pre>[xx] &lt;-&gt; [y] = [xx]
               [y.]</pre></dd></dl><dl><dt class="spec value" id="val-(&lt;/&gt;)"><a href="#val-(&lt;/&gt;)" class="anchor"></a><code><span class="keyword">val </span>(&lt;/&gt;) : <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>i1 &lt;/&gt; i2</code> is <code>i1</code> overlaid over <code>i2</code>.</p><p><code>width (i1 &lt;/&gt; i2) = max (width i1) (width i2)</code> <code>height (i1 &lt;/&gt; i2) = max (height i1) (height i2)</code></p><p>Images are top-left-aligned. In the region of their overlap, only the <a href="index.html#val-void"><span><code>void</code></span></a> cells of <code>i1</code> show fragments of <code>i2</code>.</p><pre>[x.x] &lt;/&gt; [yyyy] = [xyxy]</pre></dd></dl></section><section><header><h2 id="imgcrop"><a href="#imgcrop" class="anchor"></a>Cropping and padding</h2></header><dl><dt class="spec value" id="val-hcrop"><a href="#val-hcrop" class="anchor"></a><code><span class="keyword">val </span>hcrop : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>hcrop left right i</code> is <code>i</code> with <code>left</code> leftmost, and <code>right</code> rightmost columns missing. If <code>left + right &gt;= width i</code> the result is <code>empty</code>.</p><p>If either <code>left</code> or <code>right</code> is negative, instead of being cropped, the image is padded on that side.</p><p>For example:</p><ul><li><code>hcrop 0 1 [abc]</code> = <code>[ab]</code></li><li><code>hcrop 1 1 [abc]</code> = <code>[b]</code></li><li><code>hcrop (-1) 1 [abc]</code> = <code>void 1 1 &lt;|&gt; hcrop 0 1 [abc]</code> = <code>[.ab]</code></li><li><code>hcrop 2 2 [abc]</code> = <code>empty</code></li></ul></dd></dl><dl><dt class="spec value" id="val-vcrop"><a href="#val-vcrop" class="anchor"></a><code><span class="keyword">val </span>vcrop : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>vcrop top bottom i</code> is the vertical analogue to <a href="index.html#val-hcrop"><span><code>hcrop</code></span></a>.</p></dd></dl><dl><dt class="spec value" id="val-crop"><a href="#val-crop" class="anchor"></a><code><span class="keyword">val </span>crop : ?&#8288;l:int <span>&#45;&gt;</span> ?&#8288;r:int <span>&#45;&gt;</span> ?&#8288;t:int <span>&#45;&gt;</span> ?&#8288;b:int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>crop ~l:left ~r:right ~t:top ~b:bottom i</code> is <code>vcrop left right (hcrop top bottom) i</code>.</p><p>Missing arguments default to <code>0</code>.</p></dd></dl><dl><dt class="spec value" id="val-hpad"><a href="#val-hpad" class="anchor"></a><code><span class="keyword">val </span>hpad : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><a href="index.html#val-hcrop"><span><code>hcrop</code></span></a> with margins negated.</p></dd></dl><dl><dt class="spec value" id="val-vpad"><a href="#val-vpad" class="anchor"></a><code><span class="keyword">val </span>vpad : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><a href="index.html#val-vcrop"><span><code>vcrop</code></span></a> with margins negated.</p></dd></dl><dl><dt class="spec value" id="val-pad"><a href="#val-pad" class="anchor"></a><code><span class="keyword">val </span>pad : ?&#8288;l:int <span>&#45;&gt;</span> ?&#8288;r:int <span>&#45;&gt;</span> ?&#8288;t:int <span>&#45;&gt;</span> ?&#8288;b:int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><a href="index.html#val-crop"><span><code>crop</code></span></a> with margins negated.</p></dd></dl></section><section><header><h2 id="additional-combinators"><a href="#additional-combinators" class="anchor"></a>Additional combinators</h2></header><dl><dt class="spec value" id="val-hcat"><a href="#val-hcat" class="anchor"></a><code><span class="keyword">val </span>hcat : <a href="../index.html#type-image">image</a> list <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>hcat xs</code> horizontally concatenates <code>xs</code>. See <a href="index.html#val-(&lt;|&gt;)"><span>beside</span></a>.</p></dd></dl><dl><dt class="spec value" id="val-vcat"><a href="#val-vcat" class="anchor"></a><code><span class="keyword">val </span>vcat : <a href="../index.html#type-image">image</a> list <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>vcat xs</code> vertically concatenates <code>xs</code>. See <a href="index.html#val-(&lt;-&gt;)"><span>above</span></a>.</p></dd></dl><dl><dt class="spec value" id="val-zcat"><a href="#val-zcat" class="anchor"></a><code><span class="keyword">val </span>zcat : <a href="../index.html#type-image">image</a> list <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>zcat xs</code> overlays <code>xs</code>. See <a href="index.html#val-(&lt;/&gt;)"><span>over</span></a>.</p></dd></dl><dl><dt class="spec value" id="val-tabulate"><a href="#val-tabulate" class="anchor"></a><code><span class="keyword">val </span>tabulate : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a>) <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>tabulate m n f</code> is the grid of values <code>f x y</code> with <code>x = 0..m-1</code> and <code>y = 0..n-1</code>, where <code>x</code> grows to the right, and <code>y</code> growns down.</p><p><code>f a y</code> is to the left of <code>f b y</code> if <code>a &lt; b</code>, and <code>f x a</code> is above <code>f x b</code> if <code>a &lt; b</code>, but the exact alignment is unspecified if the various <code>f x y</code> have different dimensions.</p></dd></dl><dl><dt class="spec value" id="val-hsnap"><a href="#val-hsnap" class="anchor"></a><code><span class="keyword">val </span>hsnap : ?&#8288;align:[ `Left<span class="keyword"> | </span>`Middle<span class="keyword"> | </span>`Right ] <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>hsnap ~align w i</code> is an image of width strictly <code>w</code> obtained by either horizontally padding or cropping <code>i</code> and positioning it according to <code>~align</code>.</p><p><code>~align</code> defaults to <code>`Middle</code>.</p></dd></dl><dl><dt class="spec value" id="val-vsnap"><a href="#val-vsnap" class="anchor"></a><code><span class="keyword">val </span>vsnap : ?&#8288;align:[ `Top<span class="keyword"> | </span>`Middle<span class="keyword"> | </span>`Bottom ] <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <a href="../index.html#type-image">image</a></code></dt><dd><p><code>vsnap ~align h i</code> is an image of height strictly <code>h</code> obtained by either vertically padding or cropping <code>i</code> and positioning it according to <code>~align</code>.</p><p><code>~align</code> defaults to <code>`Middle</code>.</p></dd></dl></section><section><header><h2 id="format-interoperability"><a href="#format-interoperability" class="anchor"></a><code>Format</code> interoperability</h2></header><dl><dt class="spec value" id="val-strf"><a href="#val-strf" class="anchor"></a><code><span class="keyword">val </span>strf : ?&#8288;attr:<a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> ?&#8288;w:int <span>&#45;&gt;</span> (<span class="type-var">'a</span>, Format.formatter, unit, <a href="../index.html#type-image">image</a>) Pervasives.format4 <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>strf ?attr ?w:width format ...</code> pretty-prints like <code>Format.asprintf format ...</code>, but returns an <code>image</code>.</p><p><code>attr</code> is the (outermost) attribute. Defaults to <a href="../A/index.html#val-empty"><code>A.empty</code></a>.</p><p><code>width</code> is used to set the margin on the formatter. This is only a hint, and does not guarantee the width of the result. Consult <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html#VALset_margin"><code>Format.set_margin</code></a> for details. Defaults to an unspecified, large number.</p></dd></dl><dl><dt class="spec value" id="val-kstrf"><a href="#val-kstrf" class="anchor"></a><code><span class="keyword">val </span>kstrf : ?&#8288;attr:<a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> ?&#8288;w:int <span>&#45;&gt;</span> (<a href="../index.html#type-image">image</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> (<span class="type-var">'b</span>, Format.formatter, unit, <span class="type-var">'a</span>) Pervasives.format4 <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>kstrf ?attr ?w k format ...</code> is continuation-based <code>strf ?attr ?w format ...</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp_attr"><a href="#val-pp_attr" class="anchor"></a><code><span class="keyword">val </span>pp_attr : <a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> (Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_attr a f</code> is a pretty-printer like <code>f</code>, except its output is styled with <code>a</code>. This applies only outside of any styling <code>f</code> itself might embed.</p></dd></dl></section></div></body></html>