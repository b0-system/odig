<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatText (batteries.BatText)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">batteries</a> &#x00BB; BatText</nav><h1>Module <code>BatText</code></h1><p>Heavyweight strings (&quot;ropes&quot;)</p><p>This module implements ropes as described in Boehm, H., Atkinson, R., and Plass, M. 1995. Ropes: an alternative to strings. Softw. Pract. Exper. 25, 12 (Dec. 1995), 1315-1330.</p><p>Ropes are an alternative to strings which support efficient operations:</p><ul><li>determining the length of a rope in constant time</li><li>appending or prepending a small rope to an arbitrarily large one in amortized constant time</li><li>concat, substring, insert, remove operations in amortized logarithmic time</li><li>access to and modification of ropes in logarithmic time</li></ul><h6 id="functional-nature-and-persistence"><a href="#functional-nature-and-persistence" class="anchor"></a>Functional nature and persistence</h6><p>All operations are non-destructive: the original rope is never modified. When a new rope is returned as the result of an operation, it will share as much data as possible with its &quot;parent&quot;. For instance, if a rope of length <code>n</code> undergoes <code>m</code> operations (assume <code>n &gt;&gt; m</code>) like set, append or prepend, the modified rope will only require <code>O(m)</code> space in addition to that taken by the original one.</p><p>However, Rope is an amortized data structure, and its use in a persistent setting can easily degrade its amortized time bounds. It is thus mainly intended to be used ephemerally. In some cases, it is possible to use Rope persistently with the same amortized bounds by explicitly rebalancing ropes to be reused using <code>balance</code>. Special care must be taken to avoid calling <code>balance</code> too frequently; in the limit, calling <code>balance</code> after each modification would defeat the purpose of amortization.</p><h6 id="limitations"><a href="#limitations" class="anchor"></a>Limitations</h6><p>The length of ropes is limited to approximately 700 Mb on 32-bit architectures, 220 Gb on 64 bit architectures.</p><dl><dt>author</dt><dd>Mauricio Fernandez, Yoriyuki Yamagata, The Batteries Included Team</dd></dl><nav class="toc"><ul><li><a href="#creation-and-conversions">Creation and conversions</a></li><li><a href="#properties">Properties</a></li><li><a href="#operations">Operations</a></li><li><a href="#iteration">Iteration</a></li><li><a href="#finding">Finding</a></li><li><a href="#splitting-around">Splitting around</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code></dt><dd><p>The type of the rope.</p></dd></dl><dl><dt class="spec exception" id="exception-Out_of_bounds"><a href="#exception-Out_of_bounds" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Out_of_bounds</span></code></dt><dd><p>Raised when an operation violates the bounds of the rope.</p></dd></dl><dl><dt class="spec value" id="val-max_length"><a href="#val-max_length" class="anchor"></a><code><span class="keyword">val </span>max_length : int</code></dt><dd><p>Maximum length of the rope (number of UTF-8 characters).</p></dd></dl><section><header><h6 id="creation-and-conversions"><a href="#creation-and-conversions" class="anchor"></a>Creation and conversions</h6></header><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val </span>empty : <a href="index.html#type-t">t</a></code></dt><dd><p>The empty rope.</p></dd></dl><dl><dt class="spec value" id="val-of_latin1"><a href="#val-of_latin1" class="anchor"></a><code><span class="keyword">val </span>of_latin1 : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Constructs a unicode rope from a latin-1 string.</p></dd></dl><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val </span>of_string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_string s</code> returns a rope corresponding to the UTF-8 encoded string <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val </span>to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string t</code> returns a UTF-8 encoded string representing <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-of_uchar"><a href="#val-of_uchar" class="anchor"></a><code><span class="keyword">val </span>of_uchar : BatUChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_uchar c</code> returns a rope containing exactly character <code>c</code>.</p></dd></dl><dl><dt class="spec value" id="val-of_char"><a href="#val-of_char" class="anchor"></a><code><span class="keyword">val </span>of_char : char <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_char c</code> returns a rope containing exactly Latin-1 character <code>c</code>.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val </span>make : int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>make i c</code> returns a rope of length <code>i</code> consisting of <code>c</code> chars; it is similar to String.make</p></dd></dl><dl><dt class="spec value" id="val-join"><a href="#val-join" class="anchor"></a><code><span class="keyword">val </span>join : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <a href="index.html#val-concat"><code>concat</code></a></p></dd></dl><dl><dt class="spec value" id="val-explode"><a href="#val-explode" class="anchor"></a><code><span class="keyword">val </span>explode : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatUChar.t list</code></dt><dd><p><code>explode s</code> returns the list of characters in the rope <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-implode"><a href="#val-implode" class="anchor"></a><code><span class="keyword">val </span>implode : BatUChar.t list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>implode cs</code> returns a rope resulting from concatenating the characters in the list <code>cs</code>.</p></dd></dl></section><section><header><h6 id="properties"><a href="#properties" class="anchor"></a>Properties</h6></header><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val </span>is_empty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Returns whether the rope is empty or not.</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val </span>length : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the length of the rope (<code>O(1)</code>). This is number of UTF-8 characters.</p></dd></dl><dl><dt class="spec value" id="val-height"><a href="#val-height" class="anchor"></a><code><span class="keyword">val </span>height : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the height (depth) of the rope.</p></dd></dl><dl><dt class="spec value" id="val-balance"><a href="#val-balance" class="anchor"></a><code><span class="keyword">val </span>balance : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>balance r</code> returns a balanced copy of the <code>r</code> rope. Note that ropes are automatically rebalanced when their height exceeds a given threshold, but <code>balance</code> allows to invoke that operation explicity.</p></dd></dl></section><section><header><h6 id="operations"><a href="#operations" class="anchor"></a>Operations</h6></header><dl><dt class="spec value" id="val-append"><a href="#val-append" class="anchor"></a><code><span class="keyword">val </span>append : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>append r u</code> concatenates the <code>r</code> and <code>u</code> ropes. In general, it operates in <code>O(log(min n1 n2))</code> amortized time. Small ropes are treated specially and can be appended/prepended in amortized <code>O(1)</code> time.</p></dd></dl><dl><dt class="spec value" id="val-(^^^)"><a href="#val-(^^^)" class="anchor"></a><code><span class="keyword">val </span>(^^^) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>As <a href="index.html#val-append"><code>append</code></a></p></dd></dl><dl><dt class="spec value" id="val-append_char"><a href="#val-append_char" class="anchor"></a><code><span class="keyword">val </span>append_char : BatUChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>append_char c r</code> returns a new rope with the <code>c</code> character at the end in amortized <code>O(1)</code> time.</p></dd></dl><dl><dt class="spec value" id="val-prepend_char"><a href="#val-prepend_char" class="anchor"></a><code><span class="keyword">val </span>prepend_char : BatUChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>prepend_char c r</code> returns a new rope with the <code>c</code> character at the beginning in amortized <code>O(1)</code> time.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t</code></dt><dd><p><code>get r n</code> returns the (n+1)th character from the rope <code>r</code>; i.e. <code>get r 0</code> returns the first character. Operates in worst-case <code>O(log size)</code> time.</p><dl><dt>raises Out_of_bounds</dt><dd><p>if a character out of bounds is requested.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val </span>set : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>set r n c</code> returns a copy of rope <code>r</code> where the (n+1)th character has been set to <code>c</code>. See also <a href="index.html#val-get"><code>get</code></a>. Operates in worst-case <code>O(log size)</code> time.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val </span>sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>sub r m n</code> returns a sub-rope of <code>r</code> containing all characters whose indexes range from <code>m</code> to <code>m + n - 1</code> (included). Operates in worst-case <code>O(log size)</code> time.</p><dl><dt>raises Out_of_bounds</dt><dd><p>in the same cases as sub.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-insert"><a href="#val-insert" class="anchor"></a><code><span class="keyword">val </span>insert : int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>insert n r u</code> returns a copy of the <code>u</code> rope where <code>r</code> has been inserted between the characters with index <code>n</code> and <code>n + 1</code> in the original rope. The length of the new rope is <code>length u + length r</code>. Operates in amortized <code>O(log(size r) + log(size u))</code> time.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val </span>remove : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>remove m n r</code> returns the rope resulting from deleting the characters with indexes ranging from <code>m</code> to <code>m + n - 1</code> (included) from the original rope <code>r</code>. The length of the new rope is <code>length r - n</code>. Operates in amortized <code>O(log(size r))</code> time.</p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val </span>concat : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>concat sep sl</code> concatenates the list of ropes <code>sl</code>, inserting the separator rope <code>sep</code> between each.</p></dd></dl></section><section><header><h6 id="iteration"><a href="#iteration" class="anchor"></a>Iteration</h6></header><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val </span>iter : (BatUChar.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f r</code> applies <code>f</code> to all the characters in the <code>r</code> rope, in order.</p></dd></dl><dl><dt class="spec value" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span class="keyword">val </span>iteri : ?&#8288;base:int <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Operates like <code>iter</code>, but also passes the index of the character to the given function.</p></dd></dl><dl><dt class="spec value" id="val-range_iter"><a href="#val-range_iter" class="anchor"></a><code><span class="keyword">val </span>range_iter : (BatUChar.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>range_iter f m n r</code> applies <code>f</code> to all the characters whose indices <code>k</code> satisfy <code>m</code> &lt;= <code>k</code> &lt; <code>m + n</code>. It is thus equivalent to <code>iter f (sub m n r)</code>, but does not create an intermediary rope. <code>range_iter</code> operates in worst-case <code>O(n + log m)</code> time, which improves on the <code>O(n log m)</code> bound from an explicit loop using <code>get</code>.</p><dl><dt>raises Out_of_bounds</dt><dd><p>in the same cases as <code>sub</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-range_iteri"><a href="#val-range_iteri" class="anchor"></a><code><span class="keyword">val </span>range_iteri : (int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;base:int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>As <code>range_iter</code>, but passes base + index of the character in the subrope defined by next to arguments.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val </span>fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>Rope.fold f a r</code> computes <code> f (... (f (f a r0) r1)...) rN-1 </code> where <code>rn = Rope.get n r </code> and <code>N = length r</code>.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val </span>init : int <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> BatUChar.t) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>init l f</code> returns the rope of length <code>l</code> with the chars f 0 , f 1 , f 2 ... f (l-1).</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val </span>map : (BatUChar.t <span>&#45;&gt;</span> BatUChar.t) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f s</code> returns a rope where all characters <code>c</code> in <code>s</code> have been replaced by <code>f c</code>. *</p></dd></dl><dl><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val </span>filter_map : (BatUChar.t <span>&#45;&gt;</span> BatUChar.t option) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>filter_map f l</code> calls <code>(f a0) (f a1).... (f an)</code> where <code>a0..an</code> are the characters of <code>l</code>. It returns the list of elements <code>bi</code> such as <code>f ai = Some bi</code> (when <code>f</code> returns <code>None</code>, the corresponding element of <code>l</code> is discarded).</p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val </span>filter : (BatUChar.t <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>filter f s</code> returns a copy of rope <code>s</code> in which only characters <code>c</code> such that <code>f c = true</code> remain.</p></dd></dl><dl><dt class="spec value" id="val-enum"><a href="#val-enum" class="anchor"></a><code><span class="keyword">val </span>enum : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatUChar.t BatEnum.t</code></dt><dd><p>enumerate the rope's characters</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-backwards"><a href="#val-backwards" class="anchor"></a><code><span class="keyword">val </span>backwards : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatUChar.t BatEnum.t</code></dt><dd><p>enumerates the rope's characters, in reverse order</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-of_enum"><a href="#val-of_enum" class="anchor"></a><code><span class="keyword">val </span>of_enum : BatUChar.t BatEnum.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>converts the enumeration into a rope</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl></section><section><header><h6 id="finding"><a href="#finding" class="anchor"></a>Finding</h6></header><dl><dt class="spec value" id="val-index"><a href="#val-index" class="anchor"></a><code><span class="keyword">val </span>index : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> int</code></dt><dd><p><code>index s c</code> returns the position of the leftmost occurrence of character <code>c</code> in rope <code>s</code>.</p><dl><dt>raises Not_found</dt><dd><p>if <code>c</code> does not occur in <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-index_from"><a href="#val-index_from" class="anchor"></a><code><span class="keyword">val </span>index_from : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> int</code></dt><dd><p><code>index_from r i c</code> returns the character number of the first occurrence of character <code>c</code> in rope <code>r</code> after position <code>i</code>. <code>index s c</code> is equivalent to <code>index_from s 0 c</code>.</p><dl><dt>raises Out_of_bounds</dt><dd><p>if <code>i</code> is not a valid position in <code>r</code>.</p></dd></dl><dl><dt>raises Not_found</dt><dd><p>if <code>c</code> does not occur in <code>r</code> after position <code>i</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rindex"><a href="#val-rindex" class="anchor"></a><code><span class="keyword">val </span>rindex : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> int</code></dt><dd><p><code>Rope.rindex s c</code> returns the position of the rightmost occurrence of character <code>c</code> in rope <code>s</code>.</p><dl><dt>raises Not_found</dt><dd><p>if <code>c</code> does not occur in <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rindex_from"><a href="#val-rindex_from" class="anchor"></a><code><span class="keyword">val </span>rindex_from : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> int</code></dt><dd><p>Same as <a href="index.html#val-rindex"><code>rindex</code></a>, but start searching at the character position given as second argument. <code>rindex s c</code> is equivalent to <code>rindex_from s (length s - 1) c</code>.</p></dd></dl><dl><dt class="spec value" id="val-contains"><a href="#val-contains" class="anchor"></a><code><span class="keyword">val </span>contains : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> bool</code></dt><dd><p><code>contains s c</code> tests if character <code>c</code> appears in the rope <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-contains_from"><a href="#val-contains_from" class="anchor"></a><code><span class="keyword">val </span>contains_from : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> bool</code></dt><dd><p><code>contains_from s start c</code> tests if character <code>c</code> appears in the subrope of <code>s</code> starting from <code>start</code> to the end of <code>s</code>.</p><dl><dt>raises Out_of_bounds</dt><dd><p>if <code>start</code> is not a valid index of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rcontains_from"><a href="#val-rcontains_from" class="anchor"></a><code><span class="keyword">val </span>rcontains_from : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> bool</code></dt><dd><p><code>rcontains_from s stop c</code> tests if character <code>c</code> appears in the subrope of <code>s</code> starting from the beginning of <code>s</code> to index <code>stop</code> (included).</p><dl><dt>raises Out_of_bounds</dt><dd><p>if <code>stop</code> is not a valid index of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val </span>find : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>find s x</code> returns the starting index of the first occurrence of rope <code>x</code> within rope <code>s</code>.</p><p><b>Note</b> This implementation is optimized for short ropes.</p><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is not a subrope of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-find_from"><a href="#val-find_from" class="anchor"></a><code><span class="keyword">val </span>find_from : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>find_from s ofs x</code> behaves as <code>find s x</code> but starts searching at offset <code>ofs</code>. <code>find s x</code> is equivalent to <code>find_from s 0 x</code>.</p><dl><dt>raises Out_of_bounds</dt><dd><p>if <code>ofs</code> is not a valid_position in <code>s</code>.</p></dd></dl><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is not a subrope of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rfind"><a href="#val-rfind" class="anchor"></a><code><span class="keyword">val </span>rfind : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>rfind s x</code> returns the starting index of the last occurrence of rope <code>x</code> within rope <code>s</code>.</p><p><b>Note</b> This implementation is optimized for short ropes.</p><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is not a subrope of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rfind_from"><a href="#val-rfind_from" class="anchor"></a><code><span class="keyword">val </span>rfind_from : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>rfind_from s ofs x</code> behaves as <code>rfind s x</code> but starts searching at offset <code>ofs</code>. <code>rfind s x</code> is equivalent to <code>rfind_from s (length s - 1) x</code>.</p><dl><dt>raises Out_of_bounds</dt><dd><p>if <code>ofs</code> is not a valid_position in <code>s</code>.</p></dd></dl><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is not a subrope of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-starts_with"><a href="#val-starts_with" class="anchor"></a><code><span class="keyword">val </span>starts_with : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>starts_with s x</code> returns <code>true</code> if <code>s</code> is starting with <code>x</code>, <code>false</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-ends_with"><a href="#val-ends_with" class="anchor"></a><code><span class="keyword">val </span>ends_with : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>ends_with s x</code> returns <code>true</code> if the rope <code>s</code> is ending with <code>x</code>, <code>false</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val </span>exists : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>exists str sub</code> returns true if <code>sub</code> is a subrope of <code>str</code> or false otherwise.</p></dd></dl><dl><dt class="spec value" id="val-left"><a href="#val-left" class="anchor"></a><code><span class="keyword">val </span>left : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>left r len</code> returns the rope containing the <code>len</code> first characters of <code>r</code></p></dd></dl><dl><dt class="spec value" id="val-right"><a href="#val-right" class="anchor"></a><code><span class="keyword">val </span>right : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>left r len</code> returns the rope containing the <code>len</code> last characters of <code>r</code></p></dd></dl><dl><dt class="spec value" id="val-head"><a href="#val-head" class="anchor"></a><code><span class="keyword">val </span>head : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>as <a href="index.html#val-left"><code>left</code></a></p></dd></dl><dl><dt class="spec value" id="val-tail"><a href="#val-tail" class="anchor"></a><code><span class="keyword">val </span>tail : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>tail r pos</code> returns the rope containing all but the <code>pos</code> first characters of <code>r</code></p></dd></dl><dl><dt class="spec value" id="val-strip"><a href="#val-strip" class="anchor"></a><code><span class="keyword">val </span>strip : ?&#8288;chars:BatUChar.t list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Returns the rope without the chars if they are at the beginning or at the end of the rope. By default chars are &quot; \t\r\n&quot;.</p></dd></dl><dl><dt class="spec value" id="val-lchop"><a href="#val-lchop" class="anchor"></a><code><span class="keyword">val </span>lchop : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Returns the same rope but without the first character. does nothing if the rope is empty.</p></dd></dl><dl><dt class="spec value" id="val-rchop"><a href="#val-rchop" class="anchor"></a><code><span class="keyword">val </span>rchop : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Returns the same rope but without the last character. does nothing if the rope is empty.</p></dd></dl><dl><dt class="spec value" id="val-slice"><a href="#val-slice" class="anchor"></a><code><span class="keyword">val </span>slice : ?&#8288;first:int <span>&#45;&gt;</span> ?&#8288;last:int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>slice ?first ?last s</code> returns a &quot;slice&quot; of the rope which corresponds to the characters <code>s.[first]</code>, <code>s.[first+1]</code>, ..., <code>s[last-1]</code>. Note that the character at index <code>last</code> is <b>not</b> included! If <code>first</code> is omitted it defaults to the start of the rope, i.e. index 0, and if <code>last</code> is omitted is defaults to point just past the end of <code>s</code>, i.e. <code>length s</code>. Thus, <code>slice s</code> is equivalent to <code>copy s</code>.</p><p>Negative indexes are interpreted as counting from the end of the rope. For example, <code>slice ~last:-2 s</code> will return the rope <code>s</code>, but without the last two characters.</p><p>This function <b>never</b> raises any exceptions. If the indexes are out of bounds they are automatically clipped.</p></dd></dl><dl><dt class="spec value" id="val-splice"><a href="#val-splice" class="anchor"></a><code><span class="keyword">val </span>splice : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>splice s off len rep</code> returns the rope in which the section of <code>s</code> indicated by <code>off</code> and <code>len</code> has been cut and replaced by <code>rep</code>.</p><p>Negative indices are interpreted as counting from the end of the string.</p></dd></dl><dl><dt class="spec value" id="val-fill"><a href="#val-fill" class="anchor"></a><code><span class="keyword">val </span>fill : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> BatUChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>fill s start len c</code> returns the rope in which characters number <code>start</code> to <code>start + len - 1</code> of <code>s</code> has been replaced by <code>c</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>start</code> and <code>len</code> do not designate a valid subrope of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-blit"><a href="#val-blit" class="anchor"></a><code><span class="keyword">val </span>blit : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>blit src srcoff dst dstoff len</code> returns a copy of <code>dst</code> in which <code>len</code> characters have been copied from rope <code>src</code>, starting at character number <code>srcoff</code>, to rope <code>dst</code>, starting at character number <code>dstoff</code>. It works correctly even if <code>src</code> and <code>dst</code> are the same rope, and the source and destination chunks overlap.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>srcoff</code> and <code>len</code> do not designate a valid subrope of <code>src</code>, or if <code>dstoff</code> and <code>len</code> do not designate a valid subrope of <code>dst</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val </span>concat : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>concat sep sl</code> concatenates the list of ropes <code>sl</code>, inserting the separator rope <code>sep</code> between each.</p></dd></dl><dl><dt class="spec value" id="val-replace"><a href="#val-replace" class="anchor"></a><code><span class="keyword">val </span>replace : str:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> sub:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> by:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></dt><dd><p><code>replace ~str ~sub ~by</code> returns a tuple constisting of a boolean and a rope where the first occurrence of the rope <code>sub</code> within <code>str</code> has been replaced by the rope <code>by</code>. The boolean is <code>true</code> if a substitution has taken place, <code>false</code> otherwise.</p></dd></dl></section><section><header><h6 id="splitting-around"><a href="#splitting-around" class="anchor"></a>Splitting around</h6></header><dl><dt class="spec value" id="val-split"><a href="#val-split" class="anchor"></a><code><span class="keyword">val </span>split : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a></code></dt><dd><p><code>split s sep</code> splits the rope <code>s</code> between the first occurrence of <code>sep</code>.</p><dl><dt>raises Not_found</dt><dd><p>if the separator is not found.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rsplit"><a href="#val-rsplit" class="anchor"></a><code><span class="keyword">val </span>rsplit : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a></code></dt><dd><p><code>rsplit s sep</code> splits the rope <code>s</code> between the last occurrence of <code>sep</code>.</p><dl><dt>raises Not_found</dt><dd><p>if the separator is not found.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-nsplit"><a href="#val-nsplit" class="anchor"></a><code><span class="keyword">val </span>nsplit : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dd><p><code>nsplit s sep</code> splits the rope <code>s</code> into a list of ropes which are separated by <code>sep</code>. <code>nsplit &quot;&quot; _</code> returns the empty list. If the separator is not found, it returns a list of the rope <code>s</code>. If two occurrences of the separator are consecutive (with nothing in between), the empty rope is added in the sequence. For example, <code>nsplit &quot;a//b/&quot; &quot;/&quot;</code> is <code>&quot;a&quot;; &quot;&quot;; &quot;b&quot;; &quot;&quot;</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if the separator is empty</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val </span>compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>The comparison function for ropes, with the same specification as <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.compare&quot;"><code>Pervasives</code>.compare</span>. Along with the type <code>t</code>, this function <code>compare</code> allows the module <code>Rope</code> to be passed as argument to the functors <span class="xref-unresolved" title="unresolved reference to &quot;Set.Make&quot;"><code>Set</code>.Make</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Map.Make&quot;"><code>Map</code>.Make</span>.</p></dd></dl><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val </span>equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Equality of ropes (based on compare)</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-print"><a href="#val-print" class="anchor"></a><code><span class="keyword">val </span>print : (<a href="index.html#type-t">t</a>, <span class="type-var">_</span>) BatIO.printer</code></dt><dd><p>Prints a rope to the given out_channel</p></dd></dl><dl><dt class="spec value" id="val-read_char"><a href="#val-read_char" class="anchor"></a><code><span class="keyword">val </span>read_char : BatIO.input <span>&#45;&gt;</span> BatUChar.t</code></dt><dd><p>Read one Unicode char from a UTF-8 encoded input</p></dd></dl><dl><dt class="spec value" id="val-read_text"><a href="#val-read_text" class="anchor"></a><code><span class="keyword">val </span>read_text : BatIO.input <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read up to n chars from a UTF-8 encoded input</p></dd></dl><dl><dt class="spec value" id="val-read_line"><a href="#val-read_line" class="anchor"></a><code><span class="keyword">val </span>read_line : BatIO.input <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read a line of UTF-8</p></dd></dl><dl><dt class="spec value" id="val-read_all"><a href="#val-read_all" class="anchor"></a><code><span class="keyword">val </span>read_all : BatIO.input <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read the whole contents of a UTF-8 encoded input</p></dd></dl><dl><dt class="spec value" id="val-write_char"><a href="#val-write_char" class="anchor"></a><code><span class="keyword">val </span>write_char : (BatUChar.t, <span class="type-var">_</span>) BatIO.printer</code></dt><dd><p>Write one uchar to a UTF-8 encoded output.</p></dd></dl><dl><dt class="spec value" id="val-write_text"><a href="#val-write_text" class="anchor"></a><code><span class="keyword">val </span>write_text : (<a href="index.html#type-t">t</a>, <span class="type-var">_</span>) BatIO.printer</code></dt><dd><p>Write a character text onto a UTF-8 encoded output.</p></dd></dl><dl><dt class="spec value" id="val-write_line"><a href="#val-write_line" class="anchor"></a><code><span class="keyword">val </span>write_line : (<a href="index.html#type-t">t</a>, <span class="type-var">_</span>) BatIO.printer</code></dt><dd><p>Write one line onto a UTF-8 encoded output, followed by a \n.</p></dd></dl><dl><dt class="spec value" id="val-lines_of"><a href="#val-lines_of" class="anchor"></a><code><span class="keyword">val </span>lines_of : BatIO.input <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> BatEnum.t</code></dt><dd><p>offer the lines of a UTF-8 encoded input as an enumeration</p></dd></dl><dl><dt class="spec value" id="val-chars_of"><a href="#val-chars_of" class="anchor"></a><code><span class="keyword">val </span>chars_of : BatIO.input <span>&#45;&gt;</span> BatUChar.t BatEnum.t</code></dt><dd><p>offer the characters of an UTF-8 encoded input as an enumeration</p></dd></dl><dl><dt class="spec value" id="val-output_text"><a href="#val-output_text" class="anchor"></a><code><span class="keyword">val </span>output_text : unit BatIO.output <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Write the text on the given output channel.</p></dd></dl><dl><dt class="spec value" id="val-write_lines"><a href="#val-write_lines" class="anchor"></a><code><span class="keyword">val </span>write_lines : (<a href="index.html#type-t">t</a> BatEnum.t, <span class="type-var">'a</span>) BatIO.printer</code></dt><dd><p>/*</p></dd></dl><dl><dt class="spec value" id="val-write_texts"><a href="#val-write_texts" class="anchor"></a><code><span class="keyword">val </span>write_texts : (<a href="index.html#type-t">t</a> BatEnum.t, <span class="type-var">'a</span>) BatIO.printer</code></dt><dt class="spec value" id="val-write_chars"><a href="#val-write_chars" class="anchor"></a><code><span class="keyword">val </span>write_chars : (BatUChar.t BatEnum.t, <span class="type-var">'a</span>) BatIO.printer</code></dt><dd><p>/*</p></dd></dl></section></div></body></html>