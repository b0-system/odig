<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatUnix (batteries.BatUnix)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">batteries</a> &#x00BB; BatUnix</nav><header class="odoc-preamble"><h1>Module <code><span>BatUnix</span></code></h1><p>Low-level interface to the operating system (both Unix and Windows).</p><p>This module only provides low-level functions and types. Unless you know that you need low-level access to the operating system, you probably don't. For higher-level functions, see modules <a href="../BatIO/index.html"><code>BatIO</code></a>, <a href="../BatFile/index.html"><code>BatFile</code></a>.</p><p><b>Note</b> This module is thread-safe.</p><ul class="at-tags"><li class="author"><span class="at-tag">author</span> Xavier Leroy (Base module)</li></ul><ul class="at-tags"><li class="author"><span class="at-tag">author</span> David Teller</li></ul><p>@documents Unix</p></header><nav class="odoc-toc"><ul><li><a href="#error-report">Error report</a></li><li><a href="#access-to-the-process-environment">Access to the process environment</a></li><li><a href="#process-handling">Process handling</a></li><li><a href="#basic-file-input/output">Basic file input/output</a></li><li><a href="#interfacing-with-the-standard-input/output-library">Interfacing with the standard input/output library</a></li><li><a href="#interfacing-with-the-standard-input/output-library_2">Interfacing with the standard input/output library</a></li><li><a href="#seeking-and-truncating">Seeking and truncating</a></li><li><a href="#file-status">File status</a></li><li><a href="#file-operations-on-large-files">File operations on large files</a></li><li><a href="#mapping-files-into-memory">Mapping files into memory</a></li><li><a href="#operations-on-file-names">Operations on file names</a></li><li><a href="#file-permissions-and-ownership">File permissions and ownership</a></li><li><a href="#operations-on-file-descriptors">Operations on file descriptors</a></li><li><a href="#directories">Directories</a></li><li><a href="#pipes-and-redirections">Pipes and redirections</a></li><li><a href="#high-level-process-and-redirection-management">High-level process and redirection management</a></li><li><a href="#symbolic-links">Symbolic links</a></li><li><a href="#polling">Polling</a></li><li><a href="#locking">Locking</a></li><li><a href="#signals">Signals</a></li><li><a href="#time-functions">Time functions</a></li><li><a href="#user-id,-group-id">User id, group id</a></li><li><a href="#internet-addresses">Internet addresses</a></li><li><a href="#sockets">Sockets</a></li><li><a href="#socket-options">Socket options</a></li><li><a href="#high-level-network-connection-functions">High-level network connection functions</a></li><li><a href="#host-and-protocol-databases">Host and protocol databases</a></li><li><a href="#terminal-interface">Terminal interface</a></li><li><a href="#small-tools">Small tools</a></li><li><a href="#thread-safety-internals">Thread-safety internals</a></li><li><a href="#obsolete-stuff">Obsolete stuff</a></li></ul></nav><div class="odoc-content"><h6 id="error-report"><a href="#error-report" class="anchor"></a>Error report</h6><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = <a href="../../ocaml/Unix/index.html#type-error">Unix.error</a></span><span> = </span></code><table><tr id="type-error.E2BIG" class="anchored"><td class="def variant constructor"><a href="#type-error.E2BIG" class="anchor"></a><code><span>| </span><span><span class="constructor">E2BIG</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Argument list too long</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EACCES" class="anchored"><td class="def variant constructor"><a href="#type-error.EACCES" class="anchor"></a><code><span>| </span><span><span class="constructor">EACCES</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Permission denied</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EAGAIN" class="anchored"><td class="def variant constructor"><a href="#type-error.EAGAIN" class="anchor"></a><code><span>| </span><span><span class="constructor">EAGAIN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Resource temporarily unavailable; try again</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EBADF" class="anchored"><td class="def variant constructor"><a href="#type-error.EBADF" class="anchor"></a><code><span>| </span><span><span class="constructor">EBADF</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Bad file descriptor</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EBUSY" class="anchored"><td class="def variant constructor"><a href="#type-error.EBUSY" class="anchor"></a><code><span>| </span><span><span class="constructor">EBUSY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Resource unavailable</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ECHILD" class="anchored"><td class="def variant constructor"><a href="#type-error.ECHILD" class="anchor"></a><code><span>| </span><span><span class="constructor">ECHILD</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No child process</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EDEADLK" class="anchored"><td class="def variant constructor"><a href="#type-error.EDEADLK" class="anchor"></a><code><span>| </span><span><span class="constructor">EDEADLK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Resource deadlock would occur</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EDOM" class="anchored"><td class="def variant constructor"><a href="#type-error.EDOM" class="anchor"></a><code><span>| </span><span><span class="constructor">EDOM</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Domain error for math functions, etc.</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EEXIST" class="anchored"><td class="def variant constructor"><a href="#type-error.EEXIST" class="anchor"></a><code><span>| </span><span><span class="constructor">EEXIST</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>File exists</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EFAULT" class="anchored"><td class="def variant constructor"><a href="#type-error.EFAULT" class="anchor"></a><code><span>| </span><span><span class="constructor">EFAULT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Bad address</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EFBIG" class="anchored"><td class="def variant constructor"><a href="#type-error.EFBIG" class="anchor"></a><code><span>| </span><span><span class="constructor">EFBIG</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>File too large</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EINTR" class="anchored"><td class="def variant constructor"><a href="#type-error.EINTR" class="anchor"></a><code><span>| </span><span><span class="constructor">EINTR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Function interrupted by signal</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EINVAL" class="anchored"><td class="def variant constructor"><a href="#type-error.EINVAL" class="anchor"></a><code><span>| </span><span><span class="constructor">EINVAL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Invalid argument</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EIO" class="anchored"><td class="def variant constructor"><a href="#type-error.EIO" class="anchor"></a><code><span>| </span><span><span class="constructor">EIO</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Hardware I/O error</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EISDIR" class="anchored"><td class="def variant constructor"><a href="#type-error.EISDIR" class="anchor"></a><code><span>| </span><span><span class="constructor">EISDIR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Is a directory</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EMFILE" class="anchored"><td class="def variant constructor"><a href="#type-error.EMFILE" class="anchor"></a><code><span>| </span><span><span class="constructor">EMFILE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Too many open files by the process</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EMLINK" class="anchored"><td class="def variant constructor"><a href="#type-error.EMLINK" class="anchor"></a><code><span>| </span><span><span class="constructor">EMLINK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Too many links</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENAMETOOLONG" class="anchored"><td class="def variant constructor"><a href="#type-error.ENAMETOOLONG" class="anchor"></a><code><span>| </span><span><span class="constructor">ENAMETOOLONG</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Filename too long</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENFILE" class="anchored"><td class="def variant constructor"><a href="#type-error.ENFILE" class="anchor"></a><code><span>| </span><span><span class="constructor">ENFILE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Too many open files in the system</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENODEV" class="anchored"><td class="def variant constructor"><a href="#type-error.ENODEV" class="anchor"></a><code><span>| </span><span><span class="constructor">ENODEV</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No such device</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOENT" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOENT" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOENT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No such file or directory</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOEXEC" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOEXEC" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOEXEC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Not an executable file</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOLCK" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOLCK" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOLCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No locks available</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOMEM" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOMEM" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOMEM</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Not enough memory</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOSPC" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOSPC" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOSPC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No space left on device</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOSYS" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOSYS" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOSYS</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Function not supported</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOTDIR" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOTDIR" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOTDIR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Not a directory</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOTEMPTY" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOTEMPTY" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOTEMPTY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Directory not empty</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOTTY" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOTTY" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOTTY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Inappropriate I/O control operation</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENXIO" class="anchored"><td class="def variant constructor"><a href="#type-error.ENXIO" class="anchor"></a><code><span>| </span><span><span class="constructor">ENXIO</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No such device or address</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EPERM" class="anchored"><td class="def variant constructor"><a href="#type-error.EPERM" class="anchor"></a><code><span>| </span><span><span class="constructor">EPERM</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Operation not permitted</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EPIPE" class="anchored"><td class="def variant constructor"><a href="#type-error.EPIPE" class="anchor"></a><code><span>| </span><span><span class="constructor">EPIPE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Broken pipe</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ERANGE" class="anchored"><td class="def variant constructor"><a href="#type-error.ERANGE" class="anchor"></a><code><span>| </span><span><span class="constructor">ERANGE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Result too large</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EROFS" class="anchored"><td class="def variant constructor"><a href="#type-error.EROFS" class="anchor"></a><code><span>| </span><span><span class="constructor">EROFS</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Read-only file system</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ESPIPE" class="anchored"><td class="def variant constructor"><a href="#type-error.ESPIPE" class="anchor"></a><code><span>| </span><span><span class="constructor">ESPIPE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Invalid seek e.g. on a pipe</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ESRCH" class="anchored"><td class="def variant constructor"><a href="#type-error.ESRCH" class="anchor"></a><code><span>| </span><span><span class="constructor">ESRCH</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No such process</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EXDEV" class="anchored"><td class="def variant constructor"><a href="#type-error.EXDEV" class="anchor"></a><code><span>| </span><span><span class="constructor">EXDEV</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Invalid link</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EWOULDBLOCK" class="anchored"><td class="def variant constructor"><a href="#type-error.EWOULDBLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">EWOULDBLOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Operation would block</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EINPROGRESS" class="anchored"><td class="def variant constructor"><a href="#type-error.EINPROGRESS" class="anchor"></a><code><span>| </span><span><span class="constructor">EINPROGRESS</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Operation now in progress</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EALREADY" class="anchored"><td class="def variant constructor"><a href="#type-error.EALREADY" class="anchor"></a><code><span>| </span><span><span class="constructor">EALREADY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Operation already in progress</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOTSOCK" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOTSOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOTSOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket operation on non-socket</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EDESTADDRREQ" class="anchored"><td class="def variant constructor"><a href="#type-error.EDESTADDRREQ" class="anchor"></a><code><span>| </span><span><span class="constructor">EDESTADDRREQ</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Destination address required</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EMSGSIZE" class="anchored"><td class="def variant constructor"><a href="#type-error.EMSGSIZE" class="anchor"></a><code><span>| </span><span><span class="constructor">EMSGSIZE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Message too long</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EPROTOTYPE" class="anchored"><td class="def variant constructor"><a href="#type-error.EPROTOTYPE" class="anchor"></a><code><span>| </span><span><span class="constructor">EPROTOTYPE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Protocol wrong type for socket</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOPROTOOPT" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOPROTOOPT" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOPROTOOPT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Protocol not available</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EPROTONOSUPPORT" class="anchored"><td class="def variant constructor"><a href="#type-error.EPROTONOSUPPORT" class="anchor"></a><code><span>| </span><span><span class="constructor">EPROTONOSUPPORT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Protocol not supported</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ESOCKTNOSUPPORT" class="anchored"><td class="def variant constructor"><a href="#type-error.ESOCKTNOSUPPORT" class="anchor"></a><code><span>| </span><span><span class="constructor">ESOCKTNOSUPPORT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket type not supported</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EOPNOTSUPP" class="anchored"><td class="def variant constructor"><a href="#type-error.EOPNOTSUPP" class="anchor"></a><code><span>| </span><span><span class="constructor">EOPNOTSUPP</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Operation not supported on socket</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EPFNOSUPPORT" class="anchored"><td class="def variant constructor"><a href="#type-error.EPFNOSUPPORT" class="anchor"></a><code><span>| </span><span><span class="constructor">EPFNOSUPPORT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Protocol family not supported</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EAFNOSUPPORT" class="anchored"><td class="def variant constructor"><a href="#type-error.EAFNOSUPPORT" class="anchor"></a><code><span>| </span><span><span class="constructor">EAFNOSUPPORT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Address family not supported by protocol family</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EADDRINUSE" class="anchored"><td class="def variant constructor"><a href="#type-error.EADDRINUSE" class="anchor"></a><code><span>| </span><span><span class="constructor">EADDRINUSE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Address already in use</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EADDRNOTAVAIL" class="anchored"><td class="def variant constructor"><a href="#type-error.EADDRNOTAVAIL" class="anchor"></a><code><span>| </span><span><span class="constructor">EADDRNOTAVAIL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Can't assign requested address</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENETDOWN" class="anchored"><td class="def variant constructor"><a href="#type-error.ENETDOWN" class="anchor"></a><code><span>| </span><span><span class="constructor">ENETDOWN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Network is down</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENETUNREACH" class="anchored"><td class="def variant constructor"><a href="#type-error.ENETUNREACH" class="anchor"></a><code><span>| </span><span><span class="constructor">ENETUNREACH</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Network is unreachable</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENETRESET" class="anchored"><td class="def variant constructor"><a href="#type-error.ENETRESET" class="anchor"></a><code><span>| </span><span><span class="constructor">ENETRESET</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Network dropped connection on reset</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ECONNABORTED" class="anchored"><td class="def variant constructor"><a href="#type-error.ECONNABORTED" class="anchor"></a><code><span>| </span><span><span class="constructor">ECONNABORTED</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Software caused connection abort</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ECONNRESET" class="anchored"><td class="def variant constructor"><a href="#type-error.ECONNRESET" class="anchor"></a><code><span>| </span><span><span class="constructor">ECONNRESET</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Connection reset by peer</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOBUFS" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOBUFS" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOBUFS</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No buffer space available</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EISCONN" class="anchored"><td class="def variant constructor"><a href="#type-error.EISCONN" class="anchor"></a><code><span>| </span><span><span class="constructor">EISCONN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket is already connected</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ENOTCONN" class="anchored"><td class="def variant constructor"><a href="#type-error.ENOTCONN" class="anchor"></a><code><span>| </span><span><span class="constructor">ENOTCONN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket is not connected</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ESHUTDOWN" class="anchored"><td class="def variant constructor"><a href="#type-error.ESHUTDOWN" class="anchor"></a><code><span>| </span><span><span class="constructor">ESHUTDOWN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Can't send after socket shutdown</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ETOOMANYREFS" class="anchored"><td class="def variant constructor"><a href="#type-error.ETOOMANYREFS" class="anchor"></a><code><span>| </span><span><span class="constructor">ETOOMANYREFS</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Too many references: can't splice</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ETIMEDOUT" class="anchored"><td class="def variant constructor"><a href="#type-error.ETIMEDOUT" class="anchor"></a><code><span>| </span><span><span class="constructor">ETIMEDOUT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Connection timed out</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ECONNREFUSED" class="anchored"><td class="def variant constructor"><a href="#type-error.ECONNREFUSED" class="anchor"></a><code><span>| </span><span><span class="constructor">ECONNREFUSED</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Connection refused</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EHOSTDOWN" class="anchored"><td class="def variant constructor"><a href="#type-error.EHOSTDOWN" class="anchor"></a><code><span>| </span><span><span class="constructor">EHOSTDOWN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Host is down</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EHOSTUNREACH" class="anchored"><td class="def variant constructor"><a href="#type-error.EHOSTUNREACH" class="anchor"></a><code><span>| </span><span><span class="constructor">EHOSTUNREACH</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>No route to host</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.ELOOP" class="anchored"><td class="def variant constructor"><a href="#type-error.ELOOP" class="anchor"></a><code><span>| </span><span><span class="constructor">ELOOP</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Too many levels of symbolic links</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EOVERFLOW" class="anchored"><td class="def variant constructor"><a href="#type-error.EOVERFLOW" class="anchor"></a><code><span>| </span><span><span class="constructor">EOVERFLOW</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>File size or position not representable</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.EUNKNOWNERR" class="anchored"><td class="def variant constructor"><a href="#type-error.EUNKNOWNERR" class="anchor"></a><code><span>| </span><span><span class="constructor">EUNKNOWNERR</span> <span class="keyword">of</span> int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Unknown error</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The type of error codes. Errors defined in the POSIX standard and additional errors from UNIX98 and BSD. All other errors are mapped to EUNKNOWNERR.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Unix_error" class="anchored"><a href="#exception-Unix_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Unix_error</span> <span class="keyword">of</span> <a href="#type-error">error</a> * string * string</span></code></div><div class="spec-doc"><p>Raised by the system calls below when an error is encountered. The first component is the error code; the second component is the function name; the third component is the string parameter to the function, if it has one, or the empty string otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-error_message" class="anchored"><a href="#val-error_message" class="anchor"></a><code><span><span class="keyword">val</span> error_message : <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return a string describing the given error code.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-handle_unix_error" class="anchored"><a href="#val-handle_unix_error" class="anchor"></a><code><span><span class="keyword">val</span> handle_unix_error : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>handle_unix_error f x</code> applies <code>f</code> to <code>x</code> and returns the result. If the exception <code>Unix_error</code> is raised, it prints a message describing the error and exits with code 2.</p></div></div><h6 id="access-to-the-process-environment"><a href="#access-to-the-process-environment" class="anchor"></a>Access to the process environment</h6><div class="odoc-spec"><div class="spec value" id="val-environment" class="anchored"><a href="#val-environment" class="anchor"></a><code><span><span class="keyword">val</span> environment : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p>Return the process environment, as an array of strings with the format ``variable=value''.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unsafe_environment" class="anchored"><a href="#val-unsafe_environment" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_environment : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p>Return the process environment, as an array of strings with the format ``variable=value''. Unlike <a href="#val-environment"><code>environment</code></a>, this function returns a populated array even if the process has special privileges. See the documentation for <a href="#val-unsafe_getenv"><code>unsafe_getenv</code></a> for more details.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0 and OCaml 4.06.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getenv" class="anchored"><a href="#val-getenv" class="anchor"></a><code><span><span class="keyword">val</span> getenv : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the value associated to a variable in the process environment. </p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if the variable is unbound. (This function is identical to <code>Sys</code>.getenv.)</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-unsafe_getenv" class="anchored"><a href="#val-unsafe_getenv" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_getenv : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the value associated to a variable in the process environment.</p><p>Unlike <a href="#val-getenv"><code>getenv</code></a>, this function returns the value even if the process has special privileges. It is considered unsafe because the programmer of a setuid or setgid program must be careful to avoid using maliciously crafted environment variables in the search path for executables, the locations for temporary files or logs, and the like.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if the variable is unbound.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0 and 4.06.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-putenv" class="anchored"><a href="#val-putenv" class="anchor"></a><code><span><span class="keyword">val</span> putenv : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>Unix.putenv name value</code> sets the value associated to a variable in the process environment. <code>name</code> is the name of the environment variable, and <code>value</code> its new associated value.</p></div></div><h6 id="process-handling"><a href="#process-handling" class="anchor"></a>Process handling</h6><div class="odoc-spec"><div class="spec type" id="type-process_status" class="anchored"><a href="#type-process_status" class="anchor"></a><code><span><span class="keyword">type</span> process_status</span><span> = <a href="../../ocaml/Unix/index.html#type-process_status">Unix.process_status</a></span><span> = </span></code><table><tr id="type-process_status.WEXITED" class="anchored"><td class="def variant constructor"><a href="#type-process_status.WEXITED" class="anchor"></a><code><span>| </span><span><span class="constructor">WEXITED</span> <span class="keyword">of</span> int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The process terminated normally by <code>exit</code>; the argument is the return code.</p><span class="comment-delim">*)</span></td></tr><tr id="type-process_status.WSIGNALED" class="anchored"><td class="def variant constructor"><a href="#type-process_status.WSIGNALED" class="anchor"></a><code><span>| </span><span><span class="constructor">WSIGNALED</span> <span class="keyword">of</span> int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The process was killed by a signal; the argument is the signal number.</p><span class="comment-delim">*)</span></td></tr><tr id="type-process_status.WSTOPPED" class="anchored"><td class="def variant constructor"><a href="#type-process_status.WSTOPPED" class="anchor"></a><code><span>| </span><span><span class="constructor">WSTOPPED</span> <span class="keyword">of</span> int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The process was stopped by a signal; the argument is the signal number.</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The termination status of a process. See module <code>Sys</code> for the definitions of the standard signal numbers. Note that they are not the numbers used by the OS.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-wait_flag" class="anchored"><a href="#type-wait_flag" class="anchor"></a><code><span><span class="keyword">type</span> wait_flag</span><span> = <a href="../../ocaml/Unix/index.html#type-wait_flag">Unix.wait_flag</a></span><span> = </span></code><table><tr id="type-wait_flag.WNOHANG" class="anchored"><td class="def variant constructor"><a href="#type-wait_flag.WNOHANG" class="anchor"></a><code><span>| </span><span><span class="constructor">WNOHANG</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>do not block if no child has died yet, but immediately return with a pid equal to 0.</p><span class="comment-delim">*)</span></td></tr><tr id="type-wait_flag.WUNTRACED" class="anchored"><td class="def variant constructor"><a href="#type-wait_flag.WUNTRACED" class="anchor"></a><code><span>| </span><span><span class="constructor">WUNTRACED</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>report also the children that receive stop signals.</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Flags for <a href="../../ocaml/Unix/index.html#val-waitpid"><code>Unix.waitpid</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-execv" class="anchored"><a href="#val-execv" class="anchor"></a><code><span><span class="keyword">val</span> execv : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>execv prog args</code> execute the program in file <code>prog</code>, with the arguments <code>args</code>, and the current process environment. These <code>execv*</code> functions never return: on success, the current program is replaced by the new one;</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Unix.Unix_error</span> <p>on failure.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-execve" class="anchored"><a href="#val-execve" class="anchor"></a><code><span><span class="keyword">val</span> execve : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-execv"><code>Unix.execv</code></a>, except that the third argument provides the environment to the program executed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-execvp" class="anchored"><a href="#val-execvp" class="anchor"></a><code><span><span class="keyword">val</span> execvp : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-execv"><code>Unix.execv</code></a>, except that the program is searched in the path.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-execvpe" class="anchored"><a href="#val-execvpe" class="anchor"></a><code><span><span class="keyword">val</span> execvpe : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-execve"><code>Unix.execve</code></a>, except that the program is searched in the path.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fork" class="anchored"><a href="#val-fork" class="anchor"></a><code><span><span class="keyword">val</span> fork : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Fork a new process. The returned integer is 0 for the child process, the pid of the child process for the parent process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-wait" class="anchored"><a href="#val-wait" class="anchor"></a><code><span><span class="keyword">val</span> wait : <span>unit <span class="arrow">&#45;&gt;</span></span> int * <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Wait until one of the children processes die, and return its pid and termination status.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-waitpid" class="anchored"><a href="#val-waitpid" class="anchor"></a><code><span><span class="keyword">val</span> waitpid : <span><span><a href="#type-wait_flag">wait_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int * <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-wait"><code>Unix.wait</code></a>, but waits for the child process whose pid is given. A pid of <code>-1</code> means wait for any child. A pid of <code>0</code> means wait for any child in the same process group as the current process. Negative pid arguments represent process groups. The list of options indicates whether <code>waitpid</code> should return immediately without waiting, or also report stopped children.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-system" class="anchored"><a href="#val-system" class="anchor"></a><code><span><span class="keyword">val</span> system : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Execute the given command, wait until it terminates, and return its termination status. The string is interpreted by the shell <code>/bin/sh</code> and therefore can contain redirections, quotes, variables, etc. The result <code>WEXITED 127</code> indicates that the shell couldn't be executed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run_and_read" class="anchored"><a href="#val-run_and_read" class="anchor"></a><code><span><span class="keyword">val</span> run_and_read : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_status">process_status</a> * string</span></code></div><div class="spec-doc"><p><code>(stat, output) = run_and_read cmd</code> run the command <code>cmd</code> (via Unix.system) then return its exit status <code>stat</code> and output string <code>output</code> as read from its standard output (which was redirected to a temporary file).</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.4</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-_exit" class="anchored"><a href="#val-_exit" class="anchor"></a><code><span><span class="keyword">val</span> _exit : <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Terminate the calling process immediately, returning the given status code to the operating system: usually 0 to indicate no errors, and a small positive integer to indicate failure. Unlike <a href="../../ocaml/Stdlib/index.html#val-exit"><code>Stdlib.exit</code></a>, <a href="../../ocaml/Unix/index.html#val-_exit"><code>Unix._exit</code></a> performs no finalization whatsoever: functions registered with <a href="../../ocaml/Stdlib/index.html#val-at_exit"><code>Stdlib.at_exit</code></a> are not called, input/output channels are not flushed, and the C run-time system is not finalized either.</p><p>The typical use of <a href="../../ocaml/Unix/index.html#val-_exit"><code>Unix._exit</code></a> is after a <a href="../../ocaml/Unix/index.html#val-fork"><code>Unix.fork</code></a> operation, when the child process runs into a fatal error and must exit. In this case, it is preferable to not perform any finalization action in the child process, as these actions could interfere with similar actions performed by the parent process. For example, output channels should not be flushed by the child process, as the parent process may flush them again later, resulting in duplicate output.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 3.3.0 and 4.12.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getpid" class="anchored"><a href="#val-getpid" class="anchor"></a><code><span><span class="keyword">val</span> getpid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the pid of the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getppid" class="anchored"><a href="#val-getppid" class="anchor"></a><code><span><span class="keyword">val</span> getppid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the pid of the parent process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nice" class="anchored"><a href="#val-nice" class="anchor"></a><code><span><span class="keyword">val</span> nice : <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Change the process priority. The integer argument is added to the ``nice'' value. (Higher values of the ``nice'' value mean lower priorities.) Return the new nice value.</p></div></div><h6 id="basic-file-input/output"><a href="#basic-file-input/output" class="anchor"></a>Basic file input/output</h6><div class="odoc-spec"><div class="spec type" id="type-file_descr" class="anchored"><a href="#type-file_descr" class="anchor"></a><code><span><span class="keyword">type</span> file_descr</span><span> = <a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a></span></code></div><div class="spec-doc"><p>The abstract type of file descriptors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stdin" class="anchored"><a href="#val-stdin" class="anchor"></a><code><span><span class="keyword">val</span> stdin : <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>File descriptor for standard input.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stdout" class="anchored"><a href="#val-stdout" class="anchor"></a><code><span><span class="keyword">val</span> stdout : <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>File descriptor for standard output.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stderr" class="anchored"><a href="#val-stderr" class="anchor"></a><code><span><span class="keyword">val</span> stderr : <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>File descriptor for standard error.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-open_flag" class="anchored"><a href="#type-open_flag" class="anchor"></a><code><span><span class="keyword">type</span> open_flag</span><span> = <a href="../../ocaml/Unix/index.html#type-open_flag">Unix.open_flag</a></span><span> = </span></code><table><tr id="type-open_flag.O_RDONLY" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_RDONLY" class="anchor"></a><code><span>| </span><span><span class="constructor">O_RDONLY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Open for reading</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_WRONLY" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_WRONLY" class="anchor"></a><code><span>| </span><span><span class="constructor">O_WRONLY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Open for writing</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_RDWR" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_RDWR" class="anchor"></a><code><span>| </span><span><span class="constructor">O_RDWR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Open for reading and writing</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_NONBLOCK" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_NONBLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">O_NONBLOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Open in non-blocking mode</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_APPEND" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_APPEND" class="anchor"></a><code><span>| </span><span><span class="constructor">O_APPEND</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Open for append</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_CREAT" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_CREAT" class="anchor"></a><code><span>| </span><span><span class="constructor">O_CREAT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Create if nonexistent</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_TRUNC" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_TRUNC" class="anchor"></a><code><span>| </span><span><span class="constructor">O_TRUNC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Truncate to 0 length if existing</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_EXCL" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_EXCL" class="anchor"></a><code><span>| </span><span><span class="constructor">O_EXCL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Fail if existing</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_NOCTTY" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_NOCTTY" class="anchor"></a><code><span>| </span><span><span class="constructor">O_NOCTTY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Don't make this dev a controlling tty</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_DSYNC" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_DSYNC" class="anchor"></a><code><span>| </span><span><span class="constructor">O_DSYNC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Writes complete as `Synchronised I/O data integrity completion'</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_SYNC" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_SYNC" class="anchor"></a><code><span>| </span><span><span class="constructor">O_SYNC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Writes complete as `Synchronised I/O file integrity completion'</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_RSYNC" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_RSYNC" class="anchor"></a><code><span>| </span><span><span class="constructor">O_RSYNC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Reads complete as writes (depending on O_SYNC/O_DSYNC)</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_SHARE_DELETE" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_SHARE_DELETE" class="anchor"></a><code><span>| </span><span><span class="constructor">O_SHARE_DELETE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>OCaml 4 and Windows only: allow the file to be deleted while still open</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_CLOEXEC" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_CLOEXEC" class="anchor"></a><code><span>| </span><span><span class="constructor">O_CLOEXEC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set the close-on-exec flag on the descriptor returned by <a href="#val-openfile"><code>openfile</code></a></p><p>Since OCaml 4.1</p><span class="comment-delim">*)</span></td></tr><tr id="type-open_flag.O_KEEPEXEC" class="anchored"><td class="def variant constructor"><a href="#type-open_flag.O_KEEPEXEC" class="anchor"></a><code><span>| </span><span><span class="constructor">O_KEEPEXEC</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The flags to <a href="../../ocaml/Unix/index.html#val-openfile"><code>Unix.openfile</code></a>.</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-file_perm" class="anchored"><a href="#type-file_perm" class="anchor"></a><code><span><span class="keyword">type</span> file_perm</span><span> = int</span></code></div><div class="spec-doc"><p>The type of file access rights, e.g. <code>0o640</code> is read and write for user, read for group, none for others</p></div></div><div class="odoc-spec"><div class="spec value" id="val-openfile" class="anchored"><a href="#val-openfile" class="anchor"></a><code><span><span class="keyword">val</span> openfile : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-open_flag">open_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_perm">file_perm</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Open the named file with the given flags. Third argument is the permissions to give to the file if it is created. Return a file descriptor on the named file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-close" class="anchored"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Close a file descriptor.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fsync" class="anchored"><a href="#val-fsync" class="anchor"></a><code><span><span class="keyword">val</span> fsync : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Flush file buffers to disk.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>read fd buff ofs len</code> reads <code>len</code> characters from descriptor <code>fd</code>, storing them in string <code>buff</code>, starting at position <code>ofs</code> in string <code>buff</code>. Return the number of characters actually read.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write" class="anchored"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>write fd buff ofs len</code> writes <code>len</code> characters to descriptor <code>fd</code>, taking them from string <code>buff</code>, starting at position <code>ofs</code> in string <code>buff</code>. Return the number of characters actually written. <code>write</code> repeats the writing operation until all characters have been written or an error occurs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-single_write" class="anchored"><a href="#val-single_write" class="anchor"></a><code><span><span class="keyword">val</span> single_write : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>write</code>, but attempts to write only once. Thus, if an error occurs, <code>single_write</code> guarantees that no data has been written.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write_substring" class="anchored"><a href="#val-write_substring" class="anchor"></a><code><span><span class="keyword">val</span> write_substring : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>write</code>, but take the data from a string instead of a byte sequence.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.3.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-single_write_substring" class="anchored"><a href="#val-single_write_substring" class="anchor"></a><code><span><span class="keyword">val</span> single_write_substring : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>single_write</code>, but take the data from a string instead of a byte sequence.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.3.0</li></ul></div></div><h6 id="interfacing-with-the-standard-input/output-library"><a href="#interfacing-with-the-standard-input/output-library" class="anchor"></a>Interfacing with the standard input/output library</h6><h6 id="interfacing-with-the-standard-input/output-library_2"><a href="#interfacing-with-the-standard-input/output-library_2" class="anchor"></a>Interfacing with the standard input/output library</h6><div class="odoc-spec"><div class="spec value" id="val-input_of_descr" class="anchored"><a href="#val-input_of_descr" class="anchor"></a><code><span><span class="keyword">val</span> input_of_descr : <span>?autoclose:bool <span class="arrow">&#45;&gt;</span></span> <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a></span></code></div><div class="spec-doc"><p>Create an <code>input</code> reading from the given descriptor. The <code>input</code> is initially in binary mode; use <code>set_binary_mode_in ic false</code> if text mode is desired.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">autoclose</span> <p>If true (default value), close the input automatically once there is no more content to read. Otherwise, the input will be closed according to the usual rules of module <code>BatIO</code>. Barring very specific needs (e.g. using file descriptors as locks), you probably want <code>autoclose</code> to be <code>true</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true, close the underlying file descriptor when the <code>input</code> is closed. If false or unspecified, do nothing, in which case you will need to close the underlying file descriptor yourself to ensure proper cleanup.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-output_of_descr" class="anchored"><a href="#val-output_of_descr" class="anchor"></a><code><span><span class="keyword">val</span> output_of_descr : <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span></span></code></div><div class="spec-doc"><p>Create an <code>output</code> writing on the given descriptor. The <code>output</code> is initially in binary mode; use <code>set_binary_mode_out oc false</code> if text mode is desired.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true, close the underlying file descriptor when the <code>output</code> is closed. If false or unspecified, do nothing, in which case you will need to close the underlying file descriptor yourself to ensure proper cleanup.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-descr_of_input" class="anchored"><a href="#val-descr_of_input" class="anchor"></a><code><span><span class="keyword">val</span> descr_of_input : <span><a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Return the descriptor corresponding to an input.</p><p>Not all inputs have file descriptors. This function works only for inputs which have been created using module <a href="../../ocaml/Unix/index.html"><code>Unix</code></a>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if this input channel doesn't have a file descriptor</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-descr_of_output" class="anchored"><a href="#val-descr_of_output" class="anchor"></a><code><span><span class="keyword">val</span> descr_of_output : <span><span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Return the descriptor corresponding to an output.</p><p>Not all inputs have file descriptors. This function works only for inputs which have been created from module Unix.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if this input channel doesn't have a file descriptor</p></li></ul></div></div><h6 id="seeking-and-truncating"><a href="#seeking-and-truncating" class="anchor"></a>Seeking and truncating</h6><div class="odoc-spec"><div class="spec type" id="type-seek_command" class="anchored"><a href="#type-seek_command" class="anchor"></a><code><span><span class="keyword">type</span> seek_command</span><span> = <a href="../../ocaml/Unix/index.html#type-seek_command">Unix.seek_command</a></span><span> = </span></code><table><tr id="type-seek_command.SEEK_SET" class="anchored"><td class="def variant constructor"><a href="#type-seek_command.SEEK_SET" class="anchor"></a><code><span>| </span><span><span class="constructor">SEEK_SET</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>indicates positions relative to the beginning of the file</p><span class="comment-delim">*)</span></td></tr><tr id="type-seek_command.SEEK_CUR" class="anchored"><td class="def variant constructor"><a href="#type-seek_command.SEEK_CUR" class="anchor"></a><code><span>| </span><span><span class="constructor">SEEK_CUR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>indicates positions relative to the current position</p><span class="comment-delim">*)</span></td></tr><tr id="type-seek_command.SEEK_END" class="anchored"><td class="def variant constructor"><a href="#type-seek_command.SEEK_END" class="anchor"></a><code><span>| </span><span><span class="constructor">SEEK_END</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>indicates positions relative to the end of the file</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Positioning modes for <a href="../../ocaml/Unix/index.html#val-lseek"><code>Unix.lseek</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lseek" class="anchored"><a href="#val-lseek" class="anchor"></a><code><span><span class="keyword">val</span> lseek : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-seek_command">seek_command</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Set the current position for a file descriptor</p></div></div><div class="odoc-spec"><div class="spec value" id="val-truncate" class="anchored"><a href="#val-truncate" class="anchor"></a><code><span><span class="keyword">val</span> truncate : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Truncates the named file to the given size.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ftruncate" class="anchored"><a href="#val-ftruncate" class="anchor"></a><code><span><span class="keyword">val</span> ftruncate : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Truncates the file corresponding to the given descriptor to the given size.</p></div></div><h6 id="file-status"><a href="#file-status" class="anchor"></a>File status</h6><div class="odoc-spec"><div class="spec type" id="type-file_kind" class="anchored"><a href="#type-file_kind" class="anchor"></a><code><span><span class="keyword">type</span> file_kind</span><span> = <a href="../../ocaml/Unix/index.html#type-file_kind">Unix.file_kind</a></span><span> = </span></code><table><tr id="type-file_kind.S_REG" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_REG" class="anchor"></a><code><span>| </span><span><span class="constructor">S_REG</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Regular file</p><span class="comment-delim">*)</span></td></tr><tr id="type-file_kind.S_DIR" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_DIR" class="anchor"></a><code><span>| </span><span><span class="constructor">S_DIR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Directory</p><span class="comment-delim">*)</span></td></tr><tr id="type-file_kind.S_CHR" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_CHR" class="anchor"></a><code><span>| </span><span><span class="constructor">S_CHR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Character device</p><span class="comment-delim">*)</span></td></tr><tr id="type-file_kind.S_BLK" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_BLK" class="anchor"></a><code><span>| </span><span><span class="constructor">S_BLK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Block device</p><span class="comment-delim">*)</span></td></tr><tr id="type-file_kind.S_LNK" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_LNK" class="anchor"></a><code><span>| </span><span><span class="constructor">S_LNK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Symbolic link</p><span class="comment-delim">*)</span></td></tr><tr id="type-file_kind.S_FIFO" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_FIFO" class="anchor"></a><code><span>| </span><span><span class="constructor">S_FIFO</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Named pipe</p><span class="comment-delim">*)</span></td></tr><tr id="type-file_kind.S_SOCK" class="anchored"><td class="def variant constructor"><a href="#type-file_kind.S_SOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">S_SOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-stats" class="anchored"><a href="#type-stats" class="anchor"></a><code><span><span class="keyword">type</span> stats</span><span> = <a href="../../ocaml/Unix/index.html#type-stats">Unix.stats</a></span><span> = </span><span>{</span></code><table><tr id="type-stats.st_dev" class="anchored"><td class="def record field"><a href="#type-stats.st_dev" class="anchor"></a><code><span>st_dev : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Device number</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_ino" class="anchored"><td class="def record field"><a href="#type-stats.st_ino" class="anchor"></a><code><span>st_ino : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Inode number</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_kind" class="anchored"><td class="def record field"><a href="#type-stats.st_kind" class="anchor"></a><code><span>st_kind : <a href="#type-file_kind">file_kind</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Kind of the file</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_perm" class="anchored"><td class="def record field"><a href="#type-stats.st_perm" class="anchor"></a><code><span>st_perm : <a href="#type-file_perm">file_perm</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Access rights</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_nlink" class="anchored"><td class="def record field"><a href="#type-stats.st_nlink" class="anchor"></a><code><span>st_nlink : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Number of links</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_uid" class="anchored"><td class="def record field"><a href="#type-stats.st_uid" class="anchor"></a><code><span>st_uid : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>User id of the owner</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_gid" class="anchored"><td class="def record field"><a href="#type-stats.st_gid" class="anchor"></a><code><span>st_gid : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Group ID of the file's group</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_rdev" class="anchored"><td class="def record field"><a href="#type-stats.st_rdev" class="anchor"></a><code><span>st_rdev : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Device minor number</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_size" class="anchored"><td class="def record field"><a href="#type-stats.st_size" class="anchor"></a><code><span>st_size : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Size in bytes</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_atime" class="anchored"><td class="def record field"><a href="#type-stats.st_atime" class="anchor"></a><code><span>st_atime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Last access time</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_mtime" class="anchored"><td class="def record field"><a href="#type-stats.st_mtime" class="anchor"></a><code><span>st_mtime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Last modification time</p><span class="comment-delim">*)</span></td></tr><tr id="type-stats.st_ctime" class="anchored"><td class="def record field"><a href="#type-stats.st_ctime" class="anchor"></a><code><span>st_ctime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Last status change time</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The information returned by the <a href="../../ocaml/Unix/index.html#val-stat"><code>Unix.stat</code></a> calls.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-stat" class="anchored"><a href="#val-stat" class="anchor"></a><code><span><span class="keyword">val</span> stat : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-stats">stats</a></span></code></div><div class="spec-doc"><p>Return the information for the named file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lstat" class="anchored"><a href="#val-lstat" class="anchor"></a><code><span><span class="keyword">val</span> lstat : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-stats">stats</a></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-stat"><code>Unix.stat</code></a>, but in case the file is a symbolic link, return the information for the link itself.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fstat" class="anchored"><a href="#val-fstat" class="anchor"></a><code><span><span class="keyword">val</span> fstat : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-stats">stats</a></span></code></div><div class="spec-doc"><p>Return the information for the file associated with the given descriptor.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-isatty" class="anchored"><a href="#val-isatty" class="anchor"></a><code><span><span class="keyword">val</span> isatty : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Return <code>true</code> if the given file descriptor refers to a terminal or console window, <code>false</code> otherwise.</p></div></div><h6 id="file-operations-on-large-files"><a href="#file-operations-on-large-files" class="anchor"></a>File operations on large files</h6><div class="odoc-spec"><div class="spec module" id="module-LargeFile" class="anchored"><a href="#module-LargeFile" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="LargeFile/index.html">LargeFile</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>File operations on large files. This sub-module provides 64-bit variants of the functions <a href="../../ocaml/Unix/index.html#val-lseek"><code>Unix.lseek</code></a> (for positioning a file descriptor), <a href="../../ocaml/Unix/index.html#val-truncate"><code>Unix.truncate</code></a> and <a href="../../ocaml/Unix/index.html#val-ftruncate"><code>Unix.ftruncate</code></a> (for changing the size of a file), and <a href="../../ocaml/Unix/index.html#val-stat"><code>Unix.stat</code></a>, <a href="../../ocaml/Unix/index.html#val-lstat"><code>Unix.lstat</code></a> and <a href="../../ocaml/Unix/index.html#val-fstat"><code>Unix.fstat</code></a> (for obtaining information on files). These alternate functions represent positions and sizes by 64-bit integers (type <code>int64</code>) instead of regular integers (type <code>int</code>), thus allowing operating on files whose sizes are greater than <code>max_int</code>.</p></div></div><h6 id="mapping-files-into-memory"><a href="#mapping-files-into-memory" class="anchor"></a>Mapping files into memory</h6><div class="odoc-spec"><div class="spec value" id="val-map_file" class="anchored"><a href="#val-map_file" class="anchor"></a><code><span><span class="keyword">val</span> map_file : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>?pos:int64 <span class="arrow">&#45;&gt;</span></span>
<span><span><span>(<span class="type-var">'a</span>,Â <span class="type-var">'b</span>)</span> <a href="../../ocaml/Stdlib/Bigarray/index.html#type-kind">Bigarray.kind</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="../../ocaml/Stdlib/Bigarray/index.html#type-layout">Bigarray.layout</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span>int array</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>,Â <span class="type-var">'b</span>,Â <span class="type-var">'c</span>)</span> <a href="../../ocaml/Stdlib/Bigarray/Genarray/index.html#type-t">Bigarray.Genarray.t</a></span></span></code></div><div class="spec-doc"><p>Memory mapping of a file as a big array. <code>map_file fd kind layout shared dims</code> returns a big array of kind <code>kind</code>, layout <code>layout</code>, and dimensions as specified in <code>dims</code>. The data contained in this big array are the contents of the file referred to by the file descriptor <code>fd</code> (as opened previously with <code>Unix.openfile</code>, for example). The optional <code>pos</code> parameter is the byte offset in the file of the data being mapped; it defaults to 0 (map from the beginning of the file).</p><p>If <code>shared</code> is <code>true</code>, all modifications performed on the array are reflected in the file. This requires that <code>fd</code> be opened with write permissions. If <code>shared</code> is <code>false</code>, modifications performed on the array are done in memory only, using copy-on-write of the modified pages; the underlying file is not affected.</p><p><code>Genarray.map_file</code> is much more efficient than reading the whole file in a big array, modifying that big array, and writing it afterwards.</p><p>To adjust automatically the dimensions of the big array to the actual size of the file, the major dimension (that is, the first dimension for an array with C layout, and the last dimension for an array with Fortran layout) can be given as <code>-1</code>. <code>Genarray.map_file</code> then determines the major dimension from the size of the file. The file must contain an integral number of sub-arrays as determined by the non-major dimensions, otherwise <code>Failure</code> is raised.</p><p>If all dimensions of the big array are given, the file size is matched against the size of the big array. If the file is larger than the big array, only the initial portion of the file is mapped to the big array. If the file is smaller than the big array, the file is automatically grown to the size of the big array. This requires write permissions on <code>fd</code>.</p><p>Array accesses are bounds-checked, but the bounds are determined by the initial call to <code>map_file</code>. Therefore, you should make sure no other process modifies the mapped file while you're accessing it, or a SIGBUS signal may be raised. This happens, for instance, if the file is shrunk.</p><p><code>Invalid_argument</code> or <code>Failure</code> may be raised in cases where argument validation fails.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.8.0 and OCaml 4.06.0</li></ul></div></div><h6 id="operations-on-file-names"><a href="#operations-on-file-names" class="anchor"></a>Operations on file names</h6><div class="odoc-spec"><div class="spec value" id="val-unlink" class="anchored"><a href="#val-unlink" class="anchor"></a><code><span><span class="keyword">val</span> unlink : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Removes the named file</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rename" class="anchored"><a href="#val-rename" class="anchor"></a><code><span><span class="keyword">val</span> rename : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>rename old new</code> changes the name of a file from <code>old</code> to <code>new</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-link" class="anchored"><a href="#val-link" class="anchor"></a><code><span><span class="keyword">val</span> link : <span>?follow:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>link ?follow source dest</code> creates a hard link named <code>dest</code> to the file named <code>source</code>.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">follow</span> <p>indicates whether a <code>source</code> symlink is followed or a hardlink to <code>source</code> itself will be created. On <em>Unix</em> systems this is done using the <code>linkat(2)</code> function. If <code>?follow</code> is not provided, then the <code>link(2)</code> function is used whose behaviour is OS-dependent, but more widely available.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">follow</span> <p>is only available since 2.10.0 and OCaml 4.08.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">ENOSYS</span> <p>On <em>Unix</em> if <code>~follow:_</code> is requested, but linkat is unavailable.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">ENOSYS</span> <p>On <em>Windows</em> if <code>~follow:false</code> is requested.</p></li></ul></div></div><h6 id="file-permissions-and-ownership"><a href="#file-permissions-and-ownership" class="anchor"></a>File permissions and ownership</h6><div class="odoc-spec"><div class="spec type" id="type-access_permission" class="anchored"><a href="#type-access_permission" class="anchor"></a><code><span><span class="keyword">type</span> access_permission</span><span> = <a href="../../ocaml/Unix/index.html#type-access_permission">Unix.access_permission</a></span><span> = </span></code><table><tr id="type-access_permission.R_OK" class="anchored"><td class="def variant constructor"><a href="#type-access_permission.R_OK" class="anchor"></a><code><span>| </span><span><span class="constructor">R_OK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Read permission</p><span class="comment-delim">*)</span></td></tr><tr id="type-access_permission.W_OK" class="anchored"><td class="def variant constructor"><a href="#type-access_permission.W_OK" class="anchor"></a><code><span>| </span><span><span class="constructor">W_OK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Write permission</p><span class="comment-delim">*)</span></td></tr><tr id="type-access_permission.X_OK" class="anchored"><td class="def variant constructor"><a href="#type-access_permission.X_OK" class="anchor"></a><code><span>| </span><span><span class="constructor">X_OK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Execution permission</p><span class="comment-delim">*)</span></td></tr><tr id="type-access_permission.F_OK" class="anchored"><td class="def variant constructor"><a href="#type-access_permission.F_OK" class="anchor"></a><code><span>| </span><span><span class="constructor">F_OK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>File exists</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Flags for the <a href="../../ocaml/Unix/index.html#val-access"><code>Unix.access</code></a> call.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-chmod" class="anchored"><a href="#val-chmod" class="anchor"></a><code><span><span class="keyword">val</span> chmod : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_perm">file_perm</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the permissions of the named file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fchmod" class="anchored"><a href="#val-fchmod" class="anchor"></a><code><span><span class="keyword">val</span> fchmod : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_perm">file_perm</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the permissions of an opened file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-chown" class="anchored"><a href="#val-chown" class="anchor"></a><code><span><span class="keyword">val</span> chown : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the owner uid and owner gid of the named file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fchown" class="anchored"><a href="#val-fchown" class="anchor"></a><code><span><span class="keyword">val</span> fchown : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the owner uid and owner gid of an opened file.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-umask" class="anchored"><a href="#val-umask" class="anchor"></a><code><span><span class="keyword">val</span> umask : <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Set the process's file mode creation mask, and return the previous mask.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-access" class="anchored"><a href="#val-access" class="anchor"></a><code><span><span class="keyword">val</span> access : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-access_permission">access_permission</a> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that the process has the given permissions over the named file. </p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Unix_error</span> <p>otherwise.</p></li></ul></div></div><h6 id="operations-on-file-descriptors"><a href="#operations-on-file-descriptors" class="anchor"></a>Operations on file descriptors</h6><div class="odoc-spec"><div class="spec value" id="val-dup" class="anchored"><a href="#val-dup" class="anchor"></a><code><span><span class="keyword">val</span> dup : <span>?cloexec:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Return a new file descriptor referencing the same file as the given descriptor.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dup2" class="anchored"><a href="#val-dup2" class="anchor"></a><code><span><span class="keyword">val</span> dup2 : <span>?cloexec:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>dup2 fd1 fd2</code> duplicates <code>fd1</code> to <code>fd2</code>, closing <code>fd2</code> if already opened.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_nonblock" class="anchored"><a href="#val-set_nonblock" class="anchor"></a><code><span><span class="keyword">val</span> set_nonblock : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the ``non-blocking'' flag on the given descriptor. When the non-blocking flag is set, reading on a descriptor on which there is temporarily no data available raises EAGAIN or EWOULDBLOCK error instead of blocking; writing on a descriptor on which there is temporarily no room for writing also raises EAGAIN or EWOULDBLOCK.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_nonblock" class="anchored"><a href="#val-clear_nonblock" class="anchor"></a><code><span><span class="keyword">val</span> clear_nonblock : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Clear the ``non-blocking'' flag on the given descriptor. See <a href="../../ocaml/Unix/index.html#val-set_nonblock"><code>Unix.set_nonblock</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_close_on_exec" class="anchored"><a href="#val-set_close_on_exec" class="anchor"></a><code><span><span class="keyword">val</span> set_close_on_exec : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the ``close-on-exec'' flag on the given descriptor. A descriptor with the close-on-exec flag is automatically closed when the current process starts another program with one of the <code>exec</code> functions.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_close_on_exec" class="anchored"><a href="#val-clear_close_on_exec" class="anchor"></a><code><span><span class="keyword">val</span> clear_close_on_exec : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Clear the ``close-on-exec'' flag on the given descriptor. See <a href="../../ocaml/Unix/index.html#val-set_close_on_exec"><code>Unix.set_close_on_exec</code></a>.</p></div></div><h6 id="directories"><a href="#directories" class="anchor"></a>Directories</h6><div class="odoc-spec"><div class="spec value" id="val-mkdir" class="anchored"><a href="#val-mkdir" class="anchor"></a><code><span><span class="keyword">val</span> mkdir : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_perm">file_perm</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Create a directory with the given permissions.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rmdir" class="anchored"><a href="#val-rmdir" class="anchor"></a><code><span><span class="keyword">val</span> rmdir : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Remove an empty directory.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-chdir" class="anchored"><a href="#val-chdir" class="anchor"></a><code><span><span class="keyword">val</span> chdir : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the process working directory.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getcwd" class="anchored"><a href="#val-getcwd" class="anchor"></a><code><span><span class="keyword">val</span> getcwd : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the name of the current working directory.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-chroot" class="anchored"><a href="#val-chroot" class="anchor"></a><code><span><span class="keyword">val</span> chroot : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the process root directory.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-dir_handle" class="anchored"><a href="#type-dir_handle" class="anchor"></a><code><span><span class="keyword">type</span> dir_handle</span><span> = <a href="../../ocaml/Unix/index.html#type-dir_handle">Unix.dir_handle</a></span></code></div><div class="spec-doc"><p>The type of descriptors over opened directories.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-opendir" class="anchored"><a href="#val-opendir" class="anchor"></a><code><span><span class="keyword">val</span> opendir : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-dir_handle">dir_handle</a></span></code></div><div class="spec-doc"><p>Open a descriptor on a directory</p></div></div><div class="odoc-spec"><div class="spec value" id="val-readdir" class="anchored"><a href="#val-readdir" class="anchor"></a><code><span><span class="keyword">val</span> readdir : <span><a href="#type-dir_handle">dir_handle</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the next entry in a directory.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">End_of_file</span> <p>when the end of the directory has been reached.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-rewinddir" class="anchored"><a href="#val-rewinddir" class="anchor"></a><code><span><span class="keyword">val</span> rewinddir : <span><a href="#type-dir_handle">dir_handle</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Reposition the descriptor to the beginning of the directory</p></div></div><div class="odoc-spec"><div class="spec value" id="val-closedir" class="anchored"><a href="#val-closedir" class="anchor"></a><code><span><span class="keyword">val</span> closedir : <span><a href="#type-dir_handle">dir_handle</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Close a directory descriptor.</p></div></div><h6 id="pipes-and-redirections"><a href="#pipes-and-redirections" class="anchor"></a>Pipes and redirections</h6><div class="odoc-spec"><div class="spec value" id="val-pipe" class="anchored"><a href="#val-pipe" class="anchor"></a><code><span><span class="keyword">val</span> pipe : <span>?cloexec:bool <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a> * <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Create a pipe. The first component of the result is opened for reading, that's the exit to the pipe. The second component is opened for writing, that's the entrance to the pipe.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mkfifo" class="anchored"><a href="#val-mkfifo" class="anchor"></a><code><span><span class="keyword">val</span> mkfifo : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_perm">file_perm</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Create a named pipe with the given permissions.</p></div></div><h6 id="high-level-process-and-redirection-management"><a href="#high-level-process-and-redirection-management" class="anchor"></a>High-level process and redirection management</h6><div class="odoc-spec"><div class="spec value" id="val-open_process_in" class="anchored"><a href="#val-open_process_in" class="anchor"></a><code><span><span class="keyword">val</span> open_process_in : <span>?autoclose:bool <span class="arrow">&#45;&gt;</span></span> <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a></span></code></div><div class="spec-doc"><p>High-level pipe and process management. This function runs the given command in parallel with the program. The standard output of the command is redirected to a pipe, which can be read via the returned input. The command is interpreted by the shell <code>/bin/sh</code> (cf. <code>system</code>).</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">autoclose</span> <p>If true (default value), close the input automatically once there is no more content to read. Otherwise, the input will be closed according to the usual rules of module <code>BatIO</code>. Barring very specific needs (e.g. using file descriptors as locks), you probably want <code>autoclose</code> to be <code>true</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true or unspecified, close the process when the <code>input</code> is closed. If false, do nothing, in which case you will need to close the process yourself to ensure proper cleanup.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process_out" class="anchored"><a href="#val-open_process_out" class="anchor"></a><code><span><span class="keyword">val</span> open_process_out : <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-open_process_in"><code>Unix.open_process_in</code></a>, but redirect the standard input of the command to a pipe. Data written to the returned output is sent to the standard input of the command.</p><p><b>Warning</b> writes on outputs are buffered, hence be careful to call <code>Pervasives</code>.flush at the right times to ensure correct synchronization.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true or unspecified, close the process when the <code>output</code> is closed. If false, do nothing, in which case you will need to close the process yourself to ensure proper cleanup.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process" class="anchored"><a href="#val-open_process" class="anchor"></a><code><span><span class="keyword">val</span> open_process : <span>?autoclose:bool <span class="arrow">&#45;&gt;</span></span> <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> * <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-open_process_out"><code>Unix.open_process_out</code></a>, but redirects both the standard input and standard output of the command to pipes connected to the two returned <code>input</code>/<code>output</code>. The returned <code>input</code> is connected to the output of the command, and the returned <code>output</code> to the input of the command.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">autoclose</span> <p>If true (default value), close the input automatically once there is no more content to read. Otherwise, the input will be closed according to the usual rules of module <code>BatIO</code>. Barring very specific needs (e.g. using file descriptors as locks), you probably want <code>autoclose</code> to be <code>true</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true or unspecified, close the process when either the <code>output</code> or the <code>output</code> is closed. If false, do nothing, in which case you will need to close the process yourself to ensure proper cleanup.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process_full" class="anchored"><a href="#val-open_process_full" class="anchor"></a><code><span><span class="keyword">val</span> open_process_full : <span>?autoclose:bool <span class="arrow">&#45;&gt;</span></span> <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span>
<span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> * <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span> * <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a></span></code></div><div class="spec-doc"><p>Similar to <a href="../../ocaml/Unix/index.html#val-open_process"><code>Unix.open_process</code></a>, but the second argument specifies the environment passed to the command. The result is a triple of <code>input</code>/<code>output</code> connected respectively to the standard output, standard input, and standard error of the command.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">autoclose</span> <p>If true (default value), close the input automatically once there is no more content to read. Otherwise, the input will be closed according to the usual rules of module <code>BatIO</code>. Barring very specific needs (e.g. using file descriptors as locks), you probably want <code>autoclose</code> to be <code>true</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true or unspecified, close the process when either the <code>output</code> or the <code>output</code> is closed. If false, do nothing, in which case you will need to close the process yourself to ensure proper cleanup.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process_args_in" class="anchored"><a href="#val-open_process_args_in" class="anchor"></a><code><span><span class="keyword">val</span> open_process_args_in : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a></span></code></div><div class="spec-doc"><p>High-level pipe and process management. The first argument specifies the command to run, and the second argument specifies the argument array passed to the command. This function runs the command in parallel with the program. The standard output of the command is redirected to a pipe, which can be read via the returned input channel.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process_args_out" class="anchored"><a href="#val-open_process_args_out" class="anchor"></a><code><span><span class="keyword">val</span> open_process_args_out : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-open_process_args_in"><code>Unix.open_process_args_in</code></a>, but redirect the standard input of the command to a pipe. Data written to the returned output channel is sent to the standard input of the command. Warning: writes on output channels are buffered, hence be careful to call <a href="../../ocaml/Stdlib/index.html#val-flush"><code>Stdlib.flush</code></a> at the right times to ensure correct synchronization.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process_args" class="anchored"><a href="#val-open_process_args" class="anchor"></a><code><span><span class="keyword">val</span> open_process_args : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a> * <a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-open_process_args_out"><code>Unix.open_process_args_out</code></a>, but redirects both the standard input and standard output of the command to pipes connected to the two returned channels. The input channel is connected to the output of the command, and the output channel to the input of the command.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-open_process_args_full" class="anchored"><a href="#val-open_process_args_full" class="anchor"></a><code><span><span class="keyword">val</span> open_process_args_full : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a> * <a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> * <a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a></span></code></div><div class="spec-doc"><p>Similar to <a href="../../ocaml/Unix/index.html#val-open_process_args"><code>Unix.open_process_args</code></a>, but the third argument specifies the environment passed to the command. The result is a triple of channels connected respectively to the standard output, standard input, and standard error of the command.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-process_in_pid" class="anchored"><a href="#val-process_in_pid" class="anchor"></a><code><span><span class="keyword">val</span> process_in_pid : <span><a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the pid of a process opened via <a href="../../ocaml/Unix/index.html#val-open_process_in"><code>Unix.open_process_in</code></a> or <a href="../../ocaml/Unix/index.html#val-open_process_args_in"><code>Unix.open_process_args_in</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-process_out_pid" class="anchored"><a href="#val-process_out_pid" class="anchor"></a><code><span><span class="keyword">val</span> process_out_pid : <span><a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the pid of a process opened via <a href="../../ocaml/Unix/index.html#val-open_process_out"><code>Unix.open_process_out</code></a> or <a href="../../ocaml/Unix/index.html#val-open_process_args_out"><code>Unix.open_process_args_out</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-process_pid" class="anchored"><a href="#val-process_pid" class="anchor"></a><code><span><span class="keyword">val</span> process_pid : <span><span>(<a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a> * <a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a>)</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the pid of a process opened via <a href="../../ocaml/Unix/index.html#val-open_process"><code>Unix.open_process</code></a> or <a href="../../ocaml/Unix/index.html#val-open_process_args"><code>Unix.open_process_args</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-process_full_pid" class="anchored"><a href="#val-process_full_pid" class="anchor"></a><code><span><span class="keyword">val</span> process_full_pid : <span><span>(<a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a> * <a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> * <a href="../../ocaml/Stdlib/index.html#type-in_channel">in_channel</a>)</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the pid of a process opened via <a href="../../ocaml/Unix/index.html#val-open_process_full"><code>Unix.open_process_full</code></a> or <a href="../../ocaml/Unix/index.html#val-open_process_args_full"><code>Unix.open_process_args_full</code></a>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.10.0 and OCaml 4.08.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-close_process_in" class="anchored"><a href="#val-close_process_in" class="anchor"></a><code><span><span class="keyword">val</span> close_process_in : <span><a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Close <code>input</code> opened by <a href="../../ocaml/Unix/index.html#val-open_process_in"><code>Unix.open_process_in</code></a>, wait for the associated command to terminate, and return its termination status.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Unix_error(EBADF,</span> <p>&quot;close_process_in&quot;, &quot;&quot;) if the argument is not an <code>input</code> opened by <code>Unix</code>.open_process_in.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-close_process_out" class="anchored"><a href="#val-close_process_out" class="anchor"></a><code><span><span class="keyword">val</span> close_process_out : <span><span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Close <code>output</code> opened by <a href="../../ocaml/Unix/index.html#val-open_process_out"><code>Unix.open_process_out</code></a>, wait for the associated command to terminate, and return its termination status.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Unix_error(EBADF,</span> <p>&quot;close_process_out&quot;, &quot;&quot;) if the argument is not an <code>output</code> opened by <code>Unix</code>.open_process_out.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-close_process" class="anchored"><a href="#val-close_process" class="anchor"></a><code><span><span class="keyword">val</span> close_process : <span><span>(<a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> * <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Close <code>input</code>/<code>output</code> opened by <a href="../../ocaml/Unix/index.html#val-open_process"><code>Unix.open_process</code></a>, wait for the associated command to terminate, and return its termination status.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Unix_error(EBADF,</span> <p>&quot;close_process&quot;, &quot;&quot;) if the argument is not pair of <code>input</code>/<code>output</code> opened by <code>Unix</code>.open_process.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-close_process_full" class="anchored"><a href="#val-close_process_full" class="anchor"></a><code><span><span class="keyword">val</span> close_process_full : <span><span>(<a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> * <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span> * <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_status">process_status</a></span></code></div><div class="spec-doc"><p>Close i/o opened by <a href="../../ocaml/Unix/index.html#val-open_process_full"><code>Unix.open_process_full</code></a>, wait for the associated command to terminate, and return its termination status.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Unix_error(EBADF,</span> <p>&quot;close_process_full&quot;, &quot;&quot;) if the argument is not a triple of <code>input</code>/<code>output</code> opened by <code>Unix</code>.open_process_full.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-create_process" class="anchored"><a href="#val-create_process" class="anchor"></a><code><span><span class="keyword">val</span> create_process : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>create_process prog args new_stdin new_stdout new_stderr</code> forks a new process that executes the program in file <code>prog</code>, with arguments <code>args</code>. The pid of the new process is returned immediately; the new process executes concurrently with the current process. The standard input and outputs of the new process are connected to the descriptors <code>new_stdin</code>, <code>new_stdout</code> and <code>new_stderr</code>. Passing e.g. <code>stdout</code> for <code>new_stdout</code> prevents the redirection and causes the new process to have the same standard output as the current process. The executable file <code>prog</code> is searched in the path. The new process has the same environment as the current process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_process_env" class="anchored"><a href="#val-create_process_env" class="anchor"></a><code><span><span class="keyword">val</span> create_process_env : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>create_process_env prog args env new_stdin new_stdout new_stderr</code> works as <a href="../../ocaml/Unix/index.html#val-create_process"><code>Unix.create_process</code></a>, except that the extra argument <code>env</code> specifies the environment passed to the program.</p></div></div><h6 id="symbolic-links"><a href="#symbolic-links" class="anchor"></a>Symbolic links</h6><div class="odoc-spec"><div class="spec value" id="val-symlink" class="anchored"><a href="#val-symlink" class="anchor"></a><code><span><span class="keyword">val</span> symlink : <span>?to_dir:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>symlink ?to_dir source dest</code> creates the file <code>dest</code> as a symbolic link to the file <code>source</code>. On Windows, <code>~to_dir</code> indicates if the symbolic link points to a directory or a file; if omitted, <code>symlink</code> examines <code>source</code> using <code>stat</code> and picks appropriately, if <code>source</code> does not exist then <code>false</code> is assumed (for this reason, it is recommended that the <code>~to_dir</code> parameter be specified in new code). On Unix, <code>~to_dir</code> ignored.</p><p>Windows symbolic links are available in Windows Vista onwards. There are some important differences between Windows symlinks and their POSIX counterparts.</p><p>Windows symbolic links come in two flavours: directory and regular, which designate whether the symbolic link points to a directory or a file. The type must be correct - a directory symlink which actually points to a file cannot be selected with chdir and a file symlink which actually points to a directory cannot be read or written (note that Cygwin's emulation layer ignores this distinction).</p><p>When symbolic links are created to existing targets, this distinction doesn't matter and <code>symlink</code> will automatically create the correct kind of symbolic link. The distinction matters when a symbolic link is created to a non-existent target.</p><p>The other caveat is that by default symbolic links are a privileged operation. Administrators will always need to be running elevated (or with UAC disabled) and by default normal user accounts need to be granted the SeCreateSymbolicLinkPrivilege via Local Security Policy (secpol.msc) or via Active Directory.</p><p><a href="#val-has_symlink"><code>has_symlink</code></a> can be used to check that a process is able to create symbolic links.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.03 the optional argument ?to_dir was added in 4.03</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-has_symlink" class="anchored"><a href="#val-has_symlink" class="anchor"></a><code><span><span class="keyword">val</span> has_symlink : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns <code>true</code> if the user is able to create symbolic links. On Windows, this indicates that the user not only has the SeCreateSymbolicLinkPrivilege but is also running elevated, if necessary. On other platforms, this is simply indicates that the symlink system call is available.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.5.0 and OCaml 4.03</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-readlink" class="anchored"><a href="#val-readlink" class="anchor"></a><code><span><span class="keyword">val</span> readlink : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Read the contents of a link.</p></div></div><h6 id="polling"><a href="#polling" class="anchor"></a>Polling</h6><div class="odoc-spec"><div class="spec value" id="val-select" class="anchored"><a href="#val-select" class="anchor"></a><code><span><span class="keyword">val</span> select : <span><span><a href="#type-file_descr">file_descr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-file_descr">file_descr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-file_descr">file_descr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> list</span> * <span><a href="#type-file_descr">file_descr</a> list</span> * <span><a href="#type-file_descr">file_descr</a> list</span></span></code></div><div class="spec-doc"><p>Wait until some input/output operations become possible on some channels. The three list arguments are, respectively, a set of descriptors to check for reading (first argument), for writing (second argument), or for exceptional conditions (third argument). The fourth argument is the maximal timeout, in seconds; a negative fourth argument means no timeout (unbounded wait). The result is composed of three sets of descriptors: those ready for reading (first component), ready for writing (second component), and over which an exceptional condition is pending (third component).</p></div></div><h6 id="locking"><a href="#locking" class="anchor"></a>Locking</h6><div class="odoc-spec"><div class="spec type" id="type-lock_command" class="anchored"><a href="#type-lock_command" class="anchor"></a><code><span><span class="keyword">type</span> lock_command</span><span> = <a href="../../ocaml/Unix/index.html#type-lock_command">Unix.lock_command</a></span><span> = </span></code><table><tr id="type-lock_command.F_ULOCK" class="anchored"><td class="def variant constructor"><a href="#type-lock_command.F_ULOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">F_ULOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Unlock a region</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock_command.F_LOCK" class="anchored"><td class="def variant constructor"><a href="#type-lock_command.F_LOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">F_LOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Lock a region for writing, and block if already locked</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock_command.F_TLOCK" class="anchored"><td class="def variant constructor"><a href="#type-lock_command.F_TLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">F_TLOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Lock a region for writing, or fail if already locked</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock_command.F_TEST" class="anchored"><td class="def variant constructor"><a href="#type-lock_command.F_TEST" class="anchor"></a><code><span>| </span><span><span class="constructor">F_TEST</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Test a region for other process locks</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock_command.F_RLOCK" class="anchored"><td class="def variant constructor"><a href="#type-lock_command.F_RLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">F_RLOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Lock a region for reading, and block if already locked</p><span class="comment-delim">*)</span></td></tr><tr id="type-lock_command.F_TRLOCK" class="anchored"><td class="def variant constructor"><a href="#type-lock_command.F_TRLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">F_TRLOCK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Lock a region for reading, or fail if already locked</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Commands for <a href="../../ocaml/Unix/index.html#val-lockf"><code>Unix.lockf</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lockf" class="anchored"><a href="#val-lockf" class="anchor"></a><code><span><span class="keyword">val</span> lockf : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-lock_command">lock_command</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>lockf fd cmd size</code> puts a lock on a region of the file opened as <code>fd</code>. The region starts at the current read/write position for <code>fd</code> (as set by <a href="../../ocaml/Unix/index.html#val-lseek"><code>Unix.lseek</code></a>), and extends <code>size</code> bytes forward if <code>size</code> is positive, <code>size</code> bytes backwards if <code>size</code> is negative, or to the end of the file if <code>size</code> is zero. A write lock prevents any other process from acquiring a read or write lock on the region. A read lock prevents any other process from acquiring a write lock on the region, but lets other processes acquire read locks on it.</p><p>The <code>F_LOCK</code> and <code>F_TLOCK</code> commands attempts to put a write lock on the specified region. The <code>F_RLOCK</code> and <code>F_TRLOCK</code> commands attempts to put a read lock on the specified region. If one or several locks put by another process prevent the current process from acquiring the lock, <code>F_LOCK</code> and <code>F_RLOCK</code> block until these locks are removed, while <code>F_TLOCK</code> and <code>F_TRLOCK</code> fail immediately with an exception. The <code>F_ULOCK</code> removes whatever locks the current process has on the specified region. Finally, the <code>F_TEST</code> command tests whether a write lock can be acquired on the specified region, without actually putting a lock. It returns immediately if successful, or fails otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_locked_file" class="anchored"><a href="#val-with_locked_file" class="anchor"></a><code><span><span class="keyword">val</span> with_locked_file : <span>kind:<span>[ `Read <span>| `Write</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>with_locked_file ~kind filename f</code> puts a lock (using lockf) on the whole file named <code>filename</code>, calls <code>f</code> with the file descriptor, and returns its result after the file is unlocked. The file is opened with permissions matching <code>kind</code>, and created if it does not exist yet. If <code>f ()</code> raises an exception the exception is re-raised after the file is unlocked.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">kind</span> <p>specifies whether the lock is read-only or read-write.</p></li></ul></div></div><h6 id="signals"><a href="#signals" class="anchor"></a>Signals</h6><p>Note: installation of signal handlers is performed via the functions <code>Sys</code>.signal and <code>Sys</code>.set_signal.</p><div class="odoc-spec"><div class="spec value" id="val-kill" class="anchored"><a href="#val-kill" class="anchor"></a><code><span><span class="keyword">val</span> kill : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>kill pid sig</code> sends signal number <code>sig</code> to the process with id <code>pid</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-sigprocmask_command" class="anchored"><a href="#type-sigprocmask_command" class="anchor"></a><code><span><span class="keyword">type</span> sigprocmask_command</span><span> = <a href="../../ocaml/Unix/index.html#type-sigprocmask_command">Unix.sigprocmask_command</a></span><span> = </span></code><table><tr id="type-sigprocmask_command.SIG_SETMASK" class="anchored"><td class="def variant constructor"><a href="#type-sigprocmask_command.SIG_SETMASK" class="anchor"></a><code><span>| </span><span><span class="constructor">SIG_SETMASK</span></span></code></td></tr><tr id="type-sigprocmask_command.SIG_BLOCK" class="anchored"><td class="def variant constructor"><a href="#type-sigprocmask_command.SIG_BLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">SIG_BLOCK</span></span></code></td></tr><tr id="type-sigprocmask_command.SIG_UNBLOCK" class="anchored"><td class="def variant constructor"><a href="#type-sigprocmask_command.SIG_UNBLOCK" class="anchor"></a><code><span>| </span><span><span class="constructor">SIG_UNBLOCK</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-sigprocmask" class="anchored"><a href="#val-sigprocmask" class="anchor"></a><code><span><span class="keyword">val</span> sigprocmask : <span><a href="#type-sigprocmask_command">sigprocmask_command</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p><code>sigprocmask cmd sigs</code> changes the set of blocked signals. If <code>cmd</code> is <code>SIG_SETMASK</code>, blocked signals are set to those in the list <code>sigs</code>. If <code>cmd</code> is <code>SIG_BLOCK</code>, the signals in <code>sigs</code> are added to the set of blocked signals. If <code>cmd</code> is <code>SIG_UNBLOCK</code>, the signals in <code>sigs</code> are removed from the set of blocked signals. <code>sigprocmask</code> returns the set of previously blocked signals.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sigpending" class="anchored"><a href="#val-sigpending" class="anchor"></a><code><span><span class="keyword">val</span> sigpending : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Return the set of blocked signals that are currently pending.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sigsuspend" class="anchored"><a href="#val-sigsuspend" class="anchor"></a><code><span><span class="keyword">val</span> sigsuspend : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>sigsuspend sigs</code> atomically sets the blocked signals to <code>sigs</code> and waits for a non-ignored, non-blocked signal to be delivered. On return, the blocked signals are reset to their initial value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pause" class="anchored"><a href="#val-pause" class="anchor"></a><code><span><span class="keyword">val</span> pause : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Wait until a non-ignored, non-blocked signal is delivered.</p></div></div><h6 id="time-functions"><a href="#time-functions" class="anchor"></a>Time functions</h6><div class="odoc-spec"><div class="spec type" id="type-process_times" class="anchored"><a href="#type-process_times" class="anchor"></a><code><span><span class="keyword">type</span> process_times</span><span> = <a href="../../ocaml/Unix/index.html#type-process_times">Unix.process_times</a></span><span> = </span><span>{</span></code><table><tr id="type-process_times.tms_utime" class="anchored"><td class="def record field"><a href="#type-process_times.tms_utime" class="anchor"></a><code><span>tms_utime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>User time for the process</p><span class="comment-delim">*)</span></td></tr><tr id="type-process_times.tms_stime" class="anchored"><td class="def record field"><a href="#type-process_times.tms_stime" class="anchor"></a><code><span>tms_stime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>System time for the process</p><span class="comment-delim">*)</span></td></tr><tr id="type-process_times.tms_cutime" class="anchored"><td class="def record field"><a href="#type-process_times.tms_cutime" class="anchor"></a><code><span>tms_cutime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>User time for the children processes</p><span class="comment-delim">*)</span></td></tr><tr id="type-process_times.tms_cstime" class="anchored"><td class="def record field"><a href="#type-process_times.tms_cstime" class="anchor"></a><code><span>tms_cstime : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>System time for the children processes</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The execution times (CPU times) of a process.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-tm" class="anchored"><a href="#type-tm" class="anchor"></a><code><span><span class="keyword">type</span> tm</span><span> = <a href="../../ocaml/Unix/index.html#type-tm">Unix.tm</a></span><span> = </span><span>{</span></code><table><tr id="type-tm.tm_sec" class="anchored"><td class="def record field"><a href="#type-tm.tm_sec" class="anchor"></a><code><span>tm_sec : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Seconds 0..60</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_min" class="anchored"><td class="def record field"><a href="#type-tm.tm_min" class="anchor"></a><code><span>tm_min : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Minutes 0..59</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_hour" class="anchored"><td class="def record field"><a href="#type-tm.tm_hour" class="anchor"></a><code><span>tm_hour : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Hours 0..23</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_mday" class="anchored"><td class="def record field"><a href="#type-tm.tm_mday" class="anchor"></a><code><span>tm_mday : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Day of month 1..31</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_mon" class="anchored"><td class="def record field"><a href="#type-tm.tm_mon" class="anchor"></a><code><span>tm_mon : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Month of year 0..11</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_year" class="anchored"><td class="def record field"><a href="#type-tm.tm_year" class="anchor"></a><code><span>tm_year : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Year - 1900</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_wday" class="anchored"><td class="def record field"><a href="#type-tm.tm_wday" class="anchor"></a><code><span>tm_wday : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Day of week (Sunday is 0)</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_yday" class="anchored"><td class="def record field"><a href="#type-tm.tm_yday" class="anchor"></a><code><span>tm_yday : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Day of year 0..365</p><span class="comment-delim">*)</span></td></tr><tr id="type-tm.tm_isdst" class="anchored"><td class="def record field"><a href="#type-tm.tm_isdst" class="anchor"></a><code><span>tm_isdst : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Daylight time savings in effect</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The type representing wallclock time and calendar date.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time" class="anchored"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span>unit <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Return the current time since 00:00:00 GMT, Jan. 1, 1970, in seconds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gettimeofday" class="anchored"><a href="#val-gettimeofday" class="anchor"></a><code><span><span class="keyword">val</span> gettimeofday : <span>unit <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-time"><code>Unix.time</code></a>, but with resolution better than 1 second.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gmtime" class="anchored"><a href="#val-gmtime" class="anchor"></a><code><span><span class="keyword">val</span> gmtime : <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-tm">tm</a></span></code></div><div class="spec-doc"><p>Convert a time in seconds, as returned by <a href="../../ocaml/Unix/index.html#val-time"><code>Unix.time</code></a>, into a date and a time. Assumes UTC (Coordinated Universal Time), also known as GMT.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-localtime" class="anchored"><a href="#val-localtime" class="anchor"></a><code><span><span class="keyword">val</span> localtime : <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-tm">tm</a></span></code></div><div class="spec-doc"><p>Convert a time in seconds, as returned by <a href="../../ocaml/Unix/index.html#val-time"><code>Unix.time</code></a>, into a date and a time. Assumes the local time zone.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mktime" class="anchored"><a href="#val-mktime" class="anchor"></a><code><span><span class="keyword">val</span> mktime : <span><a href="#type-tm">tm</a> <span class="arrow">&#45;&gt;</span></span> float * <a href="#type-tm">tm</a></span></code></div><div class="spec-doc"><p>Convert a date and time, specified by the <code>tm</code> argument, into a time in seconds, as returned by <a href="../../ocaml/Unix/index.html#val-time"><code>Unix.time</code></a>. The <code>tm_isdst</code>, <code>tm_wday</code> and <code>tm_yday</code> fields of <code>tm</code> are ignored. Also return a normalized copy of the given <code>tm</code> record, with the <code>tm_wday</code>, <code>tm_yday</code>, and <code>tm_isdst</code> fields recomputed from the other fields, and the other fields normalized (so that, e.g., 40 October is changed into 9 November). The <code>tm</code> argument is interpreted in the local time zone.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-alarm" class="anchored"><a href="#val-alarm" class="anchor"></a><code><span><span class="keyword">val</span> alarm : <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Schedule a <code>SIGALRM</code> signal after the given number of seconds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sleep" class="anchored"><a href="#val-sleep" class="anchor"></a><code><span><span class="keyword">val</span> sleep : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Stop execution for the given number of seconds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sleepf" class="anchored"><a href="#val-sleepf" class="anchor"></a><code><span><span class="keyword">val</span> sleepf : <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Stop execution for the given number of seconds. Like <code>sleep</code>, but fractions of seconds are supported.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.5.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-times" class="anchored"><a href="#val-times" class="anchor"></a><code><span><span class="keyword">val</span> times : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-process_times">process_times</a></span></code></div><div class="spec-doc"><p>Return the execution times of the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-utimes" class="anchored"><a href="#val-utimes" class="anchor"></a><code><span><span class="keyword">val</span> utimes : <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the last access time (second arg) and last modification time (third arg) for a file. Times are expressed in seconds from 00:00:00 GMT, Jan. 1, 1970. A time of <code>0.0</code> is interpreted as the current time.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-interval_timer" class="anchored"><a href="#type-interval_timer" class="anchor"></a><code><span><span class="keyword">type</span> interval_timer</span><span> = <a href="../../ocaml/Unix/index.html#type-interval_timer">Unix.interval_timer</a></span><span> = </span></code><table><tr id="type-interval_timer.ITIMER_REAL" class="anchored"><td class="def variant constructor"><a href="#type-interval_timer.ITIMER_REAL" class="anchor"></a><code><span>| </span><span><span class="constructor">ITIMER_REAL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>decrements in real time, and sends the signal <code>SIGALRM</code> when expired.</p><span class="comment-delim">*)</span></td></tr><tr id="type-interval_timer.ITIMER_VIRTUAL" class="anchored"><td class="def variant constructor"><a href="#type-interval_timer.ITIMER_VIRTUAL" class="anchor"></a><code><span>| </span><span><span class="constructor">ITIMER_VIRTUAL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>decrements in process virtual time, and sends <code>SIGVTALRM</code> when expired.</p><span class="comment-delim">*)</span></td></tr><tr id="type-interval_timer.ITIMER_PROF" class="anchored"><td class="def variant constructor"><a href="#type-interval_timer.ITIMER_PROF" class="anchor"></a><code><span>| </span><span><span class="constructor">ITIMER_PROF</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>(for profiling) decrements both when the process is running and when the system is running on behalf of the process; it sends <code>SIGPROF</code> when expired.</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The three kinds of interval timers.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-interval_timer_status" class="anchored"><a href="#type-interval_timer_status" class="anchor"></a><code><span><span class="keyword">type</span> interval_timer_status</span><span> = <a href="../../ocaml/Unix/index.html#type-interval_timer_status">Unix.interval_timer_status</a></span><span> = </span><span>{</span></code><table><tr id="type-interval_timer_status.it_interval" class="anchored"><td class="def record field"><a href="#type-interval_timer_status.it_interval" class="anchor"></a><code><span>it_interval : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Period</p><span class="comment-delim">*)</span></td></tr><tr id="type-interval_timer_status.it_value" class="anchored"><td class="def record field"><a href="#type-interval_timer_status.it_value" class="anchor"></a><code><span>it_value : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Current value of the timer</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The type describing the status of an interval timer</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getitimer" class="anchored"><a href="#val-getitimer" class="anchor"></a><code><span><span class="keyword">val</span> getitimer : <span><a href="#type-interval_timer">interval_timer</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-interval_timer_status">interval_timer_status</a></span></code></div><div class="spec-doc"><p>Return the current status of the given interval timer.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setitimer" class="anchored"><a href="#val-setitimer" class="anchor"></a><code><span><span class="keyword">val</span> setitimer : <span><a href="#type-interval_timer">interval_timer</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-interval_timer_status">interval_timer_status</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-interval_timer_status">interval_timer_status</a></span></code></div><div class="spec-doc"><p><code>setitimer t s</code> sets the interval timer <code>t</code> and returns its previous status. The <code>s</code> argument is interpreted as follows: <code>s.it_value</code>, if nonzero, is the time to the next timer expiration; <code>s.it_interval</code>, if nonzero, specifies a value to be used in reloading it_value when the timer expires. Setting <code>s.it_value</code> to zero disable the timer. Setting <code>s.it_interval</code> to zero causes the timer to be disabled after its next expiration.</p></div></div><h6 id="user-id,-group-id"><a href="#user-id,-group-id" class="anchor"></a>User id, group id</h6><div class="odoc-spec"><div class="spec value" id="val-getuid" class="anchored"><a href="#val-getuid" class="anchor"></a><code><span><span class="keyword">val</span> getuid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the user id of the user executing the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-geteuid" class="anchored"><a href="#val-geteuid" class="anchor"></a><code><span><span class="keyword">val</span> geteuid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the effective user id under which the process runs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setuid" class="anchored"><a href="#val-setuid" class="anchor"></a><code><span><span class="keyword">val</span> setuid : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the real user id and effective user id for the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getgid" class="anchored"><a href="#val-getgid" class="anchor"></a><code><span><span class="keyword">val</span> getgid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the group id of the user executing the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getegid" class="anchored"><a href="#val-getegid" class="anchor"></a><code><span><span class="keyword">val</span> getegid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the effective group id under which the process runs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setgid" class="anchored"><a href="#val-setgid" class="anchor"></a><code><span><span class="keyword">val</span> setgid : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the real group id and effective group id for the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getgroups" class="anchored"><a href="#val-getgroups" class="anchor"></a><code><span><span class="keyword">val</span> getgroups : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>int array</span></span></code></div><div class="spec-doc"><p>Return the list of groups to which the user executing the process belongs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setgroups" class="anchored"><a href="#val-setgroups" class="anchor"></a><code><span><span class="keyword">val</span> setgroups : <span><span>int array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>setgroups groups</code> sets the supplementary group IDs for the calling process. Appropriate privileges are required.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-initgroups" class="anchored"><a href="#val-initgroups" class="anchor"></a><code><span><span class="keyword">val</span> initgroups : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>initgroups user group</code> initializes the group access list by reading the group database /etc/group and using all groups of which <code>user</code> is a member. The additional group <code>group</code> is also added to the list.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-passwd_entry" class="anchored"><a href="#type-passwd_entry" class="anchor"></a><code><span><span class="keyword">type</span> passwd_entry</span><span> = <a href="../../ocaml/Unix/index.html#type-passwd_entry">Unix.passwd_entry</a></span><span> = </span><span>{</span></code><table><tr id="type-passwd_entry.pw_name" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_name" class="anchor"></a><code><span>pw_name : string;</span></code></td></tr><tr id="type-passwd_entry.pw_passwd" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_passwd" class="anchor"></a><code><span>pw_passwd : string;</span></code></td></tr><tr id="type-passwd_entry.pw_uid" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_uid" class="anchor"></a><code><span>pw_uid : int;</span></code></td></tr><tr id="type-passwd_entry.pw_gid" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_gid" class="anchor"></a><code><span>pw_gid : int;</span></code></td></tr><tr id="type-passwd_entry.pw_gecos" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_gecos" class="anchor"></a><code><span>pw_gecos : string;</span></code></td></tr><tr id="type-passwd_entry.pw_dir" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_dir" class="anchor"></a><code><span>pw_dir : string;</span></code></td></tr><tr id="type-passwd_entry.pw_shell" class="anchored"><td class="def record field"><a href="#type-passwd_entry.pw_shell" class="anchor"></a><code><span>pw_shell : string;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Structure of entries in the <code>passwd</code> database.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-group_entry" class="anchored"><a href="#type-group_entry" class="anchor"></a><code><span><span class="keyword">type</span> group_entry</span><span> = <a href="../../ocaml/Unix/index.html#type-group_entry">Unix.group_entry</a></span><span> = </span><span>{</span></code><table><tr id="type-group_entry.gr_name" class="anchored"><td class="def record field"><a href="#type-group_entry.gr_name" class="anchor"></a><code><span>gr_name : string;</span></code></td></tr><tr id="type-group_entry.gr_passwd" class="anchored"><td class="def record field"><a href="#type-group_entry.gr_passwd" class="anchor"></a><code><span>gr_passwd : string;</span></code></td></tr><tr id="type-group_entry.gr_gid" class="anchored"><td class="def record field"><a href="#type-group_entry.gr_gid" class="anchor"></a><code><span>gr_gid : int;</span></code></td></tr><tr id="type-group_entry.gr_mem" class="anchored"><td class="def record field"><a href="#type-group_entry.gr_mem" class="anchor"></a><code><span>gr_mem : <span>string array</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Structure of entries in the <code>groups</code> database.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getlogin" class="anchored"><a href="#val-getlogin" class="anchor"></a><code><span><span class="keyword">val</span> getlogin : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the login name of the user executing the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getpwnam" class="anchored"><a href="#val-getpwnam" class="anchor"></a><code><span><span class="keyword">val</span> getpwnam : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-passwd_entry">passwd_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>passwd</code> with the given name.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getgrnam" class="anchored"><a href="#val-getgrnam" class="anchor"></a><code><span><span class="keyword">val</span> getgrnam : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-group_entry">group_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>group</code> with the given name.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getpwuid" class="anchored"><a href="#val-getpwuid" class="anchor"></a><code><span><span class="keyword">val</span> getpwuid : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-passwd_entry">passwd_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>passwd</code> with the given user id.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getgrgid" class="anchored"><a href="#val-getgrgid" class="anchor"></a><code><span><span class="keyword">val</span> getgrgid : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-group_entry">group_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>group</code> with the given group id.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><h6 id="internet-addresses"><a href="#internet-addresses" class="anchor"></a>Internet addresses</h6><div class="odoc-spec"><div class="spec type" id="type-inet_addr" class="anchored"><a href="#type-inet_addr" class="anchor"></a><code><span><span class="keyword">type</span> inet_addr</span><span> = <a href="../../ocaml/Unix/index.html#type-inet_addr">Unix.inet_addr</a></span></code></div><div class="spec-doc"><p>The abstract type of Internet addresses.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inet_addr_of_string" class="anchored"><a href="#val-inet_addr_of_string" class="anchor"></a><code><span><span class="keyword">val</span> inet_addr_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-inet_addr">inet_addr</a></span></code></div><div class="spec-doc"><p>Conversion from the printable representation of an Internet address to its internal representation. The argument string consists of 4 numbers separated by periods (<code>XXX.YYY.ZZZ.TTT</code>) for IPv4 addresses, and up to 8 numbers separated by colons for IPv6 addresses. </p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Failure</span> <p>when given a string that does not match these formats.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-string_of_inet_addr" class="anchored"><a href="#val-string_of_inet_addr" class="anchor"></a><code><span><span class="keyword">val</span> string_of_inet_addr : <span><a href="#type-inet_addr">inet_addr</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the printable representation of the given Internet address. See <a href="../../ocaml/Unix/index.html#val-inet_addr_of_string"><code>Unix.inet_addr_of_string</code></a> for a description of the printable representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inet_addr_any" class="anchored"><a href="#val-inet_addr_any" class="anchor"></a><code><span><span class="keyword">val</span> inet_addr_any : <a href="#type-inet_addr">inet_addr</a></span></code></div><div class="spec-doc"><p>A special IPv4 address, for use only with <code>bind</code>, representing all the Internet addresses that the host machine possesses.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inet_addr_loopback" class="anchored"><a href="#val-inet_addr_loopback" class="anchor"></a><code><span><span class="keyword">val</span> inet_addr_loopback : <a href="#type-inet_addr">inet_addr</a></span></code></div><div class="spec-doc"><p>A special IPv4 address representing the host machine (<code>127.0.0.1</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inet6_addr_any" class="anchored"><a href="#val-inet6_addr_any" class="anchor"></a><code><span><span class="keyword">val</span> inet6_addr_any : <a href="#type-inet_addr">inet_addr</a></span></code></div><div class="spec-doc"><p>A special IPv6 address, for use only with <code>bind</code>, representing all the Internet addresses that the host machine possesses.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inet6_addr_loopback" class="anchored"><a href="#val-inet6_addr_loopback" class="anchor"></a><code><span><span class="keyword">val</span> inet6_addr_loopback : <a href="#type-inet_addr">inet_addr</a></span></code></div><div class="spec-doc"><p>A special IPv6 address representing the host machine (<code>::1</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_inet6_addr" class="anchored"><a href="#val-is_inet6_addr" class="anchor"></a><code><span><span class="keyword">val</span> is_inet6_addr : <span><a href="#type-inet_addr">inet_addr</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Whether the given <code>inet_addr</code> is an IPv6 address.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 3.3.0 and 4.12.0</li></ul></div></div><h6 id="sockets"><a href="#sockets" class="anchor"></a>Sockets</h6><div class="odoc-spec"><div class="spec type" id="type-socket_domain" class="anchored"><a href="#type-socket_domain" class="anchor"></a><code><span><span class="keyword">type</span> socket_domain</span><span> = <a href="../../ocaml/Unix/index.html#type-socket_domain">Unix.socket_domain</a></span><span> = </span></code><table><tr id="type-socket_domain.PF_UNIX" class="anchored"><td class="def variant constructor"><a href="#type-socket_domain.PF_UNIX" class="anchor"></a><code><span>| </span><span><span class="constructor">PF_UNIX</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Unix domain</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_domain.PF_INET" class="anchored"><td class="def variant constructor"><a href="#type-socket_domain.PF_INET" class="anchor"></a><code><span>| </span><span><span class="constructor">PF_INET</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Internet domain (IPv4)</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_domain.PF_INET6" class="anchored"><td class="def variant constructor"><a href="#type-socket_domain.PF_INET6" class="anchor"></a><code><span>| </span><span><span class="constructor">PF_INET6</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Internet domain (IPv6)</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The type of socket domains. Not all platforms support IPv6 sockets (type <code>PF_INET6</code>).</p></div></div><div class="odoc-spec"><div class="spec type" id="type-socket_type" class="anchored"><a href="#type-socket_type" class="anchor"></a><code><span><span class="keyword">type</span> socket_type</span><span> = <a href="../../ocaml/Unix/index.html#type-socket_type">Unix.socket_type</a></span><span> = </span></code><table><tr id="type-socket_type.SOCK_STREAM" class="anchored"><td class="def variant constructor"><a href="#type-socket_type.SOCK_STREAM" class="anchor"></a><code><span>| </span><span><span class="constructor">SOCK_STREAM</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Stream socket</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_type.SOCK_DGRAM" class="anchored"><td class="def variant constructor"><a href="#type-socket_type.SOCK_DGRAM" class="anchor"></a><code><span>| </span><span><span class="constructor">SOCK_DGRAM</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Datagram socket</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_type.SOCK_RAW" class="anchored"><td class="def variant constructor"><a href="#type-socket_type.SOCK_RAW" class="anchor"></a><code><span>| </span><span><span class="constructor">SOCK_RAW</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Raw socket</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_type.SOCK_SEQPACKET" class="anchored"><td class="def variant constructor"><a href="#type-socket_type.SOCK_SEQPACKET" class="anchor"></a><code><span>| </span><span><span class="constructor">SOCK_SEQPACKET</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Sequenced packets socket</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The type of socket kinds, specifying the semantics of communications.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-sockaddr" class="anchored"><a href="#type-sockaddr" class="anchor"></a><code><span><span class="keyword">type</span> sockaddr</span><span> = <a href="../../ocaml/Unix/index.html#type-sockaddr">Unix.sockaddr</a></span><span> = </span></code><table><tr id="type-sockaddr.ADDR_UNIX" class="anchored"><td class="def variant constructor"><a href="#type-sockaddr.ADDR_UNIX" class="anchor"></a><code><span>| </span><span><span class="constructor">ADDR_UNIX</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-sockaddr.ADDR_INET" class="anchored"><td class="def variant constructor"><a href="#type-sockaddr.ADDR_INET" class="anchor"></a><code><span>| </span><span><span class="constructor">ADDR_INET</span> <span class="keyword">of</span> <a href="#type-inet_addr">inet_addr</a> * int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The type of socket addresses. <code>ADDR_UNIX name</code> is a socket address in the Unix domain; <code>name</code> is a file name in the file system. <code>ADDR_INET(addr,port)</code> is a socket address in the Internet domain; <code>addr</code> is the Internet address of the machine, and <code>port</code> is the port number.</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-socket" class="anchored"><a href="#val-socket" class="anchor"></a><code><span><span class="keyword">val</span> socket : <span>?cloexec:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_domain">socket_domain</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_type">socket_type</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Create a new socket in the given domain, and with the given kind. The third argument is the protocol type; 0 selects the default protocol for that kind of sockets.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-domain_of_sockaddr" class="anchored"><a href="#val-domain_of_sockaddr" class="anchor"></a><code><span><span class="keyword">val</span> domain_of_sockaddr : <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-socket_domain">socket_domain</a></span></code></div><div class="spec-doc"><p>Return the socket domain adequate for the given socket address.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-socketpair" class="anchored"><a href="#val-socketpair" class="anchor"></a><code><span><span class="keyword">val</span> socketpair : <span>?cloexec:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_domain">socket_domain</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_type">socket_type</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a> * <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><p>Create a pair of unnamed sockets, connected together.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-accept" class="anchored"><a href="#val-accept" class="anchor"></a><code><span><span class="keyword">val</span> accept : <span>?cloexec:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a> * <a href="#type-sockaddr">sockaddr</a></span></code></div><div class="spec-doc"><p>Accept connections on the given socket. The returned descriptor is a socket connected to the client; the returned address is the address of the connecting client.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bind" class="anchored"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Bind a socket to an address.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-connect" class="anchored"><a href="#val-connect" class="anchor"></a><code><span><span class="keyword">val</span> connect : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Connect a socket to an address.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-listen" class="anchored"><a href="#val-listen" class="anchor"></a><code><span><span class="keyword">val</span> listen : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set up a socket for receiving connection requests. The integer argument is the maximal number of pending requests.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-shutdown_command" class="anchored"><a href="#type-shutdown_command" class="anchor"></a><code><span><span class="keyword">type</span> shutdown_command</span><span> = <a href="../../ocaml/Unix/index.html#type-shutdown_command">Unix.shutdown_command</a></span><span> = </span></code><table><tr id="type-shutdown_command.SHUTDOWN_RECEIVE" class="anchored"><td class="def variant constructor"><a href="#type-shutdown_command.SHUTDOWN_RECEIVE" class="anchor"></a><code><span>| </span><span><span class="constructor">SHUTDOWN_RECEIVE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Close for receiving</p><span class="comment-delim">*)</span></td></tr><tr id="type-shutdown_command.SHUTDOWN_SEND" class="anchored"><td class="def variant constructor"><a href="#type-shutdown_command.SHUTDOWN_SEND" class="anchor"></a><code><span>| </span><span><span class="constructor">SHUTDOWN_SEND</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Close for sending</p><span class="comment-delim">*)</span></td></tr><tr id="type-shutdown_command.SHUTDOWN_ALL" class="anchored"><td class="def variant constructor"><a href="#type-shutdown_command.SHUTDOWN_ALL" class="anchor"></a><code><span>| </span><span><span class="constructor">SHUTDOWN_ALL</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Close both</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The type of commands for <code>shutdown</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-shutdown" class="anchored"><a href="#val-shutdown" class="anchor"></a><code><span><span class="keyword">val</span> shutdown : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-shutdown_command">shutdown_command</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Shutdown a socket connection. <code>SHUTDOWN_SEND</code> as second argument causes reads on the other end of the connection to return an end-of-file condition. <code>SHUTDOWN_RECEIVE</code> causes writes on the other end of the connection to return a closed pipe condition (<code>SIGPIPE</code> signal).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getsockname" class="anchored"><a href="#val-getsockname" class="anchor"></a><code><span><span class="keyword">val</span> getsockname : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-sockaddr">sockaddr</a></span></code></div><div class="spec-doc"><p>Return the address of the given socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getpeername" class="anchored"><a href="#val-getpeername" class="anchor"></a><code><span><span class="keyword">val</span> getpeername : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-sockaddr">sockaddr</a></span></code></div><div class="spec-doc"><p>Return the address of the host connected to the given socket.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-msg_flag" class="anchored"><a href="#type-msg_flag" class="anchor"></a><code><span><span class="keyword">type</span> msg_flag</span><span> = <a href="../../ocaml/Unix/index.html#type-msg_flag">Unix.msg_flag</a></span><span> = </span></code><table><tr id="type-msg_flag.MSG_OOB" class="anchored"><td class="def variant constructor"><a href="#type-msg_flag.MSG_OOB" class="anchor"></a><code><span>| </span><span><span class="constructor">MSG_OOB</span></span></code></td></tr><tr id="type-msg_flag.MSG_DONTROUTE" class="anchored"><td class="def variant constructor"><a href="#type-msg_flag.MSG_DONTROUTE" class="anchor"></a><code><span>| </span><span><span class="constructor">MSG_DONTROUTE</span></span></code></td></tr><tr id="type-msg_flag.MSG_PEEK" class="anchored"><td class="def variant constructor"><a href="#type-msg_flag.MSG_PEEK" class="anchor"></a><code><span>| </span><span><span class="constructor">MSG_PEEK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The flags for <a href="../../ocaml/Unix/index.html#val-recv"><code>Unix.recv</code></a>, <a href="../../ocaml/Unix/index.html#val-recvfrom"><code>Unix.recvfrom</code></a>, <a href="../../ocaml/Unix/index.html#val-send"><code>Unix.send</code></a> and <a href="../../ocaml/Unix/index.html#val-sendto"><code>Unix.sendto</code></a>.</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-recv" class="anchored"><a href="#val-recv" class="anchor"></a><code><span><span class="keyword">val</span> recv : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-msg_flag">msg_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Receive data from a connected socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-recvfrom" class="anchored"><a href="#val-recvfrom" class="anchor"></a><code><span><span class="keyword">val</span> recvfrom : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-msg_flag">msg_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> int * <a href="#type-sockaddr">sockaddr</a></span></code></div><div class="spec-doc"><p>Receive data from an unconnected socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-send" class="anchored"><a href="#val-send" class="anchor"></a><code><span><span class="keyword">val</span> send : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-msg_flag">msg_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Send data over a connected socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-send_substring" class="anchored"><a href="#val-send_substring" class="anchor"></a><code><span><span class="keyword">val</span> send_substring : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-msg_flag">msg_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>send</code>, but take the data from a string instead of a byte sequence.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.3.0</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-sendto" class="anchored"><a href="#val-sendto" class="anchor"></a><code><span><span class="keyword">val</span> sendto : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Bytes.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-msg_flag">msg_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Send data over an unconnected socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sendto_substring" class="anchored"><a href="#val-sendto_substring" class="anchor"></a><code><span><span class="keyword">val</span> sendto_substring : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-msg_flag">msg_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>sendto</code>, but take the data from a string instead of a byte sequence.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 2.3.0</li></ul></div></div><h6 id="socket-options"><a href="#socket-options" class="anchor"></a>Socket options</h6><div class="odoc-spec"><div class="spec type" id="type-socket_bool_option" class="anchored"><a href="#type-socket_bool_option" class="anchor"></a><code><span><span class="keyword">type</span> socket_bool_option</span><span> = <a href="../../ocaml/Unix/index.html#type-socket_bool_option">Unix.socket_bool_option</a></span><span> = </span></code><table><tr id="type-socket_bool_option.SO_DEBUG" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_DEBUG" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_DEBUG</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Record debugging information</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_BROADCAST" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_BROADCAST" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_BROADCAST</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Permit sending of broadcast messages</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_REUSEADDR" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_REUSEADDR" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_REUSEADDR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Allow reuse of local addresses for bind</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_KEEPALIVE" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_KEEPALIVE" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_KEEPALIVE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Keep connection active</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_DONTROUTE" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_DONTROUTE" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_DONTROUTE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Bypass the standard routing algorithms</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_OOBINLINE" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_OOBINLINE" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_OOBINLINE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Leave out-of-band data in line</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_ACCEPTCONN" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_ACCEPTCONN" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_ACCEPTCONN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Report whether socket listening is enabled</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.TCP_NODELAY" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.TCP_NODELAY" class="anchor"></a><code><span>| </span><span><span class="constructor">TCP_NODELAY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Control the Nagle algorithm for TCP sockets</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.IPV6_ONLY" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.IPV6_ONLY" class="anchor"></a><code><span>| </span><span><span class="constructor">IPV6_ONLY</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Forbid binding an IPv6 socket to an IPv4 address</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_bool_option.SO_REUSEPORT" class="anchored"><td class="def variant constructor"><a href="#type-socket_bool_option.SO_REUSEPORT" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_REUSEPORT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Allow connection active</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The socket options that can be consulted with <a href="../../ocaml/Unix/index.html#val-getsockopt"><code>Unix.getsockopt</code></a> and modified with <a href="../../ocaml/Unix/index.html#val-setsockopt"><code>Unix.setsockopt</code></a>. These options have a boolean (<code>true</code>/<code>false</code>) value.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-socket_int_option" class="anchored"><a href="#type-socket_int_option" class="anchor"></a><code><span><span class="keyword">type</span> socket_int_option</span><span> = <a href="../../ocaml/Unix/index.html#type-socket_int_option">Unix.socket_int_option</a></span><span> = </span></code><table><tr id="type-socket_int_option.SO_SNDBUF" class="anchored"><td class="def variant constructor"><a href="#type-socket_int_option.SO_SNDBUF" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_SNDBUF</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Size of send buffer</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_int_option.SO_RCVBUF" class="anchored"><td class="def variant constructor"><a href="#type-socket_int_option.SO_RCVBUF" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_RCVBUF</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Size of received buffer</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_int_option.SO_ERROR" class="anchored"><td class="def variant constructor"><a href="#type-socket_int_option.SO_ERROR" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_ERROR</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Deprecated. Use <a href="../../ocaml/Unix/index.html#val-getsockopt_error"><code>Unix.getsockopt_error</code></a> instead.</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_int_option.SO_TYPE" class="anchored"><td class="def variant constructor"><a href="#type-socket_int_option.SO_TYPE" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_TYPE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Report the socket type</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_int_option.SO_RCVLOWAT" class="anchored"><td class="def variant constructor"><a href="#type-socket_int_option.SO_RCVLOWAT" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_RCVLOWAT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Minimum number of bytes to process for input operations</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_int_option.SO_SNDLOWAT" class="anchored"><td class="def variant constructor"><a href="#type-socket_int_option.SO_SNDLOWAT" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_SNDLOWAT</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Minimum number of bytes to process for output operations</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The socket options that can be consulted with <a href="../../ocaml/Unix/index.html#val-getsockopt_int"><code>Unix.getsockopt_int</code></a> and modified with <a href="../../ocaml/Unix/index.html#val-setsockopt_int"><code>Unix.setsockopt_int</code></a>. These options have an integer value.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-socket_optint_option" class="anchored"><a href="#type-socket_optint_option" class="anchor"></a><code><span><span class="keyword">type</span> socket_optint_option</span><span> = <a href="../../ocaml/Unix/index.html#type-socket_optint_option">Unix.socket_optint_option</a></span><span> = </span></code><table><tr id="type-socket_optint_option.SO_LINGER" class="anchored"><td class="def variant constructor"><a href="#type-socket_optint_option.SO_LINGER" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_LINGER</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Whether to linger on closed connections that have data present, and for how long (in seconds)</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The socket options that can be consulted with <a href="../../ocaml/Unix/index.html#val-getsockopt_optint"><code>Unix.getsockopt_optint</code></a> and modified with <a href="../../ocaml/Unix/index.html#val-setsockopt_optint"><code>Unix.setsockopt_optint</code></a>. These options have a value of type <code>int option</code>, with <code>None</code> meaning ``disabled''.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-socket_float_option" class="anchored"><a href="#type-socket_float_option" class="anchor"></a><code><span><span class="keyword">type</span> socket_float_option</span><span> = <a href="../../ocaml/Unix/index.html#type-socket_float_option">Unix.socket_float_option</a></span><span> = </span></code><table><tr id="type-socket_float_option.SO_RCVTIMEO" class="anchored"><td class="def variant constructor"><a href="#type-socket_float_option.SO_RCVTIMEO" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_RCVTIMEO</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Timeout for input operations</p><span class="comment-delim">*)</span></td></tr><tr id="type-socket_float_option.SO_SNDTIMEO" class="anchored"><td class="def variant constructor"><a href="#type-socket_float_option.SO_SNDTIMEO" class="anchor"></a><code><span>| </span><span><span class="constructor">SO_SNDTIMEO</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Timeout for output operations</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The socket options that can be consulted with <a href="../../ocaml/Unix/index.html#val-getsockopt_float"><code>Unix.getsockopt_float</code></a> and modified with <a href="../../ocaml/Unix/index.html#val-setsockopt_float"><code>Unix.setsockopt_float</code></a>. These options have a floating-point value representing a time in seconds. The value 0 means infinite timeout.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getsockopt" class="anchored"><a href="#val-getsockopt" class="anchor"></a><code><span><span class="keyword">val</span> getsockopt : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_bool_option">socket_bool_option</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Return the current status of a boolean-valued option in the given socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setsockopt" class="anchored"><a href="#val-setsockopt" class="anchor"></a><code><span><span class="keyword">val</span> setsockopt : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_bool_option">socket_bool_option</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set or clear a boolean-valued option in the given socket.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getsockopt_int" class="anchored"><a href="#val-getsockopt_int" class="anchor"></a><code><span><span class="keyword">val</span> getsockopt_int : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_int_option">socket_int_option</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-getsockopt"><code>Unix.getsockopt</code></a> for an integer-valued socket option.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setsockopt_int" class="anchored"><a href="#val-setsockopt_int" class="anchor"></a><code><span><span class="keyword">val</span> setsockopt_int : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_int_option">socket_int_option</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-setsockopt"><code>Unix.setsockopt</code></a> for an integer-valued socket option.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getsockopt_optint" class="anchored"><a href="#val-getsockopt_optint" class="anchor"></a><code><span><span class="keyword">val</span> getsockopt_optint : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_optint_option">socket_optint_option</a> <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-getsockopt"><code>Unix.getsockopt</code></a> for a socket option whose value is an <code>int option</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setsockopt_optint" class="anchored"><a href="#val-setsockopt_optint" class="anchor"></a><code><span><span class="keyword">val</span> setsockopt_optint : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_optint_option">socket_optint_option</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-setsockopt"><code>Unix.setsockopt</code></a> for a socket option whose value is an <code>int option</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getsockopt_float" class="anchored"><a href="#val-getsockopt_float" class="anchor"></a><code><span><span class="keyword">val</span> getsockopt_float : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_float_option">socket_float_option</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-getsockopt"><code>Unix.getsockopt</code></a> for a socket option whose value is a floating-point number.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setsockopt_float" class="anchored"><a href="#val-setsockopt_float" class="anchor"></a><code><span><span class="keyword">val</span> setsockopt_float : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-socket_float_option">socket_float_option</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="../../ocaml/Unix/index.html#val-setsockopt"><code>Unix.setsockopt</code></a> for a socket option whose value is a floating-point number.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getsockopt_error" class="anchored"><a href="#val-getsockopt_error" class="anchor"></a><code><span><span class="keyword">val</span> getsockopt_error : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-error">error</a> option</span></span></code></div><div class="spec-doc"><p>Return the error condition associated with the given socket, and clear it.</p></div></div><h6 id="high-level-network-connection-functions"><a href="#high-level-network-connection-functions" class="anchor"></a>High-level network connection functions</h6><div class="odoc-spec"><div class="spec value" id="val-open_connection" class="anchored"><a href="#val-open_connection" class="anchor"></a><code><span><span class="keyword">val</span> open_connection : <span>?autoclose:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> * <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span></span></code></div><div class="spec-doc"><p>Connect to a server at the given address. Return a pair of input/output connected to the server. The connection is closed whenever either the input or the output is closed.</p><p>Remember to call <code>Pervasives</code>.flush on the output at the right times to ensure correct synchronization.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">autoclose</span> <p>If true (default value), close the input automatically once there is no more content to read. Otherwise, the input will be closed according to the usual rules of module <code>BatIO</code>. Barring very specific needs (e.g. using file descriptors as locks), you probably want <code>autoclose</code> to be <code>true</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-shutdown_connection" class="anchored"><a href="#val-shutdown_connection" class="anchor"></a><code><span><span class="keyword">val</span> shutdown_connection : <span><a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>``Shut down'' a connection established with <a href="../../ocaml/Unix/index.html#val-open_connection"><code>Unix.open_connection</code></a>; that is, transmit an end-of-file condition to the server reading on the other side of the connection.</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>Connections do not require a special function anymore. Use regular function <code>BatIO</code>.close_in for closing connections.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-establish_server" class="anchored"><a href="#val-establish_server" class="anchor"></a><code><span><span class="keyword">val</span> establish_server : <span>?autoclose:bool <span class="arrow">&#45;&gt;</span></span> <span>?cleanup:bool <span class="arrow">&#45;&gt;</span></span>
<span><span>(<span><a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Establish a server on the given address.</p><p><code>establish_server f addr</code> establishes a server on address <code>addr</code>. For each connection on this address, function <code>f</code> is called with two buffered channels connected to the client. A new process is created for each connection. The function <a href="../../ocaml/Unix/index.html#val-establish_server"><code>Unix.establish_server</code></a> never returns normally.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">autoclose</span> <p>If true (default value), inputs passed to <code>f</code> close the input automatically once there is no more content to read. Otherwise, the input will be closed according to the usual rules of module <code>BatIO</code>. Barring very specific needs (e.g. using file descriptors as locks), you probably want <code>autoclose</code> to be <code>true</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cleanup</span> <p>If true or unspecified, close the connection when the <code>input</code> or the <code>output</code> is closed or garbage-collected. If false, do nothing, in which case you will need to shutdown the connection using <code>shutdown_connection</code> to ensure proper cleanup.</p></li></ul></div></div><h6 id="host-and-protocol-databases"><a href="#host-and-protocol-databases" class="anchor"></a>Host and protocol databases</h6><div class="odoc-spec"><div class="spec type" id="type-host_entry" class="anchored"><a href="#type-host_entry" class="anchor"></a><code><span><span class="keyword">type</span> host_entry</span><span> = <a href="../../ocaml/Unix/index.html#type-host_entry">Unix.host_entry</a></span><span> = </span><span>{</span></code><table><tr id="type-host_entry.h_name" class="anchored"><td class="def record field"><a href="#type-host_entry.h_name" class="anchor"></a><code><span>h_name : string;</span></code></td></tr><tr id="type-host_entry.h_aliases" class="anchored"><td class="def record field"><a href="#type-host_entry.h_aliases" class="anchor"></a><code><span>h_aliases : <span>string array</span>;</span></code></td></tr><tr id="type-host_entry.h_addrtype" class="anchored"><td class="def record field"><a href="#type-host_entry.h_addrtype" class="anchor"></a><code><span>h_addrtype : <a href="#type-socket_domain">socket_domain</a>;</span></code></td></tr><tr id="type-host_entry.h_addr_list" class="anchored"><td class="def record field"><a href="#type-host_entry.h_addr_list" class="anchor"></a><code><span>h_addr_list : <span><a href="#type-inet_addr">inet_addr</a> array</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Structure of entries in the <code>hosts</code> database.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-protocol_entry" class="anchored"><a href="#type-protocol_entry" class="anchor"></a><code><span><span class="keyword">type</span> protocol_entry</span><span> = <a href="../../ocaml/Unix/index.html#type-protocol_entry">Unix.protocol_entry</a></span><span> = </span><span>{</span></code><table><tr id="type-protocol_entry.p_name" class="anchored"><td class="def record field"><a href="#type-protocol_entry.p_name" class="anchor"></a><code><span>p_name : string;</span></code></td></tr><tr id="type-protocol_entry.p_aliases" class="anchored"><td class="def record field"><a href="#type-protocol_entry.p_aliases" class="anchor"></a><code><span>p_aliases : <span>string array</span>;</span></code></td></tr><tr id="type-protocol_entry.p_proto" class="anchored"><td class="def record field"><a href="#type-protocol_entry.p_proto" class="anchor"></a><code><span>p_proto : int;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Structure of entries in the <code>protocols</code> database.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-service_entry" class="anchored"><a href="#type-service_entry" class="anchor"></a><code><span><span class="keyword">type</span> service_entry</span><span> = <a href="../../ocaml/Unix/index.html#type-service_entry">Unix.service_entry</a></span><span> = </span><span>{</span></code><table><tr id="type-service_entry.s_name" class="anchored"><td class="def record field"><a href="#type-service_entry.s_name" class="anchor"></a><code><span>s_name : string;</span></code></td></tr><tr id="type-service_entry.s_aliases" class="anchored"><td class="def record field"><a href="#type-service_entry.s_aliases" class="anchor"></a><code><span>s_aliases : <span>string array</span>;</span></code></td></tr><tr id="type-service_entry.s_port" class="anchored"><td class="def record field"><a href="#type-service_entry.s_port" class="anchor"></a><code><span>s_port : int;</span></code></td></tr><tr id="type-service_entry.s_proto" class="anchored"><td class="def record field"><a href="#type-service_entry.s_proto" class="anchor"></a><code><span>s_proto : string;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Structure of entries in the <code>services</code> database.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gethostname" class="anchored"><a href="#val-gethostname" class="anchor"></a><code><span><span class="keyword">val</span> gethostname : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the name of the local host.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gethostbyname" class="anchored"><a href="#val-gethostbyname" class="anchor"></a><code><span><span class="keyword">val</span> gethostbyname : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-host_entry">host_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>hosts</code> with the given name.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-gethostbyaddr" class="anchored"><a href="#val-gethostbyaddr" class="anchor"></a><code><span><span class="keyword">val</span> gethostbyaddr : <span><a href="#type-inet_addr">inet_addr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-host_entry">host_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>hosts</code> with the given address.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getprotobyname" class="anchored"><a href="#val-getprotobyname" class="anchor"></a><code><span><span class="keyword">val</span> getprotobyname : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-protocol_entry">protocol_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>protocols</code> with the given name</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getprotobynumber" class="anchored"><a href="#val-getprotobynumber" class="anchor"></a><code><span><span class="keyword">val</span> getprotobynumber : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-protocol_entry">protocol_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>protocols</code> with the given protocol number.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getservbyname" class="anchored"><a href="#val-getservbyname" class="anchor"></a><code><span><span class="keyword">val</span> getservbyname : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-service_entry">service_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>services</code> with the given name.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-getservbyport" class="anchored"><a href="#val-getservbyport" class="anchor"></a><code><span><span class="keyword">val</span> getservbyport : <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-service_entry">service_entry</a></span></code></div><div class="spec-doc"><p>Find an entry in <code>services</code> with the given service number.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if no such entry can be found.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type" id="type-addr_info" class="anchored"><a href="#type-addr_info" class="anchor"></a><code><span><span class="keyword">type</span> addr_info</span><span> = <a href="../../ocaml/Unix/index.html#type-addr_info">Unix.addr_info</a></span><span> = </span><span>{</span></code><table><tr id="type-addr_info.ai_family" class="anchored"><td class="def record field"><a href="#type-addr_info.ai_family" class="anchor"></a><code><span>ai_family : <a href="#type-socket_domain">socket_domain</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket domain</p><span class="comment-delim">*)</span></td></tr><tr id="type-addr_info.ai_socktype" class="anchored"><td class="def record field"><a href="#type-addr_info.ai_socktype" class="anchor"></a><code><span>ai_socktype : <a href="#type-socket_type">socket_type</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket type</p><span class="comment-delim">*)</span></td></tr><tr id="type-addr_info.ai_protocol" class="anchored"><td class="def record field"><a href="#type-addr_info.ai_protocol" class="anchor"></a><code><span>ai_protocol : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Socket protocol number</p><span class="comment-delim">*)</span></td></tr><tr id="type-addr_info.ai_addr" class="anchored"><td class="def record field"><a href="#type-addr_info.ai_addr" class="anchor"></a><code><span>ai_addr : <a href="#type-sockaddr">sockaddr</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Address</p><span class="comment-delim">*)</span></td></tr><tr id="type-addr_info.ai_canonname" class="anchored"><td class="def record field"><a href="#type-addr_info.ai_canonname" class="anchor"></a><code><span>ai_canonname : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Canonical host name</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Address information returned by <a href="../../ocaml/Unix/index.html#val-getaddrinfo"><code>Unix.getaddrinfo</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-getaddrinfo_option" class="anchored"><a href="#type-getaddrinfo_option" class="anchor"></a><code><span><span class="keyword">type</span> getaddrinfo_option</span><span> = <a href="../../ocaml/Unix/index.html#type-getaddrinfo_option">Unix.getaddrinfo_option</a></span><span> = </span></code><table><tr id="type-getaddrinfo_option.AI_FAMILY" class="anchored"><td class="def variant constructor"><a href="#type-getaddrinfo_option.AI_FAMILY" class="anchor"></a><code><span>| </span><span><span class="constructor">AI_FAMILY</span> <span class="keyword">of</span> <a href="#type-socket_domain">socket_domain</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Impose the given socket domain</p><span class="comment-delim">*)</span></td></tr><tr id="type-getaddrinfo_option.AI_SOCKTYPE" class="anchored"><td class="def variant constructor"><a href="#type-getaddrinfo_option.AI_SOCKTYPE" class="anchor"></a><code><span>| </span><span><span class="constructor">AI_SOCKTYPE</span> <span class="keyword">of</span> <a href="#type-socket_type">socket_type</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Impose the given socket type</p><span class="comment-delim">*)</span></td></tr><tr id="type-getaddrinfo_option.AI_PROTOCOL" class="anchored"><td class="def variant constructor"><a href="#type-getaddrinfo_option.AI_PROTOCOL" class="anchor"></a><code><span>| </span><span><span class="constructor">AI_PROTOCOL</span> <span class="keyword">of</span> int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Impose the given protocol</p><span class="comment-delim">*)</span></td></tr><tr id="type-getaddrinfo_option.AI_NUMERICHOST" class="anchored"><td class="def variant constructor"><a href="#type-getaddrinfo_option.AI_NUMERICHOST" class="anchor"></a><code><span>| </span><span><span class="constructor">AI_NUMERICHOST</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Do not call name resolver, expect numeric IP address</p><span class="comment-delim">*)</span></td></tr><tr id="type-getaddrinfo_option.AI_CANONNAME" class="anchored"><td class="def variant constructor"><a href="#type-getaddrinfo_option.AI_CANONNAME" class="anchor"></a><code><span>| </span><span><span class="constructor">AI_CANONNAME</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Fill the <code>ai_canonname</code> field of the result</p><span class="comment-delim">*)</span></td></tr><tr id="type-getaddrinfo_option.AI_PASSIVE" class="anchored"><td class="def variant constructor"><a href="#type-getaddrinfo_option.AI_PASSIVE" class="anchor"></a><code><span>| </span><span><span class="constructor">AI_PASSIVE</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set address to ``any'' address for use with <a href="../../ocaml/Unix/index.html#val-bind"><code>Unix.bind</code></a></p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Options to <a href="../../ocaml/Unix/index.html#val-getaddrinfo"><code>Unix.getaddrinfo</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getaddrinfo" class="anchored"><a href="#val-getaddrinfo" class="anchor"></a><code><span><span class="keyword">val</span> getaddrinfo : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-getaddrinfo_option">getaddrinfo_option</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-addr_info">addr_info</a> list</span></span></code></div><div class="spec-doc"><p><code>getaddrinfo host service opts</code> returns a list of <a href="../../ocaml/Unix/index.html#type-addr_info"><code>Unix.addr_info</code></a> records describing socket parameters and addresses suitable for communicating with the given host and service. The empty list is returned if the host or service names are unknown, or the constraints expressed in <code>opts</code> cannot be satisfied.</p><p><code>host</code> is either a host name or the string representation of an IP address. <code>host</code> can be given as the empty string; in this case, the ``any'' address or the ``loopback'' address are used, depending whether <code>opts</code> contains <code>AI_PASSIVE</code>. <code>service</code> is either a service name or the string representation of a port number. <code>service</code> can be given as the empty string; in this case, the port field of the returned addresses is set to 0. <code>opts</code> is a possibly empty list of options that allows the caller to force a particular socket domain (e.g. IPv6 only or IPv4 only) or a particular socket type (e.g. TCP only or UDP only).</p></div></div><div class="odoc-spec"><div class="spec type" id="type-name_info" class="anchored"><a href="#type-name_info" class="anchor"></a><code><span><span class="keyword">type</span> name_info</span><span> = <a href="../../ocaml/Unix/index.html#type-name_info">Unix.name_info</a></span><span> = </span><span>{</span></code><table><tr id="type-name_info.ni_hostname" class="anchored"><td class="def record field"><a href="#type-name_info.ni_hostname" class="anchor"></a><code><span>ni_hostname : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Name or IP address of host</p><span class="comment-delim">*)</span></td></tr><tr id="type-name_info.ni_service" class="anchored"><td class="def record field"><a href="#type-name_info.ni_service" class="anchor"></a><code><span>ni_service : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Name of service or port number</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Host and service information returned by <a href="../../ocaml/Unix/index.html#val-getnameinfo"><code>Unix.getnameinfo</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-getnameinfo_option" class="anchored"><a href="#type-getnameinfo_option" class="anchor"></a><code><span><span class="keyword">type</span> getnameinfo_option</span><span> = <a href="../../ocaml/Unix/index.html#type-getnameinfo_option">Unix.getnameinfo_option</a></span><span> = </span></code><table><tr id="type-getnameinfo_option.NI_NOFQDN" class="anchored"><td class="def variant constructor"><a href="#type-getnameinfo_option.NI_NOFQDN" class="anchor"></a><code><span>| </span><span><span class="constructor">NI_NOFQDN</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Do not qualify local host names</p><span class="comment-delim">*)</span></td></tr><tr id="type-getnameinfo_option.NI_NUMERICHOST" class="anchored"><td class="def variant constructor"><a href="#type-getnameinfo_option.NI_NUMERICHOST" class="anchor"></a><code><span>| </span><span><span class="constructor">NI_NUMERICHOST</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Always return host as IP address</p><span class="comment-delim">*)</span></td></tr><tr id="type-getnameinfo_option.NI_NAMEREQD" class="anchored"><td class="def variant constructor"><a href="#type-getnameinfo_option.NI_NAMEREQD" class="anchor"></a><code><span>| </span><span><span class="constructor">NI_NAMEREQD</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Fail if host name cannot be determined</p><span class="comment-delim">*)</span></td></tr><tr id="type-getnameinfo_option.NI_NUMERICSERV" class="anchored"><td class="def variant constructor"><a href="#type-getnameinfo_option.NI_NUMERICSERV" class="anchor"></a><code><span>| </span><span><span class="constructor">NI_NUMERICSERV</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Always return service as port number</p><span class="comment-delim">*)</span></td></tr><tr id="type-getnameinfo_option.NI_DGRAM" class="anchored"><td class="def variant constructor"><a href="#type-getnameinfo_option.NI_DGRAM" class="anchor"></a><code><span>| </span><span><span class="constructor">NI_DGRAM</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Consider the service as UDP-based instead of the default TCP</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Options to <a href="../../ocaml/Unix/index.html#val-getnameinfo"><code>Unix.getnameinfo</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getnameinfo" class="anchored"><a href="#val-getnameinfo" class="anchor"></a><code><span><span class="keyword">val</span> getnameinfo : <span><a href="#type-sockaddr">sockaddr</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-getnameinfo_option">getnameinfo_option</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-name_info">name_info</a></span></code></div><div class="spec-doc"><p><code>getnameinfo addr opts</code> returns the host name and service name corresponding to the socket address <code>addr</code>. <code>opts</code> is a possibly empty list of options that governs how these names are obtained.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> <p>if an error occurs.</p></li></ul></div></div><h6 id="terminal-interface"><a href="#terminal-interface" class="anchor"></a>Terminal interface</h6><p>The following functions implement the POSIX standard terminal interface. They provide control over asynchronous communication ports and pseudo-terminals. Refer to the <code>termios</code> man page for a complete description.</p><div class="odoc-spec"><div class="spec type" id="type-terminal_io" class="anchored"><a href="#type-terminal_io" class="anchor"></a><code><span><span class="keyword">type</span> terminal_io</span><span> = <a href="../../ocaml/Unix/index.html#type-terminal_io">Unix.terminal_io</a></span><span> = </span><span>{</span></code><table><tr id="type-terminal_io.c_ignbrk" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_ignbrk" class="anchor"></a><code><span><span class="keyword">mutable</span> c_ignbrk : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Ignore the break condition.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_brkint" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_brkint" class="anchor"></a><code><span><span class="keyword">mutable</span> c_brkint : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Signal interrupt on break condition.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_ignpar" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_ignpar" class="anchor"></a><code><span><span class="keyword">mutable</span> c_ignpar : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Ignore characters with parity errors.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_parmrk" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_parmrk" class="anchor"></a><code><span><span class="keyword">mutable</span> c_parmrk : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Mark parity errors.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_inpck" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_inpck" class="anchor"></a><code><span><span class="keyword">mutable</span> c_inpck : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Enable parity check on input.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_istrip" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_istrip" class="anchor"></a><code><span><span class="keyword">mutable</span> c_istrip : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Strip 8th bit on input characters.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_inlcr" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_inlcr" class="anchor"></a><code><span><span class="keyword">mutable</span> c_inlcr : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Map NL to CR on input.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_igncr" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_igncr" class="anchor"></a><code><span><span class="keyword">mutable</span> c_igncr : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Ignore CR on input.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_icrnl" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_icrnl" class="anchor"></a><code><span><span class="keyword">mutable</span> c_icrnl : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Map CR to NL on input.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_ixon" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_ixon" class="anchor"></a><code><span><span class="keyword">mutable</span> c_ixon : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Recognize XON/XOFF characters on input.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_ixoff" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_ixoff" class="anchor"></a><code><span><span class="keyword">mutable</span> c_ixoff : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Emit XON/XOFF chars to control input flow.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_opost" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_opost" class="anchor"></a><code><span><span class="keyword">mutable</span> c_opost : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Enable output processing.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_obaud" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_obaud" class="anchor"></a><code><span><span class="keyword">mutable</span> c_obaud : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Output baud rate (0 means close connection).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_ibaud" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_ibaud" class="anchor"></a><code><span><span class="keyword">mutable</span> c_ibaud : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Input baud rate.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_csize" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_csize" class="anchor"></a><code><span><span class="keyword">mutable</span> c_csize : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Number of bits per character (5-8).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_cstopb" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_cstopb" class="anchor"></a><code><span><span class="keyword">mutable</span> c_cstopb : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Number of stop bits (1-2).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_cread" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_cread" class="anchor"></a><code><span><span class="keyword">mutable</span> c_cread : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Reception is enabled.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_parenb" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_parenb" class="anchor"></a><code><span><span class="keyword">mutable</span> c_parenb : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Enable parity generation and detection.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_parodd" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_parodd" class="anchor"></a><code><span><span class="keyword">mutable</span> c_parodd : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Specify odd parity instead of even.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_hupcl" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_hupcl" class="anchor"></a><code><span><span class="keyword">mutable</span> c_hupcl : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Hang up on last close.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_clocal" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_clocal" class="anchor"></a><code><span><span class="keyword">mutable</span> c_clocal : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Ignore modem status lines.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_isig" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_isig" class="anchor"></a><code><span><span class="keyword">mutable</span> c_isig : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Generate signal on INTR, QUIT, SUSP.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_icanon" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_icanon" class="anchor"></a><code><span><span class="keyword">mutable</span> c_icanon : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Enable canonical processing (line buffering and editing)</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_noflsh" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_noflsh" class="anchor"></a><code><span><span class="keyword">mutable</span> c_noflsh : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Disable flush after INTR, QUIT, SUSP.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_echo" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_echo" class="anchor"></a><code><span><span class="keyword">mutable</span> c_echo : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Echo input characters.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_echoe" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_echoe" class="anchor"></a><code><span><span class="keyword">mutable</span> c_echoe : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Echo ERASE (to erase previous character).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_echok" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_echok" class="anchor"></a><code><span><span class="keyword">mutable</span> c_echok : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Echo KILL (to erase the current line).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_echonl" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_echonl" class="anchor"></a><code><span><span class="keyword">mutable</span> c_echonl : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Echo NL even if c_echo is not set.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vintr" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vintr" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vintr : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Interrupt character (usually ctrl-C).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vquit" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vquit" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vquit : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Quit character (usually ctrl-\).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_verase" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_verase" class="anchor"></a><code><span><span class="keyword">mutable</span> c_verase : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Erase character (usually DEL or ctrl-H).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vkill" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vkill" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vkill : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Kill line character (usually ctrl-U).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_veof" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_veof" class="anchor"></a><code><span><span class="keyword">mutable</span> c_veof : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>End-of-file character (usually ctrl-D).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_veol" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_veol" class="anchor"></a><code><span><span class="keyword">mutable</span> c_veol : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Alternate end-of-line char. (usually none).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vmin" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vmin" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vmin : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Minimum number of characters to read before the read request is satisfied.</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vtime" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vtime" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vtime : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Maximum read wait (in 0.1s units).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vstart" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vstart" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vstart : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Start character (usually ctrl-Q).</p><span class="comment-delim">*)</span></td></tr><tr id="type-terminal_io.c_vstop" class="anchored"><td class="def record field"><a href="#type-terminal_io.c_vstop" class="anchor"></a><code><span><span class="keyword">mutable</span> c_vstop : char;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Stop character (usually ctrl-S).</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tcgetattr" class="anchored"><a href="#val-tcgetattr" class="anchor"></a><code><span><span class="keyword">val</span> tcgetattr : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-terminal_io">terminal_io</a></span></code></div><div class="spec-doc"><p>Return the status of the terminal referred to by the given file descriptor.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-setattr_when" class="anchored"><a href="#type-setattr_when" class="anchor"></a><code><span><span class="keyword">type</span> setattr_when</span><span> = <a href="../../ocaml/Unix/index.html#type-setattr_when">Unix.setattr_when</a></span><span> = </span></code><table><tr id="type-setattr_when.TCSANOW" class="anchored"><td class="def variant constructor"><a href="#type-setattr_when.TCSANOW" class="anchor"></a><code><span>| </span><span><span class="constructor">TCSANOW</span></span></code></td></tr><tr id="type-setattr_when.TCSADRAIN" class="anchored"><td class="def variant constructor"><a href="#type-setattr_when.TCSADRAIN" class="anchor"></a><code><span>| </span><span><span class="constructor">TCSADRAIN</span></span></code></td></tr><tr id="type-setattr_when.TCSAFLUSH" class="anchored"><td class="def variant constructor"><a href="#type-setattr_when.TCSAFLUSH" class="anchor"></a><code><span>| </span><span><span class="constructor">TCSAFLUSH</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-tcsetattr" class="anchored"><a href="#val-tcsetattr" class="anchor"></a><code><span><span class="keyword">val</span> tcsetattr : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-setattr_when">setattr_when</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-terminal_io">terminal_io</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set the status of the terminal referred to by the given file descriptor. The second argument indicates when the status change takes place: immediately (<code>TCSANOW</code>), when all pending output has been transmitted (<code>TCSADRAIN</code>), or after flushing all input that has been received but not read (<code>TCSAFLUSH</code>). <code>TCSADRAIN</code> is recommended when changing the output parameters; <code>TCSAFLUSH</code>, when changing the input parameters.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tcsendbreak" class="anchored"><a href="#val-tcsendbreak" class="anchor"></a><code><span><span class="keyword">val</span> tcsendbreak : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Send a break condition on the given file descriptor. The second argument is the duration of the break, in 0.1s units; 0 means standard duration (0.25s).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tcdrain" class="anchored"><a href="#val-tcdrain" class="anchor"></a><code><span><span class="keyword">val</span> tcdrain : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Waits until all output written on the given file descriptor has been transmitted.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-flush_queue" class="anchored"><a href="#type-flush_queue" class="anchor"></a><code><span><span class="keyword">type</span> flush_queue</span><span> = <a href="../../ocaml/Unix/index.html#type-flush_queue">Unix.flush_queue</a></span><span> = </span></code><table><tr id="type-flush_queue.TCIFLUSH" class="anchored"><td class="def variant constructor"><a href="#type-flush_queue.TCIFLUSH" class="anchor"></a><code><span>| </span><span><span class="constructor">TCIFLUSH</span></span></code></td></tr><tr id="type-flush_queue.TCOFLUSH" class="anchored"><td class="def variant constructor"><a href="#type-flush_queue.TCOFLUSH" class="anchor"></a><code><span>| </span><span><span class="constructor">TCOFLUSH</span></span></code></td></tr><tr id="type-flush_queue.TCIOFLUSH" class="anchored"><td class="def variant constructor"><a href="#type-flush_queue.TCIOFLUSH" class="anchor"></a><code><span>| </span><span><span class="constructor">TCIOFLUSH</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-tcflush" class="anchored"><a href="#val-tcflush" class="anchor"></a><code><span><span class="keyword">val</span> tcflush : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-flush_queue">flush_queue</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Discard data written on the given file descriptor but not yet transmitted, or data received but not yet read, depending on the second argument: <code>TCIFLUSH</code> flushes data received but not read, <code>TCOFLUSH</code> flushes data written but not transmitted, and <code>TCIOFLUSH</code> flushes both.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-flow_action" class="anchored"><a href="#type-flow_action" class="anchor"></a><code><span><span class="keyword">type</span> flow_action</span><span> = <a href="../../ocaml/Unix/index.html#type-flow_action">Unix.flow_action</a></span><span> = </span></code><table><tr id="type-flow_action.TCOOFF" class="anchored"><td class="def variant constructor"><a href="#type-flow_action.TCOOFF" class="anchor"></a><code><span>| </span><span><span class="constructor">TCOOFF</span></span></code></td></tr><tr id="type-flow_action.TCOON" class="anchored"><td class="def variant constructor"><a href="#type-flow_action.TCOON" class="anchor"></a><code><span>| </span><span><span class="constructor">TCOON</span></span></code></td></tr><tr id="type-flow_action.TCIOFF" class="anchored"><td class="def variant constructor"><a href="#type-flow_action.TCIOFF" class="anchor"></a><code><span>| </span><span><span class="constructor">TCIOFF</span></span></code></td></tr><tr id="type-flow_action.TCION" class="anchored"><td class="def variant constructor"><a href="#type-flow_action.TCION" class="anchor"></a><code><span>| </span><span><span class="constructor">TCION</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-tcflow" class="anchored"><a href="#val-tcflow" class="anchor"></a><code><span><span class="keyword">val</span> tcflow : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-flow_action">flow_action</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Suspend or restart reception or transmission of data on the given file descriptor, depending on the second argument: <code>TCOOFF</code> suspends output, <code>TCOON</code> restarts output, <code>TCIOFF</code> transmits a STOP character to suspend input, and <code>TCION</code> transmits a START character to restart input.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setsid" class="anchored"><a href="#val-setsid" class="anchor"></a><code><span><span class="keyword">val</span> setsid : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Put the calling process in a new session and detach it from its controlling terminal.</p></div></div><h6 id="small-tools"><a href="#small-tools" class="anchor"></a>Small tools</h6><div class="odoc-spec"><div class="spec value" id="val-is_directory" class="anchored"><a href="#val-is_directory" class="anchor"></a><code><span><span class="keyword">val</span> is_directory : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_directory filename</code> returns true if <code>filename</code> refers to a directory (or symlink of a directory)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-restart_on_EINTR" class="anchored"><a href="#val-restart_on_EINTR" class="anchor"></a><code><span><span class="keyword">val</span> restart_on_EINTR : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>restart_on_EINTR f x</code> invokes <code>f</code> on <code>x</code> repetedly until the function returns a value or raises another exception than EINTR.</p></div></div><h6 id="thread-safety-internals"><a href="#thread-safety-internals" class="anchor"></a>Thread-safety internals</h6><p>Unless you are attempting to adapt Batteries Included to a new model of concurrency, you probably won't need this.</p><div class="odoc-spec"><div class="spec value" id="val-lock" class="anchored"><a href="#val-lock" class="anchor"></a><code><span><span class="keyword">val</span> lock : <span><a href="../BatConcurrent/index.html#type-lock">BatConcurrent.lock</a> <a href="../../ocaml/Stdlib/index.html#type-ref">ref</a></span></span></code></div><div class="spec-doc"><p>A lock used to synchronize internal operations.</p><p>By default, this is <a href="../BatConcurrent/index.html#val-nolock"><code>BatConcurrent.nolock</code></a>. However, if you're using a version of Batteries compiled in threaded mode, this uses <a href="../BatMutex/index.html"><code>BatMutex</code></a>. If you're attempting to use Batteries with another concurrency model, set the lock appropriately.</p></div></div><h6 id="obsolete-stuff"><a href="#obsolete-stuff" class="anchor"></a>Obsolete stuff</h6><div class="odoc-spec"><div class="spec value" id="val-in_channel_of_descr" class="anchored"><a href="#val-in_channel_of_descr" class="anchor"></a><code><span><span class="keyword">val</span> in_channel_of_descr : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>use <code>input_of_descr</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-out_channel_of_descr" class="anchored"><a href="#val-out_channel_of_descr" class="anchor"></a><code><span><span class="keyword">val</span> out_channel_of_descr : <span><a href="#type-file_descr">file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>use <code>output_of_descr</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-descr_of_in_channel" class="anchored"><a href="#val-descr_of_in_channel" class="anchor"></a><code><span><span class="keyword">val</span> descr_of_in_channel : <span><a href="../BatInnerIO/index.html#type-input">BatInnerIO.input</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>use <code>descr_of_input</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-descr_of_out_channel" class="anchored"><a href="#val-descr_of_out_channel" class="anchor"></a><code><span><span class="keyword">val</span> descr_of_out_channel : <span><span>unit <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-file_descr">file_descr</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>use <code>descr_of_output</code>.</p></li></ul></div></div></div></body></html>