<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bigbuffer (core_kernel.Core_kernel.Bigbuffer)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">core_kernel</a> &#x00BB; <a href="../index.html">Core_kernel</a> &#x00BB; Bigbuffer</nav><h1>Module <code>Core_kernel.Bigbuffer</code></h1><p>Extensible string buffers based on Bigstrings.</p><p>This module implements string buffers that automatically expand as necessary. It provides accumulative concatenation of strings in quasi-linear time (instead of quadratic time when strings are concatenated pairwise).</p><p>This implementation uses Bigstrings instead of strings. This removes the 16MB limit on buffer size (on 32-bit machines), and improves I/O-performance when reading/writing from/to channels.</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../base/Base/Buffer/index.html#module-type-S">Base.Buffer.S</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_t : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a></code></dt><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-contents"><a href="#val-contents" class="anchor"></a><code><span class="keyword">val</span> contents : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-contents_bytes"><a href="#val-contents_bytes" class="anchor"></a><code><span class="keyword">val</span> contents_bytes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bytes</code></dt><dt class="spec value" id="val-blit"><a href="#val-blit" class="anchor"></a><code><span class="keyword">val</span> blit : (<a href="index.html#type-t">t</a>, bytes) <a href="../../../base/Base__/Blit_intf/index.html#type-blit">Base__.Blit_intf.blit</a></code></dt><dt class="spec value" id="val-blito"><a href="#val-blito" class="anchor"></a><code><span class="keyword">val</span> blito : (<a href="index.html#type-t">t</a>, bytes) <a href="../../../base/Base__/Blit_intf/index.html#type-blito">Base__.Blit_intf.blito</a></code></dt><dt class="spec value" id="val-unsafe_blit"><a href="#val-unsafe_blit" class="anchor"></a><code><span class="keyword">val</span> unsafe_blit : (<a href="index.html#type-t">t</a>, bytes) <a href="../../../base/Base__/Blit_intf/index.html#type-blit">Base__.Blit_intf.blit</a></code></dt><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : (<a href="index.html#type-t">t</a>, bytes) <a href="../../../base/Base__/Blit_intf/index.html#type-sub">Base__.Blit_intf.sub</a></code></dt><dt class="spec value" id="val-subo"><a href="#val-subo" class="anchor"></a><code><span class="keyword">val</span> subo : (<a href="index.html#type-t">t</a>, bytes) <a href="../../../base/Base__/Blit_intf/index.html#type-subo">Base__.Blit_intf.subo</a></code></dt><dt class="spec value" id="val-nth"><a href="#val-nth" class="anchor"></a><code><span class="keyword">val</span> nth : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> char</code></dt><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-reset"><a href="#val-reset" class="anchor"></a><code><span class="keyword">val</span> reset : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_char"><a href="#val-add_char" class="anchor"></a><code><span class="keyword">val</span> add_char : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> char <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_string"><a href="#val-add_string" class="anchor"></a><code><span class="keyword">val</span> add_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_substring"><a href="#val-add_substring" class="anchor"></a><code><span class="keyword">val</span> add_substring : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> pos:int <span>&#45;&gt;</span> len:int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_bytes"><a href="#val-add_bytes" class="anchor"></a><code><span class="keyword">val</span> add_bytes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bytes <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_subbytes"><a href="#val-add_subbytes" class="anchor"></a><code><span class="keyword">val</span> add_subbytes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bytes <span>&#45;&gt;</span> pos:int <span>&#45;&gt;</span> len:int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_buffer"><a href="#val-add_buffer" class="anchor"></a><code><span class="keyword">val</span> add_buffer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-big_contents"><a href="#val-big_contents" class="anchor"></a><code><span class="keyword">val</span> big_contents : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Bigstring/index.html#type-t">Bigstring.t</a></code></dt><dd><p>Return a copy of the current contents of the buffer as a bigstring. The buffer itself is unchanged.</p></dd></dl><dl><dt class="spec value" id="val-volatile_contents"><a href="#val-volatile_contents" class="anchor"></a><code><span class="keyword">val</span> volatile_contents : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Bigstring/index.html#type-t">Bigstring.t</a></code></dt><dd><p>Return the actual underlying bigstring used by this bigbuffer. No copying is involved. To be safe, use and finish with the returned value before calling any other function in this module on the same <code>Bigbuffer.t</code>.</p></dd></dl><dl><dt class="spec value" id="val-add_bigstring"><a href="#val-add_bigstring" class="anchor"></a><code><span class="keyword">val</span> add_bigstring : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Bigstring/index.html#type-t">Bigstring.t</a> <span>&#45;&gt;</span> <a href="../../Core_kernel__/Import/index.html#type-unit">Core_kernel__.Import.unit</a></code></dt><dd><p><code>add_bigstring b s</code> appends the bigstring <code>s</code> at the end of the buffer <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-add_substitute"><a href="#val-add_substitute" class="anchor"></a><code><span class="keyword">val</span> add_substitute : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="../../Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a> <span>&#45;&gt;</span> <a href="../../Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>) <span>&#45;&gt;</span> <a href="../../Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a> <span>&#45;&gt;</span> <a href="../../Core_kernel__/Import/index.html#type-unit">Core_kernel__.Import.unit</a></code></dt><dd><p><code>add_substitute b f s</code> appends the string pattern <code>s</code> at the end of the buffer <code>b</code> with substitution. The substitution process looks for variables into the pattern and substitutes each variable name by its value, as obtained by applying the mapping <code>f</code> to the variable name. Inside the string pattern, a variable name immediately follows a non-escaped <code>$</code> character and is one of the following:</p><ul><li>a non empty sequence of alphanumeric or <code>_</code> characters,</li><li>an arbitrary sequence of characters enclosed by a pair of matching parentheses or curly brackets.</li></ul><p>An escaped <code>$</code> character is a <code>$</code> that immediately follows a backslash character; it then stands for a plain <code>$</code>. Raise <code>Not_found</code> if the closing character of a parenthesized variable cannot be found.</p></dd></dl><div class="spec module" id="module-Format"><a href="#module-Format" class="anchor"></a><code><span class="keyword">module</span> <a href="Format/index.html">Format</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Printf"><a href="#module-Printf" class="anchor"></a><code><span class="keyword">module</span> <a href="Printf/index.html">Printf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>