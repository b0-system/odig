<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Travesty__Traversable (travesty.Travesty__Traversable)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">travesty</a> &#x00BB; Travesty__Traversable</nav><h1>Module <code>Travesty__Traversable</code></h1><p>Monadic traversal.</p><p><code>Traversable</code> provides signatures and functors for containers and data structures that can be 'traversed': mapped across with a monadic side-effect. It resembles the Haskell Traversable typeclass, but with two differences:</p><ul><li>We currently define traversability in terms of monads, not applicative functors (this might change in the future, but monads are generally more well-understood and well-supported in the OCaml/Core ecosystem);</li><li>as a result, the main 'traverse' function is called <code>map_m</code>.</li></ul><nav class="toc"><ul><li><a href="#signatures">Signatures</a></li><li><a href="#making-containers">Making containers</a></li><li><a href="#chaining-together-traversables">Chaining together traversables</a></li><li><a href="#helper-functions">Helper functions</a></li></ul></nav></header><section><header><h3 id="signatures"><a href="#signatures" class="anchor"></a>Signatures</h3></header><div><div class="spec include"><div class="doc"><p><span class="xref-unresolved" title="unresolved reference to &quot;Traversable_intf&quot;"><span>Traversable_intf</span></span> contains the signatures for <code>Traversable</code>.</p><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../Travesty/index.html#module-Traversable_intf">Travesty.Traversable_intf</a></code></span></summary><aside><p>Signatures for monadic traversal.</p></aside><section><header><h3 id="generic"><a href="#generic" class="anchor"></a>The generic signature</h3><p>As with <span class="xref-unresolved" title="unresolved reference to &quot;Mappable&quot;"><span>Mappable</span></span>, we define the signature of traversable structures in an arity-generic way, then specialise it for arity-0 and arity-1 types.</p></header><dl><dt class="spec module-type" id="module-type-Generic"><a href="#module-type-Generic" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Generic/index.html">Generic</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Generic</code> describes monadic traversal on either an arity-0 or arity-1 type.</p></dd></dl></section><section><header><h3 id="sigs"><a href="#sigs" class="anchor"></a>Basic signatures</h3></header><dl><dt class="spec module-type" id="module-type-S0"><a href="#module-type-S0" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S0/index.html">S0</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>S0</code> is the signature of a monadic traversal over arity-0 types.</p></dd></dl><dl><dt class="spec module-type" id="module-type-S1"><a href="#module-type-S1" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S1/index.html">S1</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>S1</code> is the signature of a monadic traversal over arity-1 types.</p></dd></dl></section><section><header><h3 id="build"><a href="#build" class="anchor"></a>Building containers from traversable types</h3></header><section><header><h4 id="input-signatures"><a href="#input-signatures" class="anchor"></a>Input signatures</h4></header><dl><dt class="spec module-type" id="module-type-Basic_container0"><a href="#module-type-Basic_container0" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Basic_container0/index.html">Basic_container0</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Basic_container0</code> is the signature that traversable containers of arity 0 must implement.</p></dd></dl><dl><dt class="spec module-type" id="module-type-Basic_container1"><a href="#module-type-Basic_container1" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Basic_container1/index.html">Basic_container1</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Basic_container1</code> is the signature that traversable containers of arity 1 must implement.</p></dd></dl></section><section><header><h4 id="helper-signatures"><a href="#helper-signatures" class="anchor"></a>Helper signatures</h4></header><dl><dt class="spec module-type" id="module-type-Generic_on_monad"><a href="#module-type-Generic_on_monad" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Generic_on_monad/index.html">Generic_on_monad</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Generic_on_monad</code> extends <code>Generic</code> to contain various derived operators; we use it to derive the signatures of the various <code>On_monad</code> modules.</p></dd></dl><dl><dt class="spec module-type" id="module-type-On_monad1"><a href="#module-type-On_monad1" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-On_monad1/index.html">On_monad1</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>On_monad1</code> extends <code>Generic_on_monad</code> with functionality that only works on arity-1 containers.</p></dd></dl><dl><dt class="spec module-type" id="module-type-Generic_container"><a href="#module-type-Generic_container" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Generic_container/index.html">Generic_container</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Generic_container</code> is a generic interface for traversable containers, used to build <code>Container0</code> (arity-0) and <code>Container1</code> (arity-1).</p></dd></dl></section><section><header><h4 id="signatures-for-traversable-containers"><a href="#signatures-for-traversable-containers" class="anchor"></a>Signatures for traversable containers</h4></header><dl><dt class="spec module-type" id="module-type-S0_container"><a href="#module-type-S0_container" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S0_container/index.html">S0_container</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>S0_container</code> is a generic interface for arity-0 traversable containers.</p></dd></dl><dl><dt class="spec module-type" id="module-type-S1_container"><a href="#module-type-S1_container" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S1_container/index.html">S1_container</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>S1_container</code> is a generic interface for arity-1 traversable containers. It also includes the extensions from <span class="xref-unresolved" title="unresolved reference to &quot;Mappable&quot;"><span>Mappable</span></span>.</p></dd></dl></section></section></details></div></div></div></section><section><header><h3 id="making-containers"><a href="#making-containers" class="anchor"></a>Making containers</h3><p>Monadic traversal is sufficient to define <code>fold</code>, and, therefore, all of the key functionality for a Core-style container. As such, we expose functors for building traversable Core-style containers.</p></header><dl><dt class="spec module" id="module-Make_container0"><a href="#module-Make_container0" class="anchor"></a><code><span class="keyword">module</span> <a href="Make_container0/index.html">Make_container0</a> : <span class="keyword">functor</span> (<a href="Make_container0/argument-1-I/index.html">I</a> : <a href="index.html#module-type-Basic_container0">Basic_container0</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S0_container">S0_container</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="Make_container0/Elt/index.html">Elt</a> = <a href="Make_container0/argument-1-I/index.html#module-Elt">I.Elt</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="Make_container0/index.html#type-t">t</a> := <a href="Make_container0/argument-1-I/index.html#type-t">I.t</a></code></dt><dd><p><code>Make_container0</code> makes a <a href="module-type-S0_container/index.html"><span>S0_container</span></a> from a <a href="module-type-Basic_container0/index.html"><span>Basic_container0</span></a>.</p></dd></dl><dl><dt class="spec module" id="module-Make_container1"><a href="#module-Make_container1" class="anchor"></a><code><span class="keyword">module</span> <a href="Make_container1/index.html">Make_container1</a> : <span class="keyword">functor</span> (<a href="Make_container1/argument-1-I/index.html">I</a> : <a href="index.html#module-type-Basic_container1">Basic_container1</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S1_container">S1_container</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="Make_container1/index.html#type-t">t</a> := <span class="type-var">'a</span> <a href="Make_container1/argument-1-I/index.html#type-t">I.t</a></code></dt><dd><p><code>Make_container1</code> makes a <a href="module-type-S1_container/index.html"><span>S1_container</span></a> from a <a href="module-type-Basic_container1/index.html"><span>Basic_container1</span></a>.</p></dd></dl></section><section><header><h3 id="chaining-together-traversables"><a href="#chaining-together-traversables" class="anchor"></a>Chaining together traversables</h3></header><dl><dt class="spec module" id="module-Chain0"><a href="#module-Chain0" class="anchor"></a><code><span class="keyword">module</span> <a href="Chain0/index.html">Chain0</a> : <span class="keyword">functor</span> (<a href="Chain0/argument-1-Outer/index.html">Outer</a> : <a href="index.html#module-type-S0_container">S0_container</a>) <span>&#45;&gt;</span> <span class="keyword">functor</span> (<a href="Chain0/argument-2-Inner/index.html">Inner</a> : <a href="index.html#module-type-S0_container">S0_container</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Chain0/index.html#type-t">t</a> := <a href="Chain0/argument-1-Outer/Elt/index.html#type-t">Outer.Elt.t</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S0_container">S0_container</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="Chain0/Elt/index.html">Elt</a> = <a href="Chain0/argument-2-Inner/index.html#module-Elt">Inner.Elt</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="Chain0/index.html#type-t">t</a> := <a href="Chain0/argument-1-Outer/index.html#type-t">Outer.t</a></code></dt><dd><p><code>Chain0</code> chains two <a href="module-type-S0_container/index.html"><span>S0_container</span></a> instances together, traversing each element of the outer instance with the inner instance.</p></dd></dl></section><section><header><h3 id="helper-functions"><a href="#helper-functions" class="anchor"></a>Helper functions</h3></header><dl><dt class="spec module" id="module-Helpers"><a href="#module-Helpers" class="anchor"></a><code><span class="keyword">module</span> <a href="Helpers/index.html">Helpers</a> : <span class="keyword">functor</span> (<a href="Helpers/argument-1-M/index.html">M</a> : <a href="../../base/Base/Monad/index.html#module-type-S">Base.Monad.S</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Utility functions for building traversals.</p></dd></dl></section></div></body></html>