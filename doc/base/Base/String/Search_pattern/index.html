<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Search_pattern (base.Base.String.Search_pattern)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">base</a> &#x00BB; <a href="../../index.html">Base</a> &#x00BB; <a href="../index.html">String</a> &#x00BB; Search_pattern</nav><header class="odoc-preamble"><h1>Module <code><span>String.Search_pattern</span></code></h1><p>Substring search and replace functions. They use the Knuth-Morris-Pratt algorithm (KMP) under the hood.</p><p>The functions in the <code>Search_pattern</code> module allow the program to preprocess the searched pattern once and then use it many times without further allocations.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_t" class="anchored"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Sexp/index.html#type-t">Sexp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>?case_sensitive:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create pattern</code> preprocesses <code>pattern</code> as per KMP, building an <code>int array</code> of length <code>length pattern</code>. All inputs are valid.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pattern" class="anchored"><a href="#val-pattern" class="anchor"></a><code><span><span class="keyword">val</span> pattern : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>pattern t</code> returns the string pattern used to create <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-case_sensitive" class="anchored"><a href="#val-case_sensitive" class="anchor"></a><code><span><span class="keyword">val</span> case_sensitive : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>case_sensitive t</code> returns whether <code>t</code> matches strings case-sensitively.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-matches" class="anchored"><a href="#val-matches" class="anchor"></a><code><span><span class="keyword">val</span> matches : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>matches pat str</code> returns true if <code>str</code> matches <code>pat</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-index" class="anchored"><a href="#val-index" class="anchor"></a><code><span><span class="keyword">val</span> index : <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>in_:string <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>pos &lt; 0</code> or <code>pos &gt;= length string</code> result in no match (hence <code>index</code> returns <code>None</code> and <code>index_exn</code> raises).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-index_exn" class="anchored"><a href="#val-index_exn" class="anchor"></a><code><span><span class="keyword">val</span> index_exn : <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>in_:string <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-index_all" class="anchored"><a href="#val-index_all" class="anchor"></a><code><span><span class="keyword">val</span> index_all : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>may_overlap:bool <span class="arrow">&#45;&gt;</span></span> <span>in_:string <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p><code>may_overlap</code> determines whether after a successful match, <code>index_all</code> should start looking for another one at the very next position (<code>~may_overlap:true</code>), or jump to the end of that match and continue from there (<code>~may_overlap:false</code>), e.g.:</p><ul><li><code>index_all (create &quot;aaa&quot;) ~may_overlap:false ~in_:&quot;aaaaBaaaaaa&quot; = [0; 5; 8]</code></li><li><code>index_all (create &quot;aaa&quot;) ~may_overlap:true ~in_:&quot;aaaaBaaaaaa&quot; = [0; 1; 5; 6; 7;
        8]</code></li></ul><p>E.g., <code>replace_all</code> internally calls <code>index_all ~may_overlap:false</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-replace_first" class="anchored"><a href="#val-replace_first" class="anchor"></a><code><span><span class="keyword">val</span> replace_first : <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>in_:string <span class="arrow">&#45;&gt;</span></span> <span>with_:string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Note that the result of <code>replace_all pattern ~in_:text ~with_:r</code> may still contain <code>pattern</code>, e.g.,</p><pre><code>replace_all (create &quot;bc&quot;) ~in_:&quot;aabbcc&quot; ~with_:&quot;cb&quot; = &quot;aabcbc&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-replace_all" class="anchored"><a href="#val-replace_all" class="anchor"></a><code><span><span class="keyword">val</span> replace_all : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>in_:string <span class="arrow">&#45;&gt;</span></span> <span>with_:string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div></div></body></html>