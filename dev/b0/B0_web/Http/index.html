<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Http (b0.B0_web.Http)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B0_web</a> &#x00BB; Http</nav><h1>Module <code>B0_web.Http</code></h1><p>HTTP requests.</p><p>HTTP requests via <code>curl</code>.</p><nav class="toc"><ul><li><a href="#meth">HTTP methods and headers</a></li><li><a href="#requests">HTTP requests</a></li><li><a href="#responses">HTTP responses</a></li><li><a href="#peforming">Performing requests</a></li></ul></nav></header><section><header><h2 id="meth"><a href="#meth" class="anchor"></a>HTTP methods and headers</h2></header><dl><dt class="spec type" id="type-meth"><a href="#type-meth" class="anchor"></a><code><span class="keyword">type</span> meth</code> = <code>[ </code><table class="variant"><tr id="type-meth.CONNECT" class="anchored"><td class="def constructor"><a href="#type-meth.CONNECT" class="anchor"></a><code>| </code><code>`CONNECT</code></td></tr><tr id="type-meth.DELETE" class="anchored"><td class="def constructor"><a href="#type-meth.DELETE" class="anchor"></a><code>| </code><code>`DELETE</code></td></tr><tr id="type-meth.GET" class="anchored"><td class="def constructor"><a href="#type-meth.GET" class="anchor"></a><code>| </code><code>`GET</code></td></tr><tr id="type-meth.HEAD" class="anchored"><td class="def constructor"><a href="#type-meth.HEAD" class="anchor"></a><code>| </code><code>`HEAD</code></td></tr><tr id="type-meth.OPTIONS" class="anchored"><td class="def constructor"><a href="#type-meth.OPTIONS" class="anchor"></a><code>| </code><code>`OPTIONS</code></td></tr><tr id="type-meth.Other" class="anchored"><td class="def constructor"><a href="#type-meth.Other" class="anchor"></a><code>| </code><code>`Other <span class="keyword">of</span> string</code></td></tr><tr id="type-meth.PATCH" class="anchored"><td class="def constructor"><a href="#type-meth.PATCH" class="anchor"></a><code>| </code><code>`PATCH</code></td></tr><tr id="type-meth.POST" class="anchored"><td class="def constructor"><a href="#type-meth.POST" class="anchor"></a><code>| </code><code>`POST</code></td></tr><tr id="type-meth.PUT" class="anchored"><td class="def constructor"><a href="#type-meth.PUT" class="anchor"></a><code>| </code><code>`PUT</code></td></tr><tr id="type-meth.TRACE" class="anchored"><td class="def constructor"><a href="#type-meth.TRACE" class="anchor"></a><code>| </code><code>`TRACE</code></td></tr></table><code> ]</code></dt><dd><p>The type for HTTP methods.</p></dd></dl><dl><dt class="spec value" id="val-meth_to_string"><a href="#val-meth_to_string" class="anchor"></a><code><span class="keyword">val</span> meth_to_string : <a href="index.html#type-meth">meth</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>meth_to_string m</code> is a string representation of <code>m</code>.</p></dd></dl><dl><dt class="spec type" id="type-headers"><a href="#type-headers" class="anchor"></a><code><span class="keyword">type</span> headers</code><code> = (string * string) list</code></dt><dd><p>The type for HTTP headers.</p></dd></dl></section><section><header><h2 id="requests"><a href="#requests" class="anchor"></a>HTTP requests</h2></header><dl><dt class="spec type" id="type-req"><a href="#type-req" class="anchor"></a><code><span class="keyword">type</span> req</code></dt><dd><p>The type for HTTP requests.</p></dd></dl><dl><dt class="spec value" id="val-req"><a href="#val-req" class="anchor"></a><code><span class="keyword">val</span> req : ?&#8288;headers:<a href="index.html#type-headers">headers</a> <span>&#45;&gt;</span> ?&#8288;body:string <span>&#45;&gt;</span> uri:string <span>&#45;&gt;</span> <a href="index.html#type-meth">meth</a> <span>&#45;&gt;</span> <a href="index.html#type-req">req</a></code></dt><dd><p><code>req uri m ~headers ~body</code> is a request on <code>uri</code> with method <code>m</code>, headers <code>headers</code> (defaults to <code>[]</code>) and body <code>body</code> (defaults to <code>&quot;&quot;</code>).</p></dd></dl><dl><dt class="spec value" id="val-req_uri"><a href="#val-req_uri" class="anchor"></a><code><span class="keyword">val</span> req_uri : <a href="index.html#type-req">req</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>req_uri r</code> is <code>r</code>'s request URI.</p></dd></dl><dl><dt class="spec value" id="val-req_meth"><a href="#val-req_meth" class="anchor"></a><code><span class="keyword">val</span> req_meth : <a href="index.html#type-req">req</a> <span>&#45;&gt;</span> <a href="index.html#type-meth">meth</a></code></dt><dd><p><code>req_meth r</code> is <code>r</code>'s HTTP method.</p></dd></dl><dl><dt class="spec value" id="val-req_headers"><a href="#val-req_headers" class="anchor"></a><code><span class="keyword">val</span> req_headers : <a href="index.html#type-req">req</a> <span>&#45;&gt;</span> <a href="index.html#type-headers">headers</a></code></dt><dd><p><code>req_headers r</code> is <code>r</code>'s headers.</p></dd></dl><dl><dt class="spec value" id="val-req_body"><a href="#val-req_body" class="anchor"></a><code><span class="keyword">val</span> req_body : <a href="index.html#type-req">req</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>req_body r</code> is <code>r</code>'s body.</p></dd></dl></section><section><header><h2 id="responses"><a href="#responses" class="anchor"></a>HTTP responses</h2></header><dl><dt class="spec type" id="type-resp"><a href="#type-resp" class="anchor"></a><code><span class="keyword">type</span> resp</code></dt><dd><p>The type for HTTP responses.</p></dd></dl><dl><dt class="spec value" id="val-resp_headers"><a href="#val-resp_headers" class="anchor"></a><code><span class="keyword">val</span> resp_headers : <a href="index.html#type-resp">resp</a> <span>&#45;&gt;</span> <a href="index.html#type-headers">headers</a></code></dt><dd><p><code>resp_headers r</code> are the HTTP response headers.</p></dd></dl><dl><dt class="spec value" id="val-resp_status"><a href="#val-resp_status" class="anchor"></a><code><span class="keyword">val</span> resp_status : <a href="index.html#type-resp">resp</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>resp_status r</code> is the HTTP response status.</p></dd></dl><dl><dt class="spec value" id="val-resp_body"><a href="#val-resp_body" class="anchor"></a><code><span class="keyword">val</span> resp_body : <a href="index.html#type-resp">resp</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>resp_body r</code> is the HTTP response body.</p></dd></dl></section><section><header><h2 id="peforming"><a href="#peforming" class="anchor"></a>Performing requests</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type for HTTP requestors.</p></dd></dl><dl><dt class="spec value" id="val-curl"><a href="#val-curl" class="anchor"></a><code><span class="keyword">val</span> curl : ?&#8288;docs:string <span>&#45;&gt;</span> ?&#8288;env:<a href="../../../cmdliner/Cmdliner/Arg/index.html#type-env">Cmdliner.Arg.env</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a> <a href="../../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></code></dt><dd><p><code>curl</code> is a cli interface for specifying the curl command line tool.</p></dd></dl><dl><dt class="spec value" id="val-find_curl"><a href="#val-find_curl" class="anchor"></a><code><span class="keyword">val</span> find_curl : ?&#8288;search:<a href="../../B0_std/Fpath/index.html#type-t">B0_std.Fpath.t</a> list <span>&#45;&gt;</span> curl:<a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="index.html#type-t">t</a>, string) <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dt class="spec value" id="val-perform"><a href="#val-perform" class="anchor"></a><code><span class="keyword">val</span> perform : ?&#8288;follow:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-req">req</a> <span>&#45;&gt;</span> (<a href="index.html#type-resp">resp</a>, string) <a href="../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></code></dt><dd><p><code>perform curl r</code> performs request <code>r</code> via <code>curl</code> which is looked up in the PATH or in the environment variable <code>B0_CURL</code>. If <code>follow</code> is <code>true</code> (default) HTTP redirects for GET and HEAD requests that return 301, 302, 303, 305 or 307 are automatically followed.</p></dd></dl></section></div></body></html>