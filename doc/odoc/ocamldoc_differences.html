<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ocamldoc_differences (odoc.ocamldoc_differences)</title><link rel="stylesheet" href="../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> – <a href="index.html">odoc</a> &#x00BB; ocamldoc_differences</nav><header class="odoc-preamble"><h1 id="markup-differences-from-ocamldoc"><a href="#markup-differences-from-ocamldoc" class="anchor"></a>Markup Differences from OCamldoc</h1><p>The canonical description of the markup that <code>odoc</code> understands is in <a href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#s%3Aocamldoc-comments">this section</a> of the OCaml reference manual. The eventual aim is to support the in-code markup in its entirety, although right now there are some gaps. There are also some extensions where <code>odoc</code> goes beyond what is officially supported.</p><p>The example interface <code>foo.mli</code> <a href="https://ocaml.org/manual/ocamldoc.html#ss:ocamldoc-placement">described in the OCaml manual</a> can be seen rendered by <code>odoc</code> <a href="Odoc_examples/Markup/module-type-Foo/index.html">here</a>.</p></header><nav class="odoc-toc"><ul><li><a href="#changes">Changes</a><ul><li><a href="#omissions">Omissions</a></li><li><a href="#improvements">Improvements</a></li></ul></li><li><a href="#reference-syntax">Reference Syntax</a><ul><li><a href="#referencing-items-containing-hyphens-or-dots">Referencing items containing hyphens or dots</a></li></ul></li></ul></nav><div class="odoc-content"><h3 id="changes"><a href="#changes" class="anchor"></a>Changes</h3><p>The following describes the changes between what <code>odoc</code> understands and what’s in the OCaml manual.</p><ul><li>Heading levels are more restrictive. In the manual, it suggests any whole number is acceptable. In <code>odoc</code>, we follow the HTML spec in allowing headings from 1-6, and we also allow heading level <code>0</code> for the title of <code>.mld</code> files. <code>odoc</code> emits a warning for heading levels outside this range and caps them.</li></ul><h4 id="omissions"><a href="#omissions" class="anchor"></a>Omissions</h4><ul><li>Comments describing class inheritance are not rendered (<a href="https://github.com/ocaml/odoc/issues/574">github issue</a>).</li><li><code>odoc</code> handles ambiguous documentation comments as the compiler does (see <a href="https://caml.inria.fr/pub/docs/manual-ocaml/doccomments.html">here</a>) rather than treating them as the OCamldoc manual suggests.</li><li><code>odoc</code> doesn’t ignore tags that don't make sense (e.g., <code>@param</code> tags on instance variables are rendered) (<a href="https://github.com/ocaml/odoc/issues/575">github issue</a>)</li><li><a href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#ss:ocamldoc-formatting">Alignment elements</a> are not handled (<code>{C text}</code>, <code>{L text}</code> and <code>{R text}</code>) (<a href="https://github.com/ocaml/odoc/issues/541">github issue</a>)</li><li><code>odoc</code> does not recognise <a href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#sss:ocamldoc-html-tags">html tags embedded in comments</a> (<a href="https://github.com/ocaml/odoc/issues/576">github issue</a>)</li><li><code>{!indexlist}</code> is not supported (<a href="https://github.com/ocaml/odoc/issues/577">github issue</a>)</li><li>The first paragraph is used for synopses instead of the <a href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#sss:ocamldoc-preamble">first sentence</a>. Synopses are used when rendering declarations (of modules, classes, etc.) and <code>{!modules:...}</code> lists. An other difference is that documentation starting with a heading or something that is not a paragraph won't have a synopsis (<a href="https://github.com/ocaml/odoc/pull/643">github issue</a>).</li></ul><h4 id="improvements"><a href="#improvements" class="anchor"></a>Improvements</h4><ul><li><code>odoc</code> has a better mechanism for disambiguating references in comments. See 'reference syntax' later in this document.</li><li>Built-in support for standalone <code>.mld</code> files. These are documents using the OCamldoc markup, but they’re rendered as distinct pages.</li><li>Structured output: <code>odoc</code> can produce output in a structured directory tree rather a set of files.</li><li>A few extra tags are supported:</li></ul><ol><li><code>@returns</code> is a synonym for <code>@return</code></li><li><code>@raises</code> is a synonym for <code>@raise</code></li><li><code>@open</code> and <code>@closed</code> and <code>@inline</code> are hints for how 'included' signatures should be rendered</li><li><code>@canonical</code> allows a definition of a <code>module</code>, <code>module type</code> or <code>type</code> to be marked as canonically elsewhere.</li></ol><h3 id="reference-syntax"><a href="#reference-syntax" class="anchor"></a>Reference Syntax</h3><p><code>odoc</code> has a far more powerful reference resolution mechanism than OCamldoc. While it supports the mechanism in OCamldoc used for disambiguating between different types of references, it offers a more powerful alternative. The new mechanism allows for disambiguation of each part in a dotted reference rather than just the final part. For example, where the reference manual suggests the syntax <code>{!type:Foo.Bar.t}</code> to designate a type, and <code>{!val:Foo.Bar.t}</code> a value of the same name, the new <code>odoc</code> syntax for these comments would be <code>{!Foo.Bar.type-t}</code> and <code>{!Foo.Bar.val-t}</code>. This allows <code>odoc</code> to disambiguate when there are other ambiguous elements within the path. For example, we can distinguish between a type or <code>value t</code> within a module or module type with the same name: <code>{!module-Foo.module-type-Bar.type-t}</code> or <code>{!module-type-Foo.module-Bar.val-t}</code>.</p><p>Additionally we support extra annotations:</p><ul><li><code>module-type</code> is a replacement for <code>modtype</code></li><li><code>class-type</code> is a replacement for <code>classtype</code></li><li><code>exn</code> is recognised as <code>exception</code></li><li><code>extension</code> refers to a type extension</li><li><code>field</code> is a replacement for <code>recfield</code></li><li><code>instance-variable</code> refers to instance variables</li><li><code>label</code> refers to labels introduced in anchors</li><li><code>page</code> refers to <code>.mld</code> pages as outlined above</li><li><code>value</code> is recognised as <code>val</code></li></ul><h4 id="referencing-items-containing-hyphens-or-dots"><a href="#referencing-items-containing-hyphens-or-dots" class="anchor"></a>Referencing items containing hyphens or dots</h4><p>If it is necessary to reference a reference that contains hyphens or dots - e.g. if you have a file <code>docs-with-dashes.mld</code> or <code>docs.with.dots.mld</code>, to reference them use quotation marks in the reference. For the previous two examples, the references would be <code>{!page-&quot;docs-with-dashes.mld&quot;}</code> and <code>{!page-&quot;docs.with.dots&quot;}</code>.</p></div></body></html>