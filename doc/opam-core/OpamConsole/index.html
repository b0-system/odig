<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamConsole (opam-core.OpamConsole)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">opam-core</a> &#x00BB; OpamConsole</nav><header class="odoc-preamble"><h1>Module <code><span>OpamConsole</span></code></h1><p>Console output, ANSI color, logging and user querying</p></header><div class="odoc-content"><p>Global configuration parameters (read from OpamGlobalConfig, and the environment when necessary)</p><div class="odoc-spec"><div class="spec value" id="val-debug" class="anchored"><a href="#val-debug" class="anchor"></a><code><span><span class="keyword">val</span> debug : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-verbose" class="anchored"><a href="#val-verbose" class="anchor"></a><code><span><span class="keyword">val</span> verbose : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-color" class="anchored"><a href="#val-color" class="anchor"></a><code><span><span class="keyword">val</span> color : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-utf8" class="anchored"><a href="#val-utf8" class="anchor"></a><code><span><span class="keyword">val</span> utf8 : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-utf8_extended" class="anchored"><a href="#val-utf8_extended" class="anchor"></a><code><span><span class="keyword">val</span> utf8_extended : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-disp_status_line" class="anchored"><a href="#val-disp_status_line" class="anchor"></a><code><span><span class="keyword">val</span> disp_status_line : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><p>General text formatting</p><div class="odoc-spec"><div class="spec type" id="type-text_style" class="anchored"><a href="#type-text_style" class="anchor"></a><code><span><span class="keyword">type</span> text_style</span><span> = </span><span>[ </span></code><table><tr id="type-text_style.black" class="anchored"><td class="def constructor"><a href="#type-text_style.black" class="anchor"></a><code><span>| </span></code><code><span>`black</span></code></td></tr><tr id="type-text_style.blue" class="anchored"><td class="def constructor"><a href="#type-text_style.blue" class="anchor"></a><code><span>| </span></code><code><span>`blue</span></code></td></tr><tr id="type-text_style.bold" class="anchored"><td class="def constructor"><a href="#type-text_style.bold" class="anchor"></a><code><span>| </span></code><code><span>`bold</span></code></td></tr><tr id="type-text_style.crossed" class="anchored"><td class="def constructor"><a href="#type-text_style.crossed" class="anchor"></a><code><span>| </span></code><code><span>`crossed</span></code></td></tr><tr id="type-text_style.cyan" class="anchored"><td class="def constructor"><a href="#type-text_style.cyan" class="anchor"></a><code><span>| </span></code><code><span>`cyan</span></code></td></tr><tr id="type-text_style.green" class="anchored"><td class="def constructor"><a href="#type-text_style.green" class="anchor"></a><code><span>| </span></code><code><span>`green</span></code></td></tr><tr id="type-text_style.magenta" class="anchored"><td class="def constructor"><a href="#type-text_style.magenta" class="anchor"></a><code><span>| </span></code><code><span>`magenta</span></code></td></tr><tr id="type-text_style.red" class="anchored"><td class="def constructor"><a href="#type-text_style.red" class="anchor"></a><code><span>| </span></code><code><span>`red</span></code></td></tr><tr id="type-text_style.underline" class="anchored"><td class="def constructor"><a href="#type-text_style.underline" class="anchor"></a><code><span>| </span></code><code><span>`underline</span></code></td></tr><tr id="type-text_style.white" class="anchored"><td class="def constructor"><a href="#type-text_style.white" class="anchor"></a><code><span>| </span></code><code><span>`white</span></code></td></tr><tr id="type-text_style.yellow" class="anchored"><td class="def constructor"><a href="#type-text_style.yellow" class="anchor"></a><code><span>| </span></code><code><span>`yellow</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Settable attributes for ANSI terminal output. Nesting is generally not handled.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-colorise" class="anchored"><a href="#val-colorise" class="anchor"></a><code><span><span class="keyword">val</span> colorise : <span><a href="#type-text_style">text_style</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Helper coloring functions. Returns the string unchanged if color is disabled</p></div></div><div class="odoc-spec"><div class="spec value" id="val-colorise'" class="anchored"><a href="#val-colorise'" class="anchor"></a><code><span><span class="keyword">val</span> colorise' : <span><span><a href="#type-text_style">text_style</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-acolor" class="anchored"><a href="#val-acolor" class="anchor"></a><code><span><span class="keyword">val</span> acolor : <span><a href="#type-text_style">text_style</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-acolor_w" class="anchored"><a href="#val-acolor_w" class="anchor"></a><code><span><span class="keyword">val</span> acolor_w : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-text_style">text_style</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Symbols" class="anchored"><a href="#module-Symbols" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Symbols/index.html">Symbols</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-utf8_symbol" class="anchored"><a href="#val-utf8_symbol" class="anchor"></a><code><span><span class="keyword">val</span> utf8_symbol : <span><a href="../../ocaml/Stdlib/Uchar/index.html#type-t">OpamCompat.Uchar.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?alternates:<span><a href="../../ocaml/Stdlib/Uchar/index.html#type-t">OpamCompat.Uchar.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><p>Logging</p><div class="odoc-spec"><div class="spec value" id="val-timer" class="anchored"><a href="#val-timer" class="anchor"></a><code><span><span class="keyword">val</span> timer : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Timers, only active when debug is on. Returns the time between the application to each argument, in seconds</p></div></div><div class="odoc-spec"><div class="spec value" id="val-log" class="anchored"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <span>string <span class="arrow">&#45;&gt;</span></span> <span>?level:int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a>, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format">format</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>log section ~level fmt args</code>. Used for debug messages, default level is 1</p></div></div><div class="odoc-spec"><div class="spec value" id="val-slog" class="anchored"><a href="#val-slog" class="anchor"></a><code><span><span class="keyword">val</span> slog : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Helper to pass stringifiers to log (use <code>log &quot;%a&quot; (slog to_string) x</code> rather than <code>log &quot;%s&quot; (to_string x)</code> to avoid costly unneeded stringifications</p></div></div><div class="odoc-spec"><div class="spec value" id="val-error" class="anchored"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-warning" class="anchored"><a href="#val-warning" class="anchor"></a><code><span><span class="keyword">val</span> warning : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-note" class="anchored"><a href="#val-note" class="anchor"></a><code><span><span class="keyword">val</span> note : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-errmsg" class="anchored"><a href="#val-errmsg" class="anchor"></a><code><span><span class="keyword">val</span> errmsg : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Message without prefix, reformat or newline, to stderr (useful to continue error messages without repeating &quot;<code>ERROR</code>&quot;)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-error_and_exit" class="anchored"><a href="#val-error_and_exit" class="anchor"></a><code><span><span class="keyword">val</span> error_and_exit : <span><a href="../OpamStd/Sys/index.html#type-exit_reason">OpamStd.Sys.exit_reason</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, string, <span class="type-var">'b</span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-msg" class="anchored"><a href="#val-msg" class="anchor"></a><code><span><span class="keyword">val</span> msg : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-formatted_msg" class="anchored"><a href="#val-formatted_msg" class="anchor"></a><code><span><span class="keyword">val</span> formatted_msg : <span>?indent:int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-header_msg" class="anchored"><a href="#val-header_msg" class="anchor"></a><code><span><span class="keyword">val</span> header_msg : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-header_error" class="anchored"><a href="#val-header_error" class="anchor"></a><code><span><span class="keyword">val</span> header_error : <span><span><span>(<span class="type-var">'a</span>, unit, string, <span><span><span>(<span class="type-var">'b</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-carriage_delete" class="anchored"><a href="#val-carriage_delete" class="anchor"></a><code><span><span class="keyword">val</span> carriage_delete : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Erase the current line on stdout (doesn't flush stdout)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-status_line" class="anchored"><a href="#val-status_line" class="anchor"></a><code><span><span class="keyword">val</span> status_line : <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Display a dynamic status line to stdout, that will be erased on next call. The message should not be wider than screen nor contain newlines. Use <a href="#val-clear_status"><code>clear_status</code></a> when the status line should be erased.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_status" class="anchored"><a href="#val-clear_status" class="anchor"></a><code><span><span class="keyword">val</span> clear_status : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Erase the status line and restore the cursor to the start of the line</p></div></div><div class="odoc-spec"><div class="spec value" id="val-confirm" class="anchored"><a href="#val-confirm" class="anchor"></a><code><span><span class="keyword">val</span> confirm : <span>?default:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, string, bool)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Ask the user to press Y/y/N/n to continue (returns a boolean). Defaults to true (yes) if unspecified</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span><span>(<span class="type-var">'a</span>, unit, string, <span>string option</span>)</span> <a href="../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Read some input from the user (returns a string option)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_table" class="anchored"><a href="#val-print_table" class="anchor"></a><code><span><span class="keyword">val</span> print_table : <span>?cut:<span>[ <span>`Wrap of string</span> <span>| `Truncate</span> <span>| `None</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../ocaml/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> <span>sep:string <span class="arrow">&#45;&gt;</span></span>
<span><span><span>string list</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Prints a table; generally called on tables passed through <code>align_table</code>. The default <code>cut</code> is to wrap on stdout, stderr, keep as-is otherwise. <code>`Wrap sep</code> prepends <code>sep</code> on wrapped lines</p></div></div></div></body></html>