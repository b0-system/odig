<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ASYNCHRONOUS (markup.Markup.ASYNCHRONOUS)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">markup</a> &#x00BB; <a href="../index.html">Markup</a> &#x00BB; ASYNCHRONOUS</nav><h1>Module type <code>Markup.ASYNCHRONOUS</code></h1><p>Markup.ml interface for monadic I/O libraries such as Lwt and Async.</p><p>This signature is implemented by <code>Markup_lwt</code>, with a few additions.</p><p>Each function here corresponds directly to the function in the basic module <a href="../index.html"><code>Markup</code></a> that has the same name. So, see <a href="../index.html"><code>Markup</code></a> for details.</p><p>The only difference is that functions here, all of which are higher-order functions, take a function as argument that returns an <code>'a io</code> promise, rather than returning an already-computed value.</p><nav class="toc"><ul><li><a href="#promises">Promises</a></li><li><a href="#encodings">Encodings</a></li><li><a href="#xml">XML</a></li><li><a href="#html">HTML</a></li><li><a href="#i/o">I/O</a></li><li><a href="#stream-manipulation">Stream manipulation</a></li><li><a href="#utility">Utility</a></li></ul></nav></header><section><header><h3 id="promises"><a href="#promises" class="anchor"></a>Promises</h3></header><dl><dt class="spec type" id="type-io"><a href="#type-io" class="anchor"></a><code><span class="keyword">type</span> 'a io</code></dt><dd><p>Promise type. Replaced by <code>'a Lwt.t</code> in <code>Markup_lwt</code>.</p></dd></dl></section><section><header><h3 id="encodings"><a href="#encodings" class="anchor"></a>Encodings</h3></header><dl><dt class="spec module" id="module-Encoding"><a href="#module-Encoding" class="anchor"></a><code><span class="keyword">module</span> <a href="Encoding/index.html">Encoding</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Asynchronous counterpart to <a href="../Encoding/index.html"><code>Markup.Encoding</code></a>.</p></dd></dl></section><section><header><h3 id="xml"><a href="#xml" class="anchor"></a>XML</h3></header><dl><dt class="spec value" id="val-parse_xml"><a href="#val-parse_xml" class="anchor"></a><code><span class="keyword">val</span> parse_xml : ?&#8288;report:(<a href="../index.html#type-location">location</a> <span>&#45;&gt;</span> <a href="../Error/index.html#type-t">Error.t</a> <span>&#45;&gt;</span> unit <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> ?&#8288;encoding:<a href="Encoding/index.html#type-t">Encoding.t</a> <span>&#45;&gt;</span> ?&#8288;namespace:(string <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ?&#8288;entity:(string <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ?&#8288;context:[&lt; `Document | `Fragment ] <span>&#45;&gt;</span> (char, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <a href="../index.html#type-async">async</a> <a href="../index.html#type-parser">parser</a></code></dt><dt class="spec value" id="val-write_xml"><a href="#val-write_xml" class="anchor"></a><code><span class="keyword">val</span> write_xml : ?&#8288;report:((<a href="../index.html#type-signal">signal</a> * int) <span>&#45;&gt;</span> <a href="../Error/index.html#type-t">Error.t</a> <span>&#45;&gt;</span> unit <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> ?&#8288;prefix:(string <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ([&lt; <a href="../index.html#type-signal">signal</a> ], <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (char, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt></dl></section><section><header><h3 id="html"><a href="#html" class="anchor"></a>HTML</h3></header><dl><dt class="spec value" id="val-parse_html"><a href="#val-parse_html" class="anchor"></a><code><span class="keyword">val</span> parse_html : ?&#8288;report:(<a href="../index.html#type-location">location</a> <span>&#45;&gt;</span> <a href="../Error/index.html#type-t">Error.t</a> <span>&#45;&gt;</span> unit <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> ?&#8288;encoding:<a href="Encoding/index.html#type-t">Encoding.t</a> <span>&#45;&gt;</span> ?&#8288;context:[&lt; `Document | `Fragment of string ] <span>&#45;&gt;</span> (char, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <a href="../index.html#type-async">async</a> <a href="../index.html#type-parser">parser</a></code></dt><dt class="spec value" id="val-write_html"><a href="#val-write_html" class="anchor"></a><code><span class="keyword">val</span> write_html : ([&lt; <a href="../index.html#type-signal">signal</a> ], <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (char, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt></dl></section><section><header><h3 id="i/o"><a href="#i/o" class="anchor"></a>I/O</h3></header><dl><dt class="spec value" id="val-fn"><a href="#val-fn" class="anchor"></a><code><span class="keyword">val</span> fn : (unit <span>&#45;&gt;</span> char option <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> (char, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : (char, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> string <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-to_buffer"><a href="#val-to_buffer" class="anchor"></a><code><span class="keyword">val</span> to_buffer : (char, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <a href="../../../ocaml/Stdlib/Buffer/index.html#type-t">Stdlib.Buffer.t</a> <a href="index.html#type-io">io</a></code></dt></dl></section><section><header><h3 id="stream-manipulation"><a href="#stream-manipulation" class="anchor"></a>Stream manipulation</h3></header><dl><dt class="spec value" id="val-stream"><a href="#val-stream" class="anchor"></a><code><span class="keyword">val</span> stream : (unit <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt><dt class="spec value" id="val-next"><a href="#val-next" class="anchor"></a><code><span class="keyword">val</span> next : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span class="keyword">val</span> peek : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-transform"><a href="#val-transform" class="anchor"></a><code><span class="keyword">val</span> transform : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> (<span class="type-var">'c</span> list * <span class="type-var">'a</span> option) <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val</span> filter_map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <a href="../index.html#type-async">async</a>) <a href="../index.html#type-stream">stream</a></code></dt><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit <a href="index.html#type-io">io</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> unit <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-drain"><a href="#val-drain" class="anchor"></a><code><span class="keyword">val</span> drain : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> unit <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span class="keyword">val</span> to_list : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="index.html#type-io">io</a></code></dt><dt class="spec value" id="val-load"><a href="#val-load" class="anchor"></a><code><span class="keyword">val</span> load : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <a href="../index.html#type-sync">sync</a>) <a href="../index.html#type-stream">stream</a> <a href="index.html#type-io">io</a></code></dt><dd><p><code>load s</code> converts a general stream <code>s</code> to a synchronous stream by buffering it.</p></dd></dl></section><section><header><h3 id="utility"><a href="#utility" class="anchor"></a>Utility</h3></header><dl><dt class="spec value" id="val-tree"><a href="#val-tree" class="anchor"></a><code><span class="keyword">val</span> tree : ?&#8288;text:(string list <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> ?&#8288;element:(<a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> (<a href="../index.html#type-name">name</a> * string) list <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> ?&#8288;comment:(string <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> ?&#8288;pi:(string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> ?&#8288;xml:(<a href="../index.html#type-xml_declaration">xml_declaration</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> ?&#8288;doctype:(<a href="../index.html#type-doctype">doctype</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> ([&lt; <a href="../index.html#type-signal">signal</a> ], <span class="type-var">_</span>) <a href="../index.html#type-stream">stream</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-io">io</a></code></dt></dl></section></div></body></html>