<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tool (b0.B00.Tool)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B00</a> &#x00BB; Tool</nav><h1>Module <code>B00.Tool</code></h1><p>Command line tools.</p><p>A tool is specified either by name, to be looked up via an unspecified mecanism, or by a file path to an executable file. It also declares the environment variables it accesses in the process environment and whether and how it supports response files.</p><p>Declared environment variables are split into relevant and shielded variables. A relevant variable is a variable whose value influences the tool's output. A shielded variable is a variable whose value does not influence the tool's output but is nonetheless essential to its operation. Shielded environment variables do not appear in the spawn environment signature which is used to memoize tool spawns. Variables specifying the location of <a href="index.html#val-tmp_vars"><span>temporary file directories</span></a> are good examples of shielded variables.</p><p><b>Portability.</b> In order to maximize portability no <code>.exe</code> suffix should be added to executable names on Windows, the search procedure will add the suffix during the tool search procedure if absent.</p><nav class="toc"><ul><li><a href="#env">Environment variables</a></li><li><a href="#resp">Response files</a></li><li><a href="#tools">Tools</a></li></ul></nav></header><section><header><h2 id="env"><a href="#env" class="anchor"></a>Environment variables</h2></header><dl><dt class="spec type" id="type-env_vars"><a href="#type-env_vars" class="anchor"></a><code><span class="keyword">type</span> env_vars</code><code> = string list</code></dt><dd><p>The type for lists of environment variable names.</p></dd></dl><dl><dt class="spec value" id="val-tmp_vars"><a href="#val-tmp_vars" class="anchor"></a><code><span class="keyword">val</span> tmp_vars : <a href="index.html#type-env_vars">env_vars</a></code></dt><dd><p><code>tmp_vars</code> is <code>[&quot;TMPDIR&quot;; &quot;TEMP&quot;; &quot;TMP&quot;]</code>.</p></dd></dl></section><section><header><h2 id="resp"><a href="#resp" class="anchor"></a>Response files</h2></header><dl><dt class="spec type" id="type-response_file"><a href="#type-response_file" class="anchor"></a><code><span class="keyword">type</span> response_file</code></dt><dd><p>The type for response file specification.</p></dd></dl><dl><dt class="spec value" id="val-response_file_of"><a href="#val-response_file_of" class="anchor"></a><code><span class="keyword">val</span> response_file_of : (<a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> (<a href="../../B0_std/Fpath/index.html#type-t">B0_std.Fpath.t</a> <span>&#45;&gt;</span> <a href="../../B0_std/Cmd/index.html#type-t">B0_std.Cmd.t</a>) <span>&#45;&gt;</span> <a href="index.html#type-response_file">response_file</a></code></dt><dd><p><code>response_file_of to_file cli</code> is a response file specification that uses <code>to_file cmd</code> to convert the command line <code>cmd</code> to a response file content and <code>cli f</code> a command line fragment to be given to the tool so that it treats file <code>f</code> as a response file.</p></dd></dl><dl><dt class="spec value" id="val-args0"><a href="#val-args0" class="anchor"></a><code><span class="keyword">val</span> args0 : <a href="index.html#type-response_file">response_file</a></code></dt><dd><p><code>args0</code> is response file support for tools that reads null byte (<code>0x00</code>) terminated arguments response files via an <code>-args0
      FILE</code> command line synopsis.</p></dd></dl></section><section><header><h2 id="tools"><a href="#tools" class="anchor"></a>Tools</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type for tools.</p></dd></dl><dl><dt class="spec value" id="val-v"><a href="#val-v" class="anchor"></a><code><span class="keyword">val</span> v : ?&#8288;response_file:<a href="index.html#type-response_file">response_file</a> <span>&#45;&gt;</span> ?&#8288;shielded_vars:<a href="index.html#type-env_vars">env_vars</a> <span>&#45;&gt;</span> ?&#8288;vars:<a href="index.html#type-env_vars">env_vars</a> <span>&#45;&gt;</span> <a href="../../B0_std/Cmd/index.html#type-tool">B0_std.Cmd.tool</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>v ~response_file ~shielded_vars ~vars cmd</code> is a tool specified by <code>cmd</code>. <code>vars</code> are the relevant variables accessed by the tool (defaults to <code>[]</code>). <code>shielded_vars</code> are the shielded variables accessed by the tool (defaults to <a href="index.html#val-tmp_vars"><code>tmp_vars</code></a>). <code>response_file</code> defines the reponse file support for the tool (if any).</p></dd></dl><dl><dt class="spec value" id="val-by_name"><a href="#val-by_name" class="anchor"></a><code><span class="keyword">val</span> by_name : ?&#8288;response_file:<a href="index.html#type-response_file">response_file</a> <span>&#45;&gt;</span> ?&#8288;shielded_vars:<a href="index.html#type-env_vars">env_vars</a> <span>&#45;&gt;</span> ?&#8288;vars:<a href="index.html#type-env_vars">env_vars</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>by_name</code> is like <a href="index.html#val-v"><code>v</code></a> but reference the tool directly via a name.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <span class="xref-unresolved" title="unresolved reference to &quot;Fpath.is_seg&quot;"><code>Fpath</code>.is_seg</span> <code>name</code> is <code>false</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B0_std/Cmd/index.html#type-tool">B0_std.Cmd.tool</a></code></dt><dd><p><code>name t</code> is <code>t</code>'s tool name. If this is a relative file path with a single segment the tool is meant to be searched via an external mecanism.</p></dd></dl><dl><dt class="spec value" id="val-vars"><a href="#val-vars" class="anchor"></a><code><span class="keyword">val</span> vars : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-env_vars">env_vars</a></code></dt><dd><p><code>vars t</code> are the relevant environment variables accessed by <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-shielded_vars"><a href="#val-shielded_vars" class="anchor"></a><code><span class="keyword">val</span> shielded_vars : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-env_vars">env_vars</a></code></dt><dd><p><code>shieled_vars t</code> are the shielded environment variables accessed by <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-response_file"><a href="#val-response_file" class="anchor"></a><code><span class="keyword">val</span> response_file : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-response_file">response_file</a> option</code></dt><dd><p><code>response_file t</code> is <code>t</code>'s response file specification (if any).</p></dd></dl><dl><dt class="spec value" id="val-read_env"><a href="#val-read_env" class="anchor"></a><code><span class="keyword">val</span> read_env : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../B0_std/Os/Env/index.html#type-t">B0_std.Os.Env.t</a> <span>&#45;&gt;</span> <a href="../../B0_std/Os/Env/index.html#type-t">B0_std.Os.Env.t</a> * <a href="../../B0_std/Os/Env/index.html#type-t">B0_std.Os.Env.t</a></code></dt><dd><p><code>read_env t env</code> is (all, relevant) with <code>all</code> the environment with the variables of <code>env</code> that are in <code>vars t</code> and <code>shielded_vars t</code> and <code>relevant</code> those of <code>vars t</code> only.</p></dd></dl></section></div></body></html>