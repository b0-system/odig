<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Parser_automaton_internal (parsexp.Parsexp__.Parser_automaton_internal)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">parsexp</a> &#x00BB; <a href="../index.html">Parsexp__</a> &#x00BB; Parser_automaton_internal</nav><h1>Module <code>Parsexp__.Parser_automaton_internal</code></h1></header><aside><p>Internal bits used by the generated automaton, not part of the public API</p></aside><div class="spec module" id="module-Public"><a href="#module-Public" class="anchor"></a><code><span class="keyword">module</span> <a href="Public/index.html">Public</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span class="keyword">module</span> <a href="Error/index.html">Error</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-context"><a href="#type-context" class="anchor"></a><code><span class="keyword">type</span> context</code><code> = </code><table class="variant"><tr id="type-context.Sexp_comment" class="anchored"><td class="def constructor"><a href="#type-context.Sexp_comment" class="anchor"></a><code>| </code><code><span class="constructor">Sexp_comment</span></code></td></tr><tr id="type-context.Sexp" class="anchored"><td class="def constructor"><a href="#type-context.Sexp" class="anchor"></a><code>| </code><code><span class="constructor">Sexp</span></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-context"><a href="#val-context" class="anchor"></a><code><span class="keyword">val</span> context : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> <a href="index.html#type-context">context</a></code></dt><dt class="spec value" id="val-set_automaton_state"><a href="#val-set_automaton_state" class="anchor"></a><code><span class="keyword">val</span> set_automaton_state : (<span class="type-var">'u</span>, <span class="type-var">'s</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-advance"><a href="#val-advance" class="anchor"></a><code><span class="keyword">val</span> advance : (<span class="type-var">'u</span>, <span class="type-var">'s</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Advance the position counters. <code>advance_eol</code> is for when we read a newline character.</p></dd></dl><dl><dt class="spec value" id="val-advance_eol"><a href="#val-advance_eol" class="anchor"></a><code><span class="keyword">val</span> advance_eol : (<span class="type-var">'u</span>, <span class="type-var">'s</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-block_comment_depth"><a href="#val-block_comment_depth" class="anchor"></a><code><span class="keyword">val</span> block_comment_depth : (<span class="type-var">'u</span>, <span class="type-var">'s</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Number of opened #|</p></dd></dl><dl><dt class="spec type" id="type-action"><a href="#type-action" class="anchor"></a><code><span class="keyword">type</span> ('u, 's) action</code><code> = (<span class="type-var">'u</span>, <span class="type-var">'s</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> char <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> <span class="type-var">'s</span></code></dt><dt class="spec type" id="type-epsilon_action"><a href="#type-epsilon_action" class="anchor"></a><code><span class="keyword">type</span> ('u, 's) epsilon_action</code><code> = (<span class="type-var">'u</span>, <span class="type-var">'s</span>) <a href="Public/index.html#type-state">Public.state</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> <span class="type-var">'s</span></code></dt></dl><dl><dt class="spec value" id="val-add_atom_char"><a href="#val-add_atom_char" class="anchor"></a><code><span class="keyword">val</span> add_atom_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Add a character to the atom buffer. <code>add_quoted_atom_char</code> does the same for quoted atoms</p></dd></dl><dl><dt class="spec value" id="val-add_quoted_atom_char"><a href="#val-add_quoted_atom_char" class="anchor"></a><code><span class="keyword">val</span> add_quoted_atom_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-add_escaped"><a href="#val-add_escaped" class="anchor"></a><code><span class="keyword">val</span> add_escaped : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Add a character that just follows a '\\' and the '\\' itself if necessary.</p></dd></dl><dl><dt class="spec value" id="val-add_dec_escape_char"><a href="#val-add_dec_escape_char" class="anchor"></a><code><span class="keyword">val</span> add_dec_escape_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p><code>escaped_value &lt;- escaped_value * 10 + (char - '0')</code></p><p>These functions make the assumption that <code>char</code> is between '0' and '9'. <code>add_dec_escape_char</code> also assumes the result doesn't overflow. The automaton definition must make sure this is the case.</p><p><code>add_last_dec_escape_char</code> also adds the resulting character to the atom buffer.</p></dd></dl><dl><dt class="spec value" id="val-add_last_dec_escape_char"><a href="#val-add_last_dec_escape_char" class="anchor"></a><code><span class="keyword">val</span> add_last_dec_escape_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-comment_add_last_dec_escape_char"><a href="#val-comment_add_last_dec_escape_char" class="anchor"></a><code><span class="keyword">val</span> comment_add_last_dec_escape_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Same but for quoted strings inside comments. Useful because it can fail.</p></dd></dl><dl><dt class="spec value" id="val-add_hex_escape_char"><a href="#val-add_hex_escape_char" class="anchor"></a><code><span class="keyword">val</span> add_hex_escape_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Same as <code>add_dec_escape_char</code> but for hexadicemal escape sequences</p></dd></dl><dl><dt class="spec value" id="val-add_last_hex_escape_char"><a href="#val-add_last_hex_escape_char" class="anchor"></a><code><span class="keyword">val</span> add_last_hex_escape_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-start_sexp_comment"><a href="#val-start_sexp_comment" class="anchor"></a><code><span class="keyword">val</span> start_sexp_comment : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Ignore one more full sexp to come</p></dd></dl><dl><dt class="spec value" id="val-add_first_char"><a href="#val-add_first_char" class="anchor"></a><code><span class="keyword">val</span> add_first_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Add the first char of an unquoted atom.</p></dd></dl><dl><dt class="spec value" id="val-start_quoted_string"><a href="#val-start_quoted_string" class="anchor"></a><code><span class="keyword">val</span> start_quoted_string : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-add_token_char"><a href="#val-add_token_char" class="anchor"></a><code><span class="keyword">val</span> add_token_char : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dd><p>Takes note of a control character in quoted atoms or the uninterpreted characters of comments, for which there is no corresponding <code>add_*</code> call (a backslash and the x in &quot;\xff&quot; or any character in a line comment). This does not get called for the opening (<code>start_quoted_string</code>) or closing (<code>push_quoted_atom</code>) quotes themselves.</p></dd></dl><dl><dt class="spec value" id="val-opening"><a href="#val-opening" class="anchor"></a><code><span class="keyword">val</span> opening : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-closing"><a href="#val-closing" class="anchor"></a><code><span class="keyword">val</span> closing : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-push_quoted_atom"><a href="#val-push_quoted_atom" class="anchor"></a><code><span class="keyword">val</span> push_quoted_atom : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-start_block_comment"><a href="#val-start_block_comment" class="anchor"></a><code><span class="keyword">val</span> start_block_comment : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-end_block_comment"><a href="#val-end_block_comment" class="anchor"></a><code><span class="keyword">val</span> end_block_comment : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-start_line_comment"><a href="#val-start_line_comment" class="anchor"></a><code><span class="keyword">val</span> start_line_comment : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-action">action</a></code></dt><dt class="spec value" id="val-end_line_comment"><a href="#val-end_line_comment" class="anchor"></a><code><span class="keyword">val</span> end_line_comment : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-epsilon_action">epsilon_action</a></code></dt><dt class="spec value" id="val-eps_push_atom"><a href="#val-eps_push_atom" class="anchor"></a><code><span class="keyword">val</span> eps_push_atom : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-epsilon_action">epsilon_action</a></code></dt><dt class="spec value" id="val-eps_add_first_char_hash"><a href="#val-eps_add_first_char_hash" class="anchor"></a><code><span class="keyword">val</span> eps_add_first_char_hash : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-epsilon_action">epsilon_action</a></code></dt><dt class="spec value" id="val-eps_eoi_check"><a href="#val-eps_eoi_check" class="anchor"></a><code><span class="keyword">val</span> eps_eoi_check : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-epsilon_action">epsilon_action</a></code></dt><dt class="spec value" id="val-eps_add_escaped_cr"><a href="#val-eps_add_escaped_cr" class="anchor"></a><code><span class="keyword">val</span> eps_add_escaped_cr : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-epsilon_action">epsilon_action</a></code></dt></dl></div></body></html>