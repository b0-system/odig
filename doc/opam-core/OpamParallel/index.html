<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamParallel (opam-core.OpamParallel)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">opam-core</a> &#x00BB; OpamParallel</nav><header class="odoc-preamble"><h1>Module <code><span>OpamParallel</span></code></h1><p>Parallel execution of jobs following a directed graph</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module-type" id="module-type-VERTEX" class="anchored"><a href="#module-type-VERTEX" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-VERTEX/index.html">VERTEX</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-dependency_label" class="anchored"><a href="#type-dependency_label" class="anchor"></a><code><span><span class="keyword">type</span> dependency_label</span><span> = unit</span></code></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-G" class="anchored"><a href="#module-type-G" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-G/index.html">G</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Aborted" class="anchored"><a href="#exception-Aborted" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Aborted</span></span></code></div><div class="spec-doc"><p>When one job fails due to an exception, other running jobs are interrupted and reported with this sub-exception in the Errors list</p></div></div><p>Simply parallel execution of tasks</p><div class="odoc-spec"><div class="spec exception" id="exception-Errors" class="anchored"><a href="#exception-Errors" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Errors</span> <span class="keyword">of</span> <span>int list</span> * <span><span>(int * exn)</span> list</span> * <span>int list</span></span></code></div><div class="spec-doc"><p>In the simple iter, map and reduce cases, ints are the indexes of the jobs in the list. First list is return code of sucessfull commands, second those which raised expcetions, and third one those which were canceled.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iter" class="anchored"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span>jobs:int <span class="arrow">&#45;&gt;</span></span> <span>command:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>?dry_run:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span>jobs:int <span class="arrow">&#45;&gt;</span></span> <span>command:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>?dry_run:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-reduce" class="anchored"><a href="#val-reduce" class="anchor"></a><code><span><span class="keyword">val</span> reduce : <span>jobs:int <span class="arrow">&#45;&gt;</span></span> <span>command:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>merge:<span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>nil:<span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
<span>?dry_run:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><p>More complex parallelism with dependency graphs</p><div class="odoc-spec"><div class="spec module-type" id="module-type-SIG" class="anchored"><a href="#module-type-SIG" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-SIG/index.html">SIG</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Make" class="anchored"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-G/index.html">G</a> : <a href="module-type-G/index.html">G</a>) : <a href="module-type-SIG/index.html">SIG</a> <span class="keyword">with</span> <span><span class="keyword">module</span> <a href="module-type-SIG/G/index.html">G</a> = <a href="Make/argument-1-G/index.html">G</a></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="Make/argument-1-G/V/index.html#type-t">G.V.t</a> = <a href="Make/argument-1-G/V/index.html#type-t">G.V.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-GRAPH" class="anchored"><a href="#module-type-GRAPH" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-GRAPH/index.html">GRAPH</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-MakeGraph" class="anchored"><a href="#module-MakeGraph" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="MakeGraph/index.html">MakeGraph</a></span><span> (<a href="MakeGraph/argument-1-V/index.html">V</a> : <a href="module-type-VERTEX/index.html">VERTEX</a>) : <a href="module-type-GRAPH/index.html">GRAPH</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-GRAPH/V/index.html#type-t">V.t</a> = <a href="MakeGraph/argument-1-V/index.html#type-t">V.t</a></span></span></code></div></div></div></body></html>