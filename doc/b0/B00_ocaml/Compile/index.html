<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Compile (b0.B00_ocaml.Compile)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B00_ocaml</a> &#x00BB; Compile</nav><header class="odoc-preamble"><h1>Module <code><span>B00_ocaml.Compile</span></code></h1><p>Compiling.</p><p>Tool invocations for compiling.</p></header><nav class="odoc-toc"><ul><li><a href="#srcs"><code>Mod.Src</code> convenience</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-c_to_o" class="anchored"><a href="#val-c_to_o" class="anchor"></a><code><span><span class="keyword">val</span> c_to_o : <span>?post_exec:<span>(<span><a href="../../B000/Op/index.html#type-t">B000.Op.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>?k:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>comp:<a href="../../B00/Tool/index.html#type-t">B00.Tool.t</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span> <span>reads:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span>
<span class="arrow">&#45;&gt;</span></span> <span>c:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>o:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>c_to_o m ~comp ~opts ~reads ~c ~o</code> compiles the C file <code>c</code> to the object file <code>o</code> with options <code>opts</code> and using compiler <code>comp</code>. It assumes the compilation depends on C include header files <code>reads</code> whose parent directories are added as <code>-I</code> options.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mli_to_cmi" class="anchored"><a href="#val-mli_to_cmi" class="anchor"></a><code><span><span class="keyword">val</span> mli_to_cmi : <span>?post_exec:<span>(<span><a href="../../B000/Op/index.html#type-t">B000.Op.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>?k:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>and_cmti:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>comp:<a href="../../B00/Tool/index.html#type-t">B00.Tool.t</a> <span class="arrow">&#45;&gt;</span></span>
<span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span> <span>reads:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>mli:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>o:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>mli_to_cmi ~and_cmti m ~comp ~opts ~reads ~mli ~o</code> compiles the file <code>mli</code> to the cmi file <code>o</code> and, if <code>and_cmti</code> is <code>true</code>, to the cmti file <code>Fpath.(o -+ &quot;.cmti&quot;)</code> with options <code>opts</code> and using compiler <code>comp</code>. It assumes the compilation depends on cmi files <code>reads</code> whose parent directories are added as <code>-I</code> options.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ml_to_cmo" class="anchored"><a href="#val-ml_to_cmo" class="anchor"></a><code><span><span class="keyword">val</span> ml_to_cmo : <span>?post_exec:<span>(<span><a href="../../B000/Op/index.html#type-t">B000.Op.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>?k:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>and_cmt:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
<span>reads:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>has_cmi:bool <span class="arrow">&#45;&gt;</span></span> <span>ml:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>o:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ml_to_cmo ~and_cmt m ~opts ~reads ~has_cmi ~ml ~o</code> compiles the file <code>ml</code> to cmo file <code>o</code> and, if <code>and_cmt</code> is <code>true</code>, to the cmt file <code>Fpath.(o -+ &quot;.cmt&quot;)</code> with options <code>opts</code>. It assumes the compilation depends on the cmi files <code>reads</code> whose parent directories are added as <code>-I</code> options. <code>has_cmi</code> indicates whether the <code>ml</code> file already a corresponding cmi file, in which case it should be in <code>reads</code> (FIXME specify path directly ?).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ml_to_cmx" class="anchored"><a href="#val-ml_to_cmx" class="anchor"></a><code><span><span class="keyword">val</span> ml_to_cmx : <span>?post_exec:<span>(<span><a href="../../B000/Op/index.html#type-t">B000.Op.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>?k:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>and_cmt:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
<span>reads:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>has_cmi:bool <span class="arrow">&#45;&gt;</span></span> <span>ml:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>o:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ml_to_cmx ~and_cmt m ~opts ~reads ~has_cmi ~ml ~o ~and_cmt</code> compiles the file <code>ml</code> to cmx file <code>o</code> and, if <code>and_cmt</code> is <code>true</code>, to the cmt file <code>Fpath.(o -+ &quot;.cmt&quot;)</code> with options <code>opts</code>. It assumes the compilation depends on the cmi and cmx files <code>reads</code> whose parent directories are added as <code>-I</code> options. <code>has_cmi</code> indicates whether the <code>ml</code> file already has a corresponding cmi file, in which case it should be in <code>reads</code> (FIXME specify path directly ?).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ml_to_impl" class="anchored"><a href="#val-ml_to_impl" class="anchor"></a><code><span><span class="keyword">val</span> ml_to_impl : <span>?post_exec:<span>(<span><a href="../../B000/Op/index.html#type-t">B000.Op.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>?k:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>code:<a href="../Conf/index.html#type-code">Conf.code</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
<span>reads:<span><a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>has_cmi:bool <span class="arrow">&#45;&gt;</span></span> <span>ml:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>o:<a href="../../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>and_cmt:bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>ml_to_impl</code> is <a href="#val-ml_to_cmo"><code>ml_to_cmo</code></a> or <a href="#val-ml_to_cmx"><code>ml_to_cmx</code></a> according to <code>code</code>. Beware that the given arguments must be common to both</p></div></div><h2 id="srcs"><a href="#srcs" class="anchor"></a><code>Mod.Src</code> convenience</h2><p>A few helpers that deal directly with the <a href="../Mod/Src/index.html"><code>Mod.Src</code></a> abstraction.</p><div class="odoc-spec"><div class="spec value" id="val-mod_src_intf" class="anchored"><a href="#val-mod_src_intf" class="anchor"></a><code><span><span class="keyword">val</span> mod_src_intf : <span>and_cmti:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>comp:<a href="../../B00/Tool/index.html#type-t">B00.Tool.t</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span> <span>requires:<span><a href="../Lib/index.html#type-t">Lib.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>mod_srcs:<span><a href="../Mod/Src/index.html#type-t">Mod.Src.t</a> <a href="../../B00_std/String/Map/index.html#type-t">Mod.Name.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span>
<span><a href="../Mod/Src/index.html#type-t">Mod.Src.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>mod_src_intf m ~opts ~requires ~mod_srcs ~and_cmti src</code> compiles the interface of <code>src</code> with options <code>opts</code> and compiler <code>comp</code> assuming its dependencies are in <code>mod_srcs</code> and <code>requires</code>. If <code>and_cmti</code> is <code>true</code> the <code>cmti</code> file is also produced. If <code>src</code> has no <code>.mli</code> this is a nop.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mod_src_impl" class="anchored"><a href="#val-mod_src_impl" class="anchor"></a><code><span><span class="keyword">val</span> mod_src_impl : <span>and_cmt:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>code:<a href="../Conf/index.html#type-code">Conf.code</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span> <span>requires:<span><a href="../Lib/index.html#type-t">Lib.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>mod_srcs:<span><a href="../Mod/Src/index.html#type-t">Mod.Src.t</a> <a href="../../B00_std/String/Map/index.html#type-t">Mod.Name.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span>
<span><a href="../Mod/Src/index.html#type-t">Mod.Src.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>mod_src_impl m ~code ~opts ~requires ~mod_srcs src</code> compile the implementation of <code>src</code> with option <code>opts</code> to code <code>code</code> asuming it dependencies are in <code>mod_src</code>. If <code>and_cmt</code> is <code>true</code> the <code>cmt</code> file is also produced. If <code>src</code> has no <code>.ml</code> this is a nop.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-intfs" class="anchored"><a href="#val-intfs" class="anchor"></a><code><span><span class="keyword">val</span> intfs : <span>and_cmti:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>comp:<a href="../../B00/Tool/index.html#type-t">B00.Tool.t</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span> <span>requires:<span><a href="../Lib/index.html#type-t">Lib.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>mod_srcs:<span><a href="../Mod/Src/index.html#type-t">Mod.Src.t</a> <a href="../../B00_std/String/Map/index.html#type-t">Mod.Name.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>intfs</code> iters <a href="#val-mod_src_intf"><code>mod_src_intf</code></a> over the elements of <code>mod_srcs</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-impls" class="anchored"><a href="#val-impls" class="anchor"></a><code><span><span class="keyword">val</span> impls : <span>and_cmt:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../B00/Memo/index.html#type-t">B00.Memo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>code:<a href="../Conf/index.html#type-code">Conf.code</a> <span class="arrow">&#45;&gt;</span></span> <span>opts:<a href="../../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> <span class="arrow">&#45;&gt;</span></span> <span>requires:<span><a href="../Lib/index.html#type-t">Lib.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>mod_srcs:<span><a href="../Mod/Src/index.html#type-t">Mod.Src.t</a> <a href="../../B00_std/String/Map/index.html#type-t">Mod.Name.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>impls</code> iters <a href="#val-mod_src_impl"><code>mod_src_impl</code></a> over the elements of <code>mod_srcs</code>.</p></div></div></div></body></html>