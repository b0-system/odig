<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Syndic_atom (syndic.Syndic__.Syndic_atom)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">syndic</a> &#x00BB; <a href="../index.html">Syndic__</a> &#x00BB; Syndic_atom</nav><h1>Module <code>Syndic__.Syndic_atom</code></h1><nav class="toc"><ul><li><a href="#structure-of-atom-document">Structure of Atom document</a></li><li><a href="#input-and-output">Input and output</a></li><li><a href="#convenience-functions">Convenience functions</a></li></ul></nav></header><aside><p><code>Syndic.Atom</code>: <a href="http://tools.ietf.org/html/rfc4287">RFC 4287</a> compliant Atom parser.</p></aside><div class="spec module" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span class="keyword">module</span> <a href="Error/index.html">Error</a> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../index.html#module-Syndic_error">Syndic__.Syndic_error</a></code></div><section><header><h3 id="structure-of-atom-document"><a href="#structure-of-atom-document" class="anchor"></a>Structure of Atom document</h3></header><dl><dt class="spec type" id="type-text_construct"><a href="#type-text_construct" class="anchor"></a><code><span class="keyword">type</span> text_construct</code><code> = </code><table class="variant"><tr id="type-text_construct.Text" class="anchored"><td class="def constructor"><a href="#type-text_construct.Text" class="anchor"></a><code>| </code><code><span class="constructor">Text</span> <span class="keyword">of</span> string</code></td><td class="doc"><p><code>Text(content)</code></p></td></tr><tr id="type-text_construct.Html" class="anchored"><td class="def constructor"><a href="#type-text_construct.Html" class="anchor"></a><code>| </code><code><span class="constructor">Html</span> <span class="keyword">of</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option * string</code></td><td class="doc"><p><code>Html(xmlbase, content)</code> where the content is left unparsed.</p></td></tr><tr id="type-text_construct.Xhtml" class="anchored"><td class="def constructor"><a href="#type-text_construct.Xhtml" class="anchor"></a><code>| </code><code><span class="constructor">Xhtml</span> <span class="keyword">of</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option * <a href="../Syndic_xml/index.html#type-t">Syndic__.Syndic_xml.t</a> list</code></td><td class="doc"><p><code>Xhtml(xmlbase, content)</code></p></td></tr></table></dt><dd><p>A <a href="http://tools.ietf.org/html/rfc4287#section-3.1">text construct</a>. It contains human-readable text, usually in small quantities. The content of Text constructs is Language-Sensitive.</p><p>Since the constructors <code>Text</code>, <code>Html</code> or <code>Xhtml</code> are shadowed by those of the same name in the definition of <a href="index.html#type-content"><code>content</code></a>, you may need a type annotation to disambiguate the two.</p></dd></dl><dl><dt class="spec type" id="type-author"><a href="#type-author" class="anchor"></a><code><span class="keyword">type</span> author</code><code> = </code><code>{</code><table class="record"><tr id="type-author.name" class="anchored"><td class="def field"><a href="#type-author.name" class="anchor"></a><code>name : string;</code></td></tr><tr id="type-author.uri" class="anchored"><td class="def field"><a href="#type-author.uri" class="anchor"></a><code>uri : <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option;</code></td></tr><tr id="type-author.email" class="anchored"><td class="def field"><a href="#type-author.email" class="anchor"></a><code>email : string option;</code></td></tr></table><code>}</code></dt><dd><p>Describes a person, corporation, or similar entity (hereafter, 'person') that indicates the author of the entry or feed. <a href="http://tools.ietf.org/html/rfc4287#section-3.2">See RFC 4287 § 3.2</a>. Person constructs allow extension Metadata elements (see <a href="http://tools.ietf.org/html/rfc4287#section-6.4">Section 6.4</a>).</p><p>They are used for authors (<a href="http://tools.ietf.org/html/rfc4287#section-4.2.1">See RFC 4287 § 4.2.1</a>) and contributors (<a href="http://tools.ietf.org/html/rfc4287#section-4.2.3">See RFC 4287 § 4.2.3</a>)</p></dd></dl><dl><dt class="spec value" id="val-author"><a href="#val-author" class="anchor"></a><code><span class="keyword">val</span> author : ?&#8288;uri:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> ?&#8288;email:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-author">author</a></code></dt></dl><dl><dt class="spec type" id="type-category"><a href="#type-category" class="anchor"></a><code><span class="keyword">type</span> category</code><code> = </code><code>{</code><table class="record"><tr id="type-category.term" class="anchored"><td class="def field"><a href="#type-category.term" class="anchor"></a><code>term : string;</code></td></tr><tr id="type-category.scheme" class="anchored"><td class="def field"><a href="#type-category.scheme" class="anchor"></a><code>scheme : <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option;</code></td></tr><tr id="type-category.label" class="anchored"><td class="def field"><a href="#type-category.label" class="anchor"></a><code>label : string option;</code></td></tr></table><code>}</code></dt><dd><p>The <code>category</code> element conveys information about a category associated with an entry or feed. This specification assigns no meaning to the content (if any) of this element. <a href="http://tools.ietf.org/html/rfc4287#section-4.2.2">See RFC 4287 § 4.2.2</a>.</p><ul><li><code>term</code> is a string that identifies the category to which the entry or feed belongs. <a href="http://tools.ietf.org/html/rfc4287#section-4.2.2.2">See RFC 4287 § 4.2.2.2</a> - <code>scheme</code>, if present, is an IRI that identifies a categorization scheme. <a href="http://tools.ietf.org/html/rfc4287#section-4.2.2.3">See RFC 4287 § 4.2.2.3</a> - <code>label</code>, if present, is a human-readable label for display in end-user applications. The content of the &quot;label&quot; attribute is Language-Sensitive. <a href="http://tools.ietf.org/html/rfc4287#section-4.2.2.1">See RFC 4287 § 4.2.2.1</a></li></ul></dd></dl><dl><dt class="spec value" id="val-category"><a href="#val-category" class="anchor"></a><code><span class="keyword">val</span> category : ?&#8288;scheme:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> ?&#8288;label:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-category">category</a></code></dt></dl><dl><dt class="spec type" id="type-generator"><a href="#type-generator" class="anchor"></a><code><span class="keyword">type</span> generator</code><code> = </code><code>{</code><table class="record"><tr id="type-generator.version" class="anchored"><td class="def field"><a href="#type-generator.version" class="anchor"></a><code>version : string option;</code></td></tr><tr id="type-generator.uri" class="anchored"><td class="def field"><a href="#type-generator.uri" class="anchor"></a><code>uri : <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option;</code></td></tr><tr id="type-generator.content" class="anchored"><td class="def field"><a href="#type-generator.content" class="anchor"></a><code>content : string;</code></td></tr></table><code>}</code></dt><dd><p>The <code>generator</code> element's content identifies the agent used to generate a feed, for debugging and other purposes. - <code>content</code> is a human-readable name for the generating agent. - <code>uri</code>, if present, SHOULD produce a representation that is relevant to that agent. - <code>version</code>, if present, indicates the version of the generating agent.</p><p>See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.4">RFC 4287 § 4.2.4</a>.</p></dd></dl><dl><dt class="spec value" id="val-generator"><a href="#val-generator" class="anchor"></a><code><span class="keyword">val</span> generator : ?&#8288;uri:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> ?&#8288;version:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-generator">generator</a></code></dt></dl><dl><dt class="spec type" id="type-icon"><a href="#type-icon" class="anchor"></a><code><span class="keyword">type</span> icon</code><code> = <a href="../../../uri/Uri/index.html#type-t">Uri.t</a></code></dt><dd><p>The <code>icon</code> element's content is an IRI reference <code>RFC3987</code> that identifies an image that provides iconic visual identification for a feed.</p><p>The image SHOULD have an aspect ratio of one (horizontal) to one (vertical) and SHOULD be suitable for presentation at a small size.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.5">See RFC 4287 § 4.2.5</a></p></dd></dl><dl><dt class="spec type" id="type-id"><a href="#type-id" class="anchor"></a><code><span class="keyword">type</span> id</code><code> = <a href="../../../uri/Uri/index.html#type-t">Uri.t</a></code></dt><dd><p>The <code>id</code> element conveys a permanent, universally unique identifier for an entry or feed.</p><p>Its content MUST be an IRI, as defined by <code>RFC3987</code>. Note that the definition of &quot;IRI&quot; excludes relative references. Though the IRI might use a dereferencable scheme, Atom Processors MUST NOT assume it can be dereferenced.</p><p>There is more information in the RFC but they are not necessary here, at least, they can not be checked here.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.6">See RFC 4287 § 4.2.6</a></p></dd></dl><dl><dt class="spec type" id="type-rel"><a href="#type-rel" class="anchor"></a><code><span class="keyword">type</span> rel</code><code> = </code><table class="variant"><tr id="type-rel.Alternate" class="anchored"><td class="def constructor"><a href="#type-rel.Alternate" class="anchor"></a><code>| </code><code><span class="constructor">Alternate</span></code></td><td class="doc"><p>Signifies that the URI in the value of the link <code>href</code> field identifies an alternate version of the resource described by the containing element.</p></td></tr><tr id="type-rel.Related" class="anchored"><td class="def constructor"><a href="#type-rel.Related" class="anchor"></a><code>| </code><code><span class="constructor">Related</span></code></td><td class="doc"><p>Signifies that the URI in the value of the link <code>href</code> field identifies a resource related to the resource described by the containing element.</p></td></tr><tr id="type-rel.Self" class="anchored"><td class="def constructor"><a href="#type-rel.Self" class="anchor"></a><code>| </code><code><span class="constructor">Self</span></code></td><td class="doc"><p>Signifies that the URI in the value of the link <code>href</code> field identifies a resource equivalent to the containing element.</p></td></tr><tr id="type-rel.Enclosure" class="anchored"><td class="def constructor"><a href="#type-rel.Enclosure" class="anchor"></a><code>| </code><code><span class="constructor">Enclosure</span></code></td><td class="doc"><p>Signifies that the IRI in the value of the link <code>href</code> field identifies a related resource that is potentially large in size and might require special handling. When <code>Enclosure</code> is specified, the length attribute SHOULD be provided.</p></td></tr><tr id="type-rel.Via" class="anchored"><td class="def constructor"><a href="#type-rel.Via" class="anchor"></a><code>| </code><code><span class="constructor">Via</span></code></td><td class="doc"><p>Signifies that the IRI in the value of the link <code>href</code> field identifies a resource that is the source of the information provided in the containing element.</p></td></tr><tr id="type-rel.Link" class="anchored"><td class="def constructor"><a href="#type-rel.Link" class="anchor"></a><code>| </code><code><span class="constructor">Link</span> <span class="keyword">of</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a></code></td><td class="doc"><p>The URI MUST be non-empty and match either the &quot;isegment-nz-nc&quot; or the &quot;IRI&quot; production in <a href="http://tools.ietf.org/html/rfc3987">RFC3987</a>. Note that use of a relative reference other than a simple name is not allowed.</p></td></tr></table></dt><dd><p>Indicates the link relation type. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.2">RFC 4287 § 4.2.7.2</a>.</p></dd></dl><dl><dt class="spec type" id="type-link"><a href="#type-link" class="anchor"></a><code><span class="keyword">type</span> link</code><code> = </code><code>{</code><table class="record"><tr id="type-link.href" class="anchored"><td class="def field"><a href="#type-link.href" class="anchor"></a><code>href : <a href="../../../uri/Uri/index.html#type-t">Uri.t</a>;</code></td></tr><tr id="type-link.rel" class="anchored"><td class="def field"><a href="#type-link.rel" class="anchor"></a><code>rel : <a href="index.html#type-rel">rel</a>;</code></td></tr><tr id="type-link.type_media" class="anchored"><td class="def field"><a href="#type-link.type_media" class="anchor"></a><code>type_media : string option;</code></td></tr><tr id="type-link.hreflang" class="anchored"><td class="def field"><a href="#type-link.hreflang" class="anchor"></a><code>hreflang : string option;</code></td></tr><tr id="type-link.title" class="anchored"><td class="def field"><a href="#type-link.title" class="anchor"></a><code>title : string;</code></td></tr><tr id="type-link.length" class="anchored"><td class="def field"><a href="#type-link.length" class="anchor"></a><code>length : int option;</code></td></tr></table><code>}</code></dt><dd><p><code>link</code> defines a reference from an entry or feed to a Web resource. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7">RFC 4287 § 4.2.7</a>.</p><ul><li><code>href</code> contains the link's IRI. The value MUST be a IRI reference, <a href="http://tools.ietf.org/html/rfc3987">RFC3987</a>. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.1">RFC 4287 § 4.2.7.1</a>. - <code>type_media</code> is an advisory media type: it is a hint about the type of the representation that is expected to be returned when the value of the href attribute is dereferenced. Note that the type attribute does not override the actual media type returned with the representation. The value of <code>type_media</code>, if given, MUST conform to the syntax of a MIME media type, <a href="http://tools.ietf.org/html/rfc4287#ref-MIMEREG">MIMEREG</a>. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.3">RFC 4287 § 4.2.7.3</a>. - <code>hreflang</code> describes the language of the resource pointed to by the href attribute. When used together with the <code>rel=Alternate</code>, it implies a translated version of the entry. The value of <code>hreflang</code> MUST be a language tag, <a href="http://tools.ietf.org/html/rfc3066">RFC3066</a>. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.4">RFC 4287 § 4.2.7.4</a>. - <code>title</code> conveys human-readable information about the link. The content of the &quot;title&quot; attribute is Language-Sensitive. The value <code>&quot;&quot;</code> means that no title is provided. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.5">RFC 4287 § 4.2.7.5</a>. - <code>length</code> indicates an advisory length of the linked content in octets; it is a hint about the content length of the representation returned when the IRI in the href attribute is mapped to a URI and dereferenced. Note that the length attribute does not override the actual content length of the representation as reported by the underlying protocol. See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.6">RFC 4287 § 4.2.7.6</a>.</li></ul></dd></dl><dl><dt class="spec value" id="val-link"><a href="#val-link" class="anchor"></a><code><span class="keyword">val</span> link : ?&#8288;type_media:string <span>&#45;&gt;</span> ?&#8288;hreflang:string <span>&#45;&gt;</span> ?&#8288;title:string <span>&#45;&gt;</span> ?&#8288;length:int <span>&#45;&gt;</span> ?&#8288;rel:<a href="index.html#type-rel">rel</a> <span>&#45;&gt;</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> <a href="index.html#type-link">link</a></code></dt><dd><p><code>link uri</code> creates a link element.</p><dl><dt>parameter rel</dt><dd><p>The <code>rel</code> attribute of the link. It defaults to <code>Alternate</code> since <a href="http://tools.ietf.org/html/rfc4287#section-4.2.7.2">RFC 4287 § 4.2.7.2</a> says that <i>if the &quot;rel&quot; attribute is not present, the link element MUST be interpreted as if the link relation type is &quot;alternate&quot;.</i></p><p>The other optional arguments all default to <code>None</code> (i.e., not specified).</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-logo"><a href="#type-logo" class="anchor"></a><code><span class="keyword">type</span> logo</code><code> = <a href="../../../uri/Uri/index.html#type-t">Uri.t</a></code></dt><dd><p><code>logo</code> is an IRI reference <code>RFC3987</code> that identifies an image that provides visual identification for a feed.</p><p>The image SHOULD have an aspect ratio of 2 (horizontal) to 1 (vertical).</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.8">See RFC 4287 § 4.2.8</a></p></dd></dl><dl><dt class="spec type" id="type-published"><a href="#type-published" class="anchor"></a><code><span class="keyword">type</span> published</code><code> = <a href="../Syndic_date/index.html#type-t">Syndic__.Syndic_date.t</a></code></dt><dd><p><code>published</code> is a Date construct indicating an instant in time associated with an event early in the life cycle of the entry.</p><p>Typically, <code>published</code> will be associated with the initial creation or first availability of the resource.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.9">See RFC 4287 § 4.2.9</a></p></dd></dl><dl><dt class="spec type" id="type-rights"><a href="#type-rights" class="anchor"></a><code><span class="keyword">type</span> rights</code><code> = <a href="index.html#type-text_construct">text_construct</a></code></dt><dd><p><code>rights</code> is a Text construct that conveys information about rights held in and over an entry or feed. The <code>rights</code> element SHOULD NOT be used to convey machine-readable licensing information.</p><p>If an atom:entry element does not contain an atom:rights element, then the atom:rights element of the containing atom:feed element, if present, is considered to apply to the entry.</p><p>See <a href="http://tools.ietf.org/html/rfc4287#section-4.2.10">RFC 4287 § 4.2.10</a></p></dd></dl><dl><dt class="spec type" id="type-title"><a href="#type-title" class="anchor"></a><code><span class="keyword">type</span> title</code><code> = <a href="index.html#type-text_construct">text_construct</a></code></dt><dd><p><code>title</code> is a Text construct that conveys a human-readable title for an entry or feed. <a href="http://tools.ietf.org/html/rfc4287#section-4.2.14">See RFC 4287 § 4.2.14</a></p></dd></dl><dl><dt class="spec type" id="type-subtitle"><a href="#type-subtitle" class="anchor"></a><code><span class="keyword">type</span> subtitle</code><code> = <a href="index.html#type-text_construct">text_construct</a></code></dt><dd><p><code>subtitle</code> is a Text construct that conveys a human-readable description or subtitle for a feed. <a href="http://tools.ietf.org/html/rfc4287#section-4.2.12">See RFC 4287 § 4.2.12</a></p></dd></dl><dl><dt class="spec type" id="type-updated"><a href="#type-updated" class="anchor"></a><code><span class="keyword">type</span> updated</code><code> = <a href="../Syndic_date/index.html#type-t">Syndic__.Syndic_date.t</a></code></dt><dd><p><code>updated</code> is a Date construct indicating the most recent instant in time when an entry or feed was modified in a way the publisher considers significant. Therefore, not all modifications necessarily result in a changed <code>updated</code> value.</p><p>Publishers MAY change the value of this element over time.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.15">See RFC 4287 § 4.2.15</a></p></dd></dl><dl><dt class="spec type" id="type-source"><a href="#type-source" class="anchor"></a><code><span class="keyword">type</span> source</code><code> = </code><code>{</code><table class="record"><tr id="type-source.authors" class="anchored"><td class="def field"><a href="#type-source.authors" class="anchor"></a><code>authors : <a href="index.html#type-author">author</a> list;</code></td></tr><tr id="type-source.categories" class="anchored"><td class="def field"><a href="#type-source.categories" class="anchor"></a><code>categories : <a href="index.html#type-category">category</a> list;</code></td></tr><tr id="type-source.contributors" class="anchored"><td class="def field"><a href="#type-source.contributors" class="anchor"></a><code>contributors : <a href="index.html#type-author">author</a> list;</code></td><td class="doc"><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.3">See RFC 4287 § 4.2.3</a></p></td></tr><tr id="type-source.generator" class="anchored"><td class="def field"><a href="#type-source.generator" class="anchor"></a><code>generator : <a href="index.html#type-generator">generator</a> option;</code></td></tr><tr id="type-source.icon" class="anchored"><td class="def field"><a href="#type-source.icon" class="anchor"></a><code>icon : <a href="index.html#type-icon">icon</a> option;</code></td></tr><tr id="type-source.id" class="anchored"><td class="def field"><a href="#type-source.id" class="anchor"></a><code>id : <a href="index.html#type-id">id</a>;</code></td></tr><tr id="type-source.links" class="anchored"><td class="def field"><a href="#type-source.links" class="anchor"></a><code>links : <a href="index.html#type-link">link</a> list;</code></td></tr><tr id="type-source.logo" class="anchored"><td class="def field"><a href="#type-source.logo" class="anchor"></a><code>logo : <a href="index.html#type-logo">logo</a> option;</code></td></tr><tr id="type-source.rights" class="anchored"><td class="def field"><a href="#type-source.rights" class="anchor"></a><code>rights : <a href="index.html#type-rights">rights</a> option;</code></td></tr><tr id="type-source.subtitle" class="anchored"><td class="def field"><a href="#type-source.subtitle" class="anchor"></a><code>subtitle : <a href="index.html#type-subtitle">subtitle</a> option;</code></td></tr><tr id="type-source.title" class="anchored"><td class="def field"><a href="#type-source.title" class="anchor"></a><code>title : <a href="index.html#type-title">title</a>;</code></td></tr><tr id="type-source.updated" class="anchored"><td class="def field"><a href="#type-source.updated" class="anchor"></a><code>updated : <a href="index.html#type-updated">updated</a> option;</code></td></tr></table><code>}</code></dt><dd><p>If an <a href="index.html#type-entry"><code>entry</code></a> is copied from one feed into another feed, then the source <a href="index.html#type-feed"><code>feed</code></a>'s metadata (all child elements of atom:feed other than the atom:entry elements) MAY be preserved within the copied entry by adding an atom:source child element, if it is not already present in the entry, and including some or all of the source feed's Metadata elements as the atom:source element's children. Such metadata SHOULD be preserved if the source atom:feed contains any of the child elements atom:author, atom:contributor, atom:rights, or atom:category and those child elements are not present in the source atom:entry.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.11">See RFC 4287 § 4.2.11</a></p><p>The atom:source element is designed to allow the aggregation of entries from different feeds while retaining information about an entry's source feed. For this reason, Atom Processors that are performing such aggregation SHOULD include at least the required feed-level Metadata fields (<code>id</code>, <code>title</code>, and <code>updated</code>) in the <code>source</code> element.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.1.2">See RFC 4287 § 4.1.2 for more details.</a></p></dd></dl><dl><dt class="spec value" id="val-source"><a href="#val-source" class="anchor"></a><code><span class="keyword">val</span> source : ?&#8288;categories:<a href="index.html#type-category">category</a> list <span>&#45;&gt;</span> ?&#8288;contributors:<a href="index.html#type-author">author</a> list <span>&#45;&gt;</span> ?&#8288;generator:<a href="index.html#type-generator">generator</a> <span>&#45;&gt;</span> ?&#8288;icon:<a href="index.html#type-icon">icon</a> <span>&#45;&gt;</span> ?&#8288;links:<a href="index.html#type-link">link</a> list <span>&#45;&gt;</span> ?&#8288;logo:<a href="index.html#type-logo">logo</a> <span>&#45;&gt;</span> ?&#8288;rights:<a href="index.html#type-rights">rights</a> <span>&#45;&gt;</span> ?&#8288;subtitle:<a href="index.html#type-subtitle">subtitle</a> <span>&#45;&gt;</span> ?&#8288;updated:<a href="index.html#type-updated">updated</a> <span>&#45;&gt;</span> authors:<a href="index.html#type-author">author</a> list <span>&#45;&gt;</span> id:<a href="index.html#type-id">id</a> <span>&#45;&gt;</span> title:<a href="index.html#type-title">title</a> <span>&#45;&gt;</span> <a href="index.html#type-source">source</a></code></dt></dl><dl><dt class="spec type" id="type-mime"><a href="#type-mime" class="anchor"></a><code><span class="keyword">type</span> mime</code><code> = string</code></dt><dd><p>A MIME type that conform to the syntax of a MIME media type, but MUST NOT be a composite type (see Section 4.2.6 of <code>MIMEREG</code>).</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.1.3.1">See RFC 4287 § 4.1.3.1</a></p></dd></dl><dl><dt class="spec type" id="type-content"><a href="#type-content" class="anchor"></a><code><span class="keyword">type</span> content</code><code> = </code><table class="variant"><tr id="type-content.Text" class="anchored"><td class="def constructor"><a href="#type-content.Text" class="anchor"></a><code>| </code><code><span class="constructor">Text</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-content.Html" class="anchored"><td class="def constructor"><a href="#type-content.Html" class="anchor"></a><code>| </code><code><span class="constructor">Html</span> <span class="keyword">of</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option * string</code></td></tr><tr id="type-content.Xhtml" class="anchored"><td class="def constructor"><a href="#type-content.Xhtml" class="anchor"></a><code>| </code><code><span class="constructor">Xhtml</span> <span class="keyword">of</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> option * <a href="../Syndic_xml/index.html#type-t">Syndic__.Syndic_xml.t</a> list</code></td></tr><tr id="type-content.Mime" class="anchored"><td class="def constructor"><a href="#type-content.Mime" class="anchor"></a><code>| </code><code><span class="constructor">Mime</span> <span class="keyword">of</span> <a href="index.html#type-mime">mime</a> * string</code></td></tr><tr id="type-content.Src" class="anchored"><td class="def constructor"><a href="#type-content.Src" class="anchor"></a><code>| </code><code><span class="constructor">Src</span> <span class="keyword">of</span> <a href="index.html#type-mime">mime</a> option * <a href="../../../uri/Uri/index.html#type-t">Uri.t</a></code></td></tr></table></dt><dd><p><code>content</code> either contains or links to the content of the entry. The value of <code>content</code> is Language-Sensitive. <a href="http://tools.ietf.org/html/rfc4287#section-4.1.3">See RFC 4287 § 4.1.3</a></p><ul><li><code>Text</code>, <code>Html</code>, <code>Xhtml</code> or <code>Mime</code> means that the content was part of the document and is provided as an argument. The first argument to <code>Html</code> and <code>Xhtml</code> is the possible xml:base value. <a href="http://tools.ietf.org/html/rfc4287#section-3.1.1">See RFC 4287 § 3.1.1</a></li><li><code>Src(m, iri)</code> means that the content is to be found at <code>iri</code> and has MIME type <code>m</code>. Atom Processors MAY use the IRI to retrieve the content and MAY choose to ignore remote content or to present it in a different manner than local content. The value of <code>m</code> is advisory; that is to say, when the corresponding URI (mapped from an IRI, if necessary) is dereferenced, if the server providing that content also provides a media type, the server-provided media type is authoritative. See <a href="http://tools.ietf.org/html/rfc4287#section-4.1.3.2">RFC 4287 § 4.1.3.2</a></li></ul></dd></dl><dl><dt class="spec type" id="type-summary"><a href="#type-summary" class="anchor"></a><code><span class="keyword">type</span> summary</code><code> = <a href="index.html#type-text_construct">text_construct</a></code></dt><dd><p><code>summary</code> is a Text construct that conveys a short summary, abstract, or excerpt of an entry.</p><p>It is not advisable for <code>summary</code> to duplicate <a href="index.html#type-link.title"><code>title</code></a> or <a href="index.html#type-generator.content"><code>content</code></a> because Atom Processors might assume there is a useful summary when there is none.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.2.13">See RFC 4287 § 4.2.13</a></p></dd></dl><dl><dt class="spec type" id="type-entry"><a href="#type-entry" class="anchor"></a><code><span class="keyword">type</span> entry</code><code> = </code><code>{</code><table class="record"><tr id="type-entry.authors" class="anchored"><td class="def field"><a href="#type-entry.authors" class="anchor"></a><code>authors : <a href="index.html#type-author">author</a> * <a href="index.html#type-author">author</a> list;</code></td></tr><tr id="type-entry.categories" class="anchored"><td class="def field"><a href="#type-entry.categories" class="anchor"></a><code>categories : <a href="index.html#type-category">category</a> list;</code></td></tr><tr id="type-entry.content" class="anchored"><td class="def field"><a href="#type-entry.content" class="anchor"></a><code>content : <a href="index.html#type-content">content</a> option;</code></td></tr><tr id="type-entry.contributors" class="anchored"><td class="def field"><a href="#type-entry.contributors" class="anchor"></a><code>contributors : <a href="index.html#type-author">author</a> list;</code></td></tr><tr id="type-entry.id" class="anchored"><td class="def field"><a href="#type-entry.id" class="anchor"></a><code>id : <a href="index.html#type-id">id</a>;</code></td></tr><tr id="type-entry.links" class="anchored"><td class="def field"><a href="#type-entry.links" class="anchor"></a><code>links : <a href="index.html#type-link">link</a> list;</code></td></tr><tr id="type-entry.published" class="anchored"><td class="def field"><a href="#type-entry.published" class="anchor"></a><code>published : <a href="index.html#type-published">published</a> option;</code></td></tr><tr id="type-entry.rights" class="anchored"><td class="def field"><a href="#type-entry.rights" class="anchor"></a><code>rights : <a href="index.html#type-rights">rights</a> option;</code></td></tr><tr id="type-entry.source" class="anchored"><td class="def field"><a href="#type-entry.source" class="anchor"></a><code>source : <a href="index.html#type-source">source</a> option;</code></td></tr><tr id="type-entry.summary" class="anchored"><td class="def field"><a href="#type-entry.summary" class="anchor"></a><code>summary : <a href="index.html#type-summary">summary</a> option;</code></td></tr><tr id="type-entry.title" class="anchored"><td class="def field"><a href="#type-entry.title" class="anchor"></a><code>title : <a href="index.html#type-title">title</a>;</code></td></tr><tr id="type-entry.updated" class="anchored"><td class="def field"><a href="#type-entry.updated" class="anchor"></a><code>updated : <a href="index.html#type-updated">updated</a>;</code></td></tr></table><code>}</code></dt><dd><p><code>entry</code> represents an individual entry, acting as a container for metadata and data associated with the entry. This element can appear as a child of the atom:feed element, or it can appear as the document (i.e., top-level) element of a stand-alone Atom Entry Document.</p><p>The specification mandates that each entry contains an author unless it contains some sources or the feed contains an author element. This library ensures that the authors are properly dispatched to all locations.</p><p>The following child elements are defined by this specification (note that it requires the presence of some of these elements):</p><ul><li><p>if <code>content = None</code>, then <code>links</code> MUST contain at least one element with a rel attribute value of <code>Alternate</code>. - There MUST NOT be more than one element of <code>links</code> with a rel attribute value of <code>Alternate</code> that has the same combination of type and hreflang attribute values. - There MAY be additional elements of <code>links</code> beyond those described above. - There MUST be an <code>summary</code> in either of the following cases: </p><ul><li>the atom:entry contains an atom:content that has a &quot;src&quot; attribute (and is thus empty).</li><li>the atom:entry contains content that is encoded in Base64; i.e., the &quot;type&quot; attribute of atom:content is a MIME media type <code>MIMEREG</code>, but is not an XML media type <code>RFC3023</code>, does not begin with &quot;text/&quot;, and does not end with &quot;/xml&quot; or &quot;+xml&quot;.</li></ul></li></ul><p><a href="http://tools.ietf.org/html/rfc4287#section-4.1.2">See RFC 4287 § 4.1.2</a></p></dd></dl><dl><dt class="spec value" id="val-entry"><a href="#val-entry" class="anchor"></a><code><span class="keyword">val</span> entry : ?&#8288;categories:<a href="index.html#type-category">category</a> list <span>&#45;&gt;</span> ?&#8288;content:<a href="index.html#type-content">content</a> <span>&#45;&gt;</span> ?&#8288;contributors:<a href="index.html#type-author">author</a> list <span>&#45;&gt;</span> ?&#8288;links:<a href="index.html#type-link">link</a> list <span>&#45;&gt;</span> ?&#8288;published:<a href="index.html#type-published">published</a> <span>&#45;&gt;</span> ?&#8288;rights:<a href="index.html#type-rights">rights</a> <span>&#45;&gt;</span> ?&#8288;source:<a href="index.html#type-source">source</a> <span>&#45;&gt;</span> ?&#8288;summary:<a href="index.html#type-summary">summary</a> <span>&#45;&gt;</span> id:<a href="index.html#type-id">id</a> <span>&#45;&gt;</span> authors:(<a href="index.html#type-author">author</a> * <a href="index.html#type-author">author</a> list) <span>&#45;&gt;</span> title:<a href="index.html#type-title">title</a> <span>&#45;&gt;</span> updated:<a href="index.html#type-updated">updated</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-entry">entry</a></code></dt></dl><dl><dt class="spec type" id="type-feed"><a href="#type-feed" class="anchor"></a><code><span class="keyword">type</span> feed</code><code> = </code><code>{</code><table class="record"><tr id="type-feed.authors" class="anchored"><td class="def field"><a href="#type-feed.authors" class="anchor"></a><code>authors : <a href="index.html#type-author">author</a> list;</code></td></tr><tr id="type-feed.categories" class="anchored"><td class="def field"><a href="#type-feed.categories" class="anchor"></a><code>categories : <a href="index.html#type-category">category</a> list;</code></td></tr><tr id="type-feed.contributors" class="anchored"><td class="def field"><a href="#type-feed.contributors" class="anchor"></a><code>contributors : <a href="index.html#type-author">author</a> list;</code></td></tr><tr id="type-feed.generator" class="anchored"><td class="def field"><a href="#type-feed.generator" class="anchor"></a><code>generator : <a href="index.html#type-generator">generator</a> option;</code></td></tr><tr id="type-feed.icon" class="anchored"><td class="def field"><a href="#type-feed.icon" class="anchor"></a><code>icon : <a href="index.html#type-icon">icon</a> option;</code></td></tr><tr id="type-feed.id" class="anchored"><td class="def field"><a href="#type-feed.id" class="anchor"></a><code>id : <a href="index.html#type-id">id</a>;</code></td></tr><tr id="type-feed.links" class="anchored"><td class="def field"><a href="#type-feed.links" class="anchor"></a><code>links : <a href="index.html#type-link">link</a> list;</code></td></tr><tr id="type-feed.logo" class="anchored"><td class="def field"><a href="#type-feed.logo" class="anchor"></a><code>logo : <a href="index.html#type-logo">logo</a> option;</code></td></tr><tr id="type-feed.rights" class="anchored"><td class="def field"><a href="#type-feed.rights" class="anchor"></a><code>rights : <a href="index.html#type-rights">rights</a> option;</code></td></tr><tr id="type-feed.subtitle" class="anchored"><td class="def field"><a href="#type-feed.subtitle" class="anchor"></a><code>subtitle : <a href="index.html#type-subtitle">subtitle</a> option;</code></td></tr><tr id="type-feed.title" class="anchored"><td class="def field"><a href="#type-feed.title" class="anchor"></a><code>title : <a href="index.html#type-title">title</a>;</code></td></tr><tr id="type-feed.updated" class="anchored"><td class="def field"><a href="#type-feed.updated" class="anchor"></a><code>updated : <a href="index.html#type-updated">updated</a>;</code></td></tr><tr id="type-feed.entries" class="anchored"><td class="def field"><a href="#type-feed.entries" class="anchor"></a><code>entries : <a href="index.html#type-entry">entry</a> list;</code></td></tr></table><code>}</code></dt><dd><p><code>feed</code> is the document (i.e., top-level) element of an Atom Feed Document, acting as a container for metadata and data associated with the feed. Its element children consist of metadata elements followed by zero or more atom:entry child elements.</p><ul><li>one of the <code>links</code> SHOULD have a <code>rel</code> attribute value of <code>Self</code>. This is the preferred URI for retrieving Atom Feed Documents representing this Atom feed. - There MUST NOT be more than one element of <code>links</code> with a rel attribute value of <code>Alternate</code> that has the same combination of type and hreflang attribute values. - There may be additional elements in <code>links</code> beyond those described above.</li></ul><p>If multiple <a href="index.html#type-entry"><code>entry</code></a> elements with the same <a href="index.html#type-id"><code>id</code></a> value appear in an Atom Feed Document, they represent the same entry. Their <a href="index.html#type-updated"><code>updated</code></a> timestamps SHOULD be different. If an Atom Feed Document contains multiple entries with the same <a href="index.html#type-id"><code>id</code></a>, Atom Processors MAY choose to display all of them or some subset of them. One typical behavior would be to display only the entry with the latest <a href="index.html#type-updated"><code>updated</code></a> timestamp.</p><p><a href="http://tools.ietf.org/html/rfc4287#section-4.1.1">See RFC 4287 § 4.1.1</a></p></dd></dl><dl><dt class="spec value" id="val-feed"><a href="#val-feed" class="anchor"></a><code><span class="keyword">val</span> feed : ?&#8288;authors:<a href="index.html#type-author">author</a> list <span>&#45;&gt;</span> ?&#8288;categories:<a href="index.html#type-category">category</a> list <span>&#45;&gt;</span> ?&#8288;contributors:<a href="index.html#type-author">author</a> list <span>&#45;&gt;</span> ?&#8288;generator:<a href="index.html#type-generator">generator</a> <span>&#45;&gt;</span> ?&#8288;icon:<a href="index.html#type-icon">icon</a> <span>&#45;&gt;</span> ?&#8288;links:<a href="index.html#type-link">link</a> list <span>&#45;&gt;</span> ?&#8288;logo:<a href="index.html#type-logo">logo</a> <span>&#45;&gt;</span> ?&#8288;rights:<a href="index.html#type-rights">rights</a> <span>&#45;&gt;</span> ?&#8288;subtitle:<a href="index.html#type-subtitle">subtitle</a> <span>&#45;&gt;</span> id:<a href="index.html#type-id">id</a> <span>&#45;&gt;</span> title:<a href="index.html#type-title">title</a> <span>&#45;&gt;</span> updated:<a href="index.html#type-updated">updated</a> <span>&#45;&gt;</span> <a href="index.html#type-entry">entry</a> list <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a></code></dt></dl></section><section><header><h3 id="input-and-output"><a href="#input-and-output" class="anchor"></a>Input and output</h3></header><dl><dt class="spec value" id="val-parse"><a href="#val-parse" class="anchor"></a><code><span class="keyword">val</span> parse : ?&#8288;self:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> ?&#8288;xmlbase:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> <a href="../../../xmlm/Xmlm/index.html#type-input">Xmlm.input</a> <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a></code></dt><dd><p><code>parse xml</code> returns the feed corresponding to <code>xml</code>. Beware that <code>xml</code> is mutable, so when the parsing fails, one has to create a new copy of <code>xml</code> to use it with another function. If you retrieve <code>xml</code> from a URL, you should use that URL as <code>~xmlbase</code>.</p><p>Raise <code>Error.Expected</code>, <code>Expected_Data</code> or <code>Error.Duplicate_Link</code> if <code>xml</code> is not a valid Atom document.</p><dl><dt>parameter xmlbase</dt><dd><p>default xml:base to resolve relative URLs (of course xml:base attributes in the XML Atom document take precedence over this). See <a href="http://www.w3.org/TR/xmlbase/">XML Base</a>.</p></dd></dl><dl><dt>parameter self</dt><dd><p>the URI from where the current feed was retrieved. Giving this information will add an entry to <code>links</code> with <code>rel = Self</code> unless one already exists.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : ?&#8288;self:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> ?&#8288;xmlbase:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a></code></dt><dd><p><code>read fname</code> reads the file name <code>fname</code> and parses it. For the optional parameters, see <a href="index.html#val-parse"><code>parse</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-to_xml"><a href="#val-to_xml" class="anchor"></a><code><span class="keyword">val</span> to_xml : <a href="index.html#type-feed">feed</a> <span>&#45;&gt;</span> <a href="../Syndic_xml/index.html#type-t">Syndic__.Syndic_xml.t</a></code></dt><dd><p><code>to_xml f</code> converts the feed <code>f</code> to an XML tree.</p></dd></dl><dl><dt class="spec value" id="val-output"><a href="#val-output" class="anchor"></a><code><span class="keyword">val</span> output : <a href="index.html#type-feed">feed</a> <span>&#45;&gt;</span> <a href="../../../xmlm/Xmlm/index.html#type-dest">Xmlm.dest</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>output f dest</code> writes the XML tree of the feed <code>f</code> to <code>dest</code>.</p></dd></dl><dl><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val</span> write : <a href="index.html#type-feed">feed</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>write f fname</code> writes the XML tree of the feed <code>f</code> to the file named <code>fname</code>.</p></dd></dl></section><section><header><h3 id="convenience-functions"><a href="#convenience-functions" class="anchor"></a>Convenience functions</h3></header><dl><dt class="spec value" id="val-ascending"><a href="#val-ascending" class="anchor"></a><code><span class="keyword">val</span> ascending : <a href="index.html#type-entry">entry</a> <span>&#45;&gt;</span> <a href="index.html#type-entry">entry</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Compare entries so that older dates are smaller. The date of the entry is taken from the <code>published</code> field, if available, or otherwise <code>updated</code> is used.</p></dd></dl><dl><dt class="spec value" id="val-descending"><a href="#val-descending" class="anchor"></a><code><span class="keyword">val</span> descending : <a href="index.html#type-entry">entry</a> <span>&#45;&gt;</span> <a href="index.html#type-entry">entry</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Compare entries so that more recent dates are smaller. The date of the entry is taken from the <code>published</code> field, if available, or otherwise <code>updated</code> is used.</p></dd></dl><dl><dt class="spec value" id="val-aggregate"><a href="#val-aggregate" class="anchor"></a><code><span class="keyword">val</span> aggregate : ?&#8288;self:<a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> ?&#8288;id:<a href="index.html#type-id">id</a> <span>&#45;&gt;</span> ?&#8288;updated:<a href="index.html#type-updated">updated</a> <span>&#45;&gt;</span> ?&#8288;subtitle:<a href="index.html#type-subtitle">subtitle</a> <span>&#45;&gt;</span> ?&#8288;title:<a href="index.html#type-text_construct">text_construct</a> <span>&#45;&gt;</span> ?&#8288;sort:[ `Newest_first | `Oldest_first | `None ] <span>&#45;&gt;</span> ?&#8288;n:int <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a> list <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a></code></dt><dd><p><code>aggregate feeds</code> returns a single feed containing all the posts in <code>feeds</code>. In order to track the origin of each post in the aggrated feed, it is recommended that each feed in <code>feeds</code> possesses a link with <code>rel = Self</code> so that the <code>source</code> added to each entry contains a link to the original feed. If an entry contains a <code>source</code>, il will <i>not</i> be overwritten.</p><dl><dt>parameter self</dt><dd><p>The preferred URI for retrieving this aggregayed Atom Feed. While not mandatory, it is good practice to set this.</p></dd></dl><dl><dt>parameter id</dt><dd><p>the universally unique identifier for the aggregated feed. If it is not provided a URN is built from the <code>feeds</code> IDs. </p><p>@param sort</p><p>whether to sort the entries of the final feed. The default is <code>`Newest_first</code> because it is generally desired. </p><p>@param n</p><p>number of entries of the (sorted) aggregated feed to return.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set_self_link"><a href="#val-set_self_link" class="anchor"></a><code><span class="keyword">val</span> set_self_link : <a href="index.html#type-feed">feed</a> <span>&#45;&gt;</span> ?&#8288;hreflang:string <span>&#45;&gt;</span> ?&#8288;length:int <span>&#45;&gt;</span> <a href="../../../uri/Uri/index.html#type-t">Uri.t</a> <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a></code></dt><dd><p><code>set_self feed url</code> add or replace the URI in the self link of the feed. You can also set the <code>hreflang</code> and <code>length</code> of the self link.</p></dd></dl><dl><dt class="spec value" id="val-get_self_link"><a href="#val-get_self_link" class="anchor"></a><code><span class="keyword">val</span> get_self_link : <a href="index.html#type-feed">feed</a> <span>&#45;&gt;</span> <a href="index.html#type-link">link</a> option</code></dt><dd><p><code>get_self feed</code> return the self link of the feed, if any is present.</p></dd></dl><dl><dt class="spec value" id="val-set_main_author"><a href="#val-set_main_author" class="anchor"></a><code><span class="keyword">val</span> set_main_author : <a href="index.html#type-feed">feed</a> <span>&#45;&gt;</span> <a href="index.html#type-author">author</a> <span>&#45;&gt;</span> <a href="index.html#type-feed">feed</a></code></dt><dd><p><code>set_main_author feed author</code> will add <code>author</code> in front of the list of authors of the <code>feed</code> (if an author with the same name already exists, the optional information are merged, the ones in <code>author</code> taking precedence). Also remove all empty authors (name = &quot;&quot; and no URI, no email) and replace them with <code>author</code> if no author is left and an authors is mandatory.</p></dd></dl></section></div></body></html>