<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Prop (qrc.Qrc.Prop)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">qrc</a> &#x00BB; <a href="../index.html">Qrc</a> &#x00BB; Prop</nav><header class="odoc-preamble"><h1>Module <code><span>Qrc.Prop</span></code></h1><p>QR code properties.</p><p>Except for <code>mode_capacity</code>, not for the casual user.</p></header><nav class="odoc-toc"><ul><li><a href="#version">Version</a></li><li><a href="#capacity">Capacity</a></li><li><a href="#align_pats">Alignment patterns</a></li><li><a href="#gf">Galois field</a></li></ul></nav><div class="odoc-content"><h2 id="version"><a href="#version" class="anchor"></a>Version</h2><div class="odoc-spec"><div class="spec value" id="val-version_of_w" class="anchored"><a href="#val-version_of_w" class="anchor"></a><code><span><span class="keyword">val</span> version_of_w : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../index.html#type-version">version</a>, string)</span> <a href="../../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>version_of_w w</code> is the version associated to a matrix width of <code>w</code> (without the quiet zone).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-version_to_w" class="anchored"><a href="#val-version_to_w" class="anchor"></a><code><span><span class="keyword">val</span> version_to_w : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>version_to_w v</code> is the matrix width (without the quiet zone) for a QR code of version <code>v</code>. The result is between 21 to 177, increasing by 4 with each version.</p></div></div><h2 id="capacity"><a href="#capacity" class="anchor"></a>Capacity</h2><div class="odoc-spec"><div class="spec value" id="val-total_bytes" class="anchored"><a href="#val-total_bytes" class="anchor"></a><code><span><span class="keyword">val</span> total_bytes : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>total_bytes v</code> is the number of bytes available to encode data in a QR code of version <code>v</code>. This includes the bytes used for error correction. For all <code>ec_level</code> this is equal to <a href="#val-data_bytes"><code>data_bytes</code></a><code>
      v ec_level</code> + <a href="#val-ec_bytes"><code>ec_bytes</code></a><code> v ec_level</code>.</p><p>This is ‘Total number of codewords’ in table 9 of ISO/IEC 18004:2015.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-data_bytes" class="anchored"><a href="#val-data_bytes" class="anchor"></a><code><span><span class="keyword">val</span> data_bytes : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-ec_level">ec_level</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>data_bytes v ec_level</code> is the number of bytes that can be used for data in a QR code of version <code>v</code> with error correction level <code>ec_level</code></p><p>This is the ‘Number of data codewords’ in table 7 of ISO/IEC 18004:2015.</p><p><b>Warning.</b> Encoding the data into the actual <a href="../index.html#type-mode"><code>mode</code></a> uses a few additional bytes from these bytes. Use <a href="#val-mode_capacity"><code>mode_capacity</code></a> to determine the actual number of letters of the given mode you can encode in a QR code.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ec_bytes" class="anchored"><a href="#val-ec_bytes" class="anchor"></a><code><span><span class="keyword">val</span> ec_bytes : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-ec_level">ec_level</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>ec_bytes v ec_level</code> is the number of bytes used for error correction in a QR code of version <code>v</code> with error correction level <code>ec_level</code>.</p><p>This is the ‘Number of error correction codewords’ in table 9 of ISO/IEC 18004:2015.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ec_blocks" class="anchored"><a href="#val-ec_blocks" class="anchor"></a><code><span><span class="keyword">val</span> ec_blocks : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-ec_level">ec_level</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>ec_blocks v ec_level</code> is the number of blocks by which the data bytes to encode have to be divided and on which Reed-Solomon error correction is performed.</p><p>This is the ‘Number of error correction blocks’ in table 9 of ISO/IEC 18004:2015.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mode_capacity" class="anchored"><a href="#val-mode_capacity" class="anchor"></a><code><span><span class="keyword">val</span> mode_capacity : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-ec_level">ec_level</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>mode_capacity v ec_level mode</code> is the number of <code>mode</code> <em>letters</em> (that is bytes for <code>`Byte</code>) that can be encoded in a QR code of version <code>v</code> and error correction <code>ec_level</code>.</p><p>This is the ‘Data capacity’ columns in table 7 of ISO/IEC 18004:2015.</p></div></div><h2 id="align_pats"><a href="#align_pats" class="anchor"></a>Alignment patterns</h2><p><b>Note.</b> The result of the functions below for <code>`V 1</code> is undefined.</p><div class="odoc-spec"><div class="spec value" id="val-align_pat_count" class="anchored"><a href="#val-align_pat_count" class="anchor"></a><code><span><span class="keyword">val</span> align_pat_count : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>align_pat_count v</code> is the (maximal) number of alignement patterns along one dimension; square that and retract 3 to get the total.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-align_pat_last" class="anchored"><a href="#val-align_pat_last" class="anchor"></a><code><span><span class="keyword">val</span> align_pat_last : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>align_pat_last v</code> is the <code>x</code> coordinate of the center of the last (rightmost) alignement pattern in version <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-align_pat_delta" class="anchored"><a href="#val-align_pat_delta" class="anchor"></a><code><span><span class="keyword">val</span> align_pat_delta : <span><a href="../index.html#type-version">version</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>align_pat_delta v</code> is the distance between the centers of alignement patterns from right to left, or bottom to top; except for the last hop to column 6 or row 6 which absorbs the unevenness.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-align_pat_center" class="anchored"><a href="#val-align_pat_center" class="anchor"></a><code><span><span class="keyword">val</span> align_pat_center : <span>pat_count:int <span class="arrow">&#45;&gt;</span></span> <span>pat_last:int <span class="arrow">&#45;&gt;</span></span> <span>pat_delta:int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>align_pat_center ~pat_count ~pat_last ~pat_delta i</code> is the center of the <code>i</code>th alignement pattern starting from <code>0</code> and counting from left to right or top to bottom.</p><p>This computes the values ‘Row/Columns coordinates of center module’ in table E.1 of ISO/IEC 18004:2015.</p></div></div><h2 id="gf"><a href="#gf" class="anchor"></a>Galois field</h2><div class="odoc-spec"><div class="spec value" id="val-field" class="anchored"><a href="#val-field" class="anchor"></a><code><span><span class="keyword">val</span> field : <span><a href="../Gf_256/index.html#type-t">Gf_256.t</a> <a href="../../../ocaml/Stdlib/Lazy/index.html#type-t">Lazy.t</a></span></span></code></div><div class="spec-doc"><p><code>field</code> is the Galois field used for error correction in QR codes, the polynomial is 0b100011101 and the generator is <code>2</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gen" class="anchored"><a href="#val-gen" class="anchor"></a><code><span><span class="keyword">val</span> gen : <span><a href="../Gf_256/index.html#type-t">Gf_256.t</a> <span class="arrow">&#45;&gt;</span></span> <span>ec:int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Gf_256/index.html#type-byte">Gf_256.byte</a> array</span></span></code></div><div class="spec-doc"><p><code>gen f ec</code> is are the coefficients of the generator polynomial (x - <code>g</code><sup>0</sup>)·(x - <code>g</code><sup>1</sup>)·…·(x - <code>g</code><sup><code>ec</code></sup>) with <code>g</code> the generator of <code>f</code> and <code>ec</code> the number of error correcting bytes .</p></div></div></div></body></html>