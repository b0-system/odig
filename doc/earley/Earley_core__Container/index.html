<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Earley_core__Container (earley.Earley_core__Container)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">earley</a> &#x00BB; Earley_core__Container</nav><h1>Module <code>Earley_core__Container</code></h1><p>This library provide a type <code>Container.t</code>, which can be used as a list of polymorphic references.</p><p>Another way to see it, is map with access time in O(N) where N is the number of tables! Note: O(1) is possible, but usually there are very few table at the same time.</p><p>The typical use case is to have a record with a field of type <code>Container.t</code>. Then when you want to store some information in that field of type <code>a</code>, you create with <code>Container.create_table</code>, a value of type <code>a Container.table</code>. The with <code>Container.add</code> and <code>Container.find</code>, you can store value in your field of type <code>Container.t</code>.</p><p>More precisely, consider the following type for oriented graphs:</p><pre><code class="ml">type node = { name: string;
              mutable next: node list;
              ptrs : Container.t }
type graph = node list (* at least on node per component *)</code></pre><p>If you want to traverse the graphe, you create a table to associate a boolean to each note:</p><pre><code class="ml">let iter graph f =
  let visited : bool Container.table = Container.create_table 101 in
  ....
  (* the table is automatically freed when visited is collected *)</code></pre><p>If you want to compute the distance between two nodes:</p><pre><code class="ml">let distance a b =
  let distance_to_a : int Container.table = Container.create_table 101 in
  ....</code></pre><p>The functorial interface is useful when you have a parametric type. Considier a record type <code> 'a t </code> to which you want to associate values of type <code> ('b,'a) v </code>. It is enough for this to call the functor with</p><p><code> module M = Constainer.Make(struct type ('a,'b) v end) </code></p><p>and have a field of type <code> 'a M.container </code> inside your record. Then, you use the type <code> 'b M.table </code> when you want to start to associate values of type <code> ('a,'b) v </code> to the record. The same module <code> M </code> can be used for many types <code> 'b </code>.</p><p>Remark: the non funtorial version is just defined by: <code> Container.Make(struct type ('a, 'b) elt = 'a end </code></p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Type of a container cell</p></dd></dl><dl><dt class="spec type" id="type-table"><a href="#type-table" class="anchor"></a><code><span class="keyword">type</span> 'a table</code></dt><dd><p>Type of a container table. You must create a container table of type <code> a table </code> to store value of type <code> a </code> in a container cell. Many table can have the same type, the value are associated to the pair (cell, table), not just to the cell.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code> create () </code> creates a new container cell</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <span class="type-var">'a</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code> add tab cell v </code> associates the value v to the pair (tab, cell). complexity if O(N) where N is the number of tables with a value associated to this cell.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <span class="type-var">'a</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code> find tab cell </code> return the value associated to (tab, cell). raises Not_found if the are no such value</p></dd></dl><dl><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : <span class="type-var">'a</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code> clear tab </code> removed all value associated to a table.</p></dd></dl><dl><dt class="spec value" id="val-create_table"><a href="#val-create_table" class="anchor"></a><code><span class="keyword">val</span> create_table : unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-table">table</a></code></dt><dd><p><code> create_table () </code> creates a new table</p></dd></dl><dl><dt class="spec type" id="type-tag"><a href="#type-tag" class="anchor"></a><code><span class="keyword">type</span> _ tag</code><code> = </code><code>..</code></dt><dd><p>GADT to represent types in the syntax (extended when needed).</p></dd></dl><dl><dt class="spec value" id="val-address"><a href="#val-address" class="anchor"></a><code><span class="keyword">val</span> address : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="index.html#type-tag">tag</a></code></dt><dd><p><code> address n </code> return a unique id of each cell</p></dd></dl><dl><dt class="spec type" id="type-eq"><a href="#type-eq" class="anchor"></a><code><span class="keyword">type</span> ('a, 'b) eq</code><code> = </code><table class="variant"><tr id="type-eq.Y" class="anchored"><td class="def constructor"><a href="#type-eq.Y" class="anchor"></a><code>| </code><code><span class="constructor">Y</span> : (<span class="type-var">'a</span>, <span class="type-var">'a</span>) <a href="index.html#type-eq">eq</a></code></td></tr><tr id="type-eq.N" class="anchored"><td class="def constructor"><a href="#type-eq.N" class="anchor"></a><code>| </code><code><span class="constructor">N</span> : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-eq">eq</a></code></td></tr></table></dt><dd><p>Standard eq-type.</p></dd></dl><div class="spec module-type" id="module-type-Param"><a href="#module-type-Param" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Param/index.html">Param</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-eq"><a href="#val-eq" class="anchor"></a><code><span class="keyword">val</span> eq : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt></dl><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-T/index.html">T</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) <span>&#45;&gt;</span> <a href="index.html#module-type-Param">Param</a> <span class="keyword">with</span> <span class="keyword">type</span> ('a, 'b) <a href="Make/index.html#type-elt">elt</a> = (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="Make/argument-1-T/index.html#type-elt">T.elt</a></code></div><dl><dt class="spec type" id="type-elt"><a href="#type-elt" class="anchor"></a><code><span class="keyword">type</span> ('a, 'b) elt</code><code> = <span class="type-var">'a</span></code></dt><dt class="spec type" id="type-iter"><a href="#type-iter" class="anchor"></a><code><span class="keyword">type</span> 'a iter</code><code> = </code><code>{</code><table class="record"><tr id="type-iter.f" class="anchored"><td class="def field"><a href="#type-iter.f" class="anchor"></a><code>f : b. (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <span class="type-var">'a</span> <a href="index.html#type-iter">iter</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec type" id="type-fold"><a href="#type-fold" class="anchor"></a><code><span class="keyword">type</span> ('a, 'c) fold</code><code> = </code><code>{</code><table class="record"><tr id="type-fold.f" class="anchored"><td class="def field"><a href="#type-fold.f" class="anchor"></a><code>f : b. (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : (<span class="type-var">'a</span>, <span class="type-var">'c</span>) <a href="index.html#type-fold">fold</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-table">table</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt></dl><div class="spec module" id="module-Ref"><a href="#module-Ref" class="anchor"></a><code><span class="keyword">module</span> <a href="Ref/index.html">Ref</a> : <a href="index.html#module-type-Param">Param</a> <span class="keyword">with</span> <span class="keyword">type</span> ('a, 'b) <a href="module-type-Param/index.html#type-elt">elt</a> = <span class="type-var">'b</span></code></div></div></body></html>