<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>B00_pager (b0.B00_pager)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">b0</a> &#x00BB; B00_pager</nav><header class="odoc-preamble"><h1>Module <code><span>B00_pager</span></code></h1><p>Pager interaction.</p></header><nav class="odoc-toc"><ul><li><a href="#env">Environment variables</a></li><li><a href="#paging">Paging</a></li><li><a href="#cli">Cli interaction</a></li></ul></nav><div class="odoc-content"><h2 id="env"><a href="#env" class="anchor"></a>Environment variables</h2><div class="odoc-spec"><div class="spec module" id="module-Env" class="anchored"><a href="#module-Env" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Env/index.html">Env</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Environment variables.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-envs" class="anchored"><a href="#val-envs" class="anchor"></a><code><span><span class="keyword">val</span> envs : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="../../cmdliner/Cmdliner/Term/index.html#type-env_info">Cmdliner.Term.env_info</a> list</span></span></code></div><div class="spec-doc"><p><code>envs ()</code> describe the <code>PAGER</code> and <code>TERM</code> environment variable for cmdliner.</p></div></div><h2 id="paging"><a href="#paging" class="anchor"></a>Paging</h2><div class="odoc-spec"><div class="spec value" id="val-find" class="anchored"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span>?win_exe:bool <span class="arrow">&#45;&gt;</span></span> <span>?search:<span><a href="../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>don't:bool <span class="arrow">&#45;&gt;</span></span>
<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> option</span>, string)</span> <a href="../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>find ~search ~don't</code> finds a suitable pager. This is (in order):</p><ol><li><code>Ok None</code> if <code>don't</code> is <code>true</code> or if the <code>TERM</code> environment variable is <code>dumb</code> or undefined.</li><li><code>Ok (Some pager)</code> if <code>pager</code> is a tool invocation parsed from the <code>PAGER</code> environment variable that can be found via <code>Os.Cmd.find_tool ?win_exe ?search</code>.</li><li><code>Ok (Some pager)</code> if either <code>less</code> or <code>more</code> can be found (in that order) via <code>Os.Cmd.find_tool ?win_exe ?search</code>.</li><li><code>Ok None</code> otherwise.</li></ol></div></div><div class="odoc-spec"><div class="spec value" id="val-page_stdout" class="anchored"><a href="#val-page_stdout" class="anchor"></a><code><span><span class="keyword">val</span> page_stdout : <span><span><a href="../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, string)</span> <a href="../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>page_stdout pager</code> setups the program so that if <code>pager</code> is <code>Some cmd</code>, the standard output of the program is redirected to a spawn of <code>cmd</code> with the following twists:</p><ul><li>If the environment variable <code>LESS</code> is undefined in the current environment it is set to <code>LESS=FRX</code> for the spawn of <code>cmd</code>.</li><li>A <code>Pervasive</code>.at_exit function is installed that flushes <code>Fmt</code>.stdout and <code>stdout</code>, closes <code>Unix.stdout</code> and waits upon the <code>cmd</code> spawn termination.</li></ul><p>If <code>pager</code> is <code>None</code> this function has no effect.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-page_files" class="anchored"><a href="#val-page_files" class="anchor"></a><code><span><span class="keyword">val</span> page_files : <span><span><a href="../B00_std/Cmd/index.html#type-t">B00_std.Cmd.t</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../B00_std/Fpath/index.html#type-t">B00_std.Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, string)</span> <a href="../../ocaml/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>page_files pager fs</code> uses <code>pager</code> to page the files <code>fs</code>. If <code>pager</code> is:</p><ul><li><code>None</code>, each of the <code>fs</code> files is output on stdout in order separated by a file separator character (U+001C).</li><li><code>Some cmd</code>, <code>cmd</code> is run with <code>fs</code> as arguments. If <code>fs</code> is empty does nothing.</li></ul></div></div><h2 id="cli"><a href="#cli" class="anchor"></a>Cli interaction</h2><div class="odoc-spec"><div class="spec value" id="val-don't" class="anchored"><a href="#val-don't" class="anchor"></a><code><span><span class="keyword">val</span> don't : <span>?docs:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../../cmdliner/Cmdliner/Term/index.html#type-t">Cmdliner.Term.t</a></span></span></code></div><div class="spec-doc"><p><code>don't ~docs ()</code> is a <code>--no-pager</code> command line option to unconditionally request not use a pager. <code>docs</code> is the manual section where the option is documented.</p></div></div></div></body></html>