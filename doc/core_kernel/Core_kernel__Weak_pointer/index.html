<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Core_kernel__Weak_pointer (core_kernel.Core_kernel__Weak_pointer)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">core_kernel</a> &#x00BB; Core_kernel__Weak_pointer</nav><h1>Module <code>Core_kernel__Weak_pointer</code></h1><p>A weak pointer is a pointer to a heap block that does not cause the heap block to remain live during garbage collection. If the block would otherwise remain live, then then the weak pointer remains pointed to the block. If the block is collected, then the weak pointer is cleared.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>'a t</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val </span>sexp_of_t : (<span class="type-var">'a</span> <span>&#45;&gt;</span> Sexplib.Sexp.t) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Sexplib.Sexp.t</code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : ?&#8288;thread_safe_after_cleared:(Core_kernel__.Import.unit <span>&#45;&gt;</span> Core_kernel__.Import.unit) <span>&#45;&gt;</span> Core_kernel__.Import.unit <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create</code> creates an empty weak pointer. One must <code>set</code> it to point it to something. Whenever <code>t</code> is cleared by the garbage collector, <code>thread_safe_after_cleared</code> is called. This happens via a finalizer, so the usual trickiness of finalization applies; see <code>Gc.Expert</code> for more about finalizers.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> Core_kernel__.Import.Heap_block.t Core_kernel__.Import.option</code></dt><dt class="spec value" id="val-is_some"><a href="#val-is_some" class="anchor"></a><code><span class="keyword">val </span>is_some : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Core_kernel__.Import.bool</code></dt><dd><p><code>is_some t = Option.is_some (get t)</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_none"><a href="#val-is_none" class="anchor"></a><code><span class="keyword">val </span>is_none : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Core_kernel__.Import.bool</code></dt><dd><p><code>is_none t = Option.is_none (get t)</code>.</p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val </span>set : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> Core_kernel__.Import.Heap_block.t <span>&#45;&gt;</span> Core_kernel__.Import.unit</code></dt></dl></div></body></html>