<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (react.React.S)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">react</a> &#x00BB; <a href="../index.html">React</a> &#x00BB; S</nav><h1>Module <code>React.S</code></h1><p>Signal combinators.</p><p>Consult their <a href="../index.html#sigsem"><span>semantics.</span></a></p><nav class="toc"><ul><li><a href="#prim">Primitive and basics</a></li><li><a href="#from-events">From events</a></li><li><a href="#tr">Transforming and filtering</a></li><li><a href="#acc">Accumulating</a></li><li><a href="#combine">Combining</a></li><li><a href="#lifting">Lifting</a></li><li><a href="#special">Combinator specialization</a></li></ul></nav></header><section><header><h2 id="prim"><a href="#prim" class="anchor"></a>Primitive and basics</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code><code> = <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p>The type for signals of type <code>'a</code>.</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>const v</code> is always <code>v</code>, [<code>const v</code>]<sub>t</sub> <code>= v</code>.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> * (?&#8288;step:<a href="../index.html#type-step">step</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</code></dt><dd><p><code>create i</code> is a primitive signal <code>s</code> set to <code>i</code> and a <code>set</code> function. The function <code>set</code> is such that:</p><ul><li><code>set v</code> sets the signal's value to <code>v</code> at the time it is called and triggers an <a href="../index.html#steps"><span>update step</span></a>.</li><li><code>set ~step v</code> sets the signal's value to <code>v</code> at the time it is called and updates it dependencies when <code>step</code> is <a href="../Step/index.html#val-execute"><span>executed</span></a></li><li><code>set ~step v</code> raises <code>Invalid_argument</code> if it was previously called with a step and this step has not executed yet or if the given <code>step</code> was already executed.</li></ul><p><b>Warning.</b> <code>set</code> must not be executed inside an update step.</p></dd></dl><dl><dt class="spec value" id="val-value"><a href="#val-value" class="anchor"></a><code><span class="keyword">val</span> value : <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>value s</code> is <code>s</code>'s current value.</p><p><b>Warning.</b> If executed in an <a href="../index.html#steps"><span>update step</span></a> may return a non up-to-date value or raise <code>Failure</code> if the signal is not yet initialized.</p></dd></dl><dl><dt class="spec value" id="val-retain"><a href="#val-retain" class="anchor"></a><code><span class="keyword">val</span> retain : <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> [ `R of unit <span>&#45;&gt;</span> unit ]</code></dt><dd><p><code>retain s c</code> keeps a reference to the closure <code>c</code> in <code>s</code> and returns the previously retained value. <code>c</code> will <em>never</em> be invoked.</p><p><b>Raises.</b> <code>Invalid_argument</code> on constant signals.</p></dd></dl><dl><dt class="spec value" id="val-stop"><a href="#val-stop" class="anchor"></a><code><span class="keyword">val</span> stop : ?&#8288;strong:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>stop s</code>, stops updating <code>s</code>. It conceptually becomes <a href="index.html#val-const"><code>const</code></a> with the signal's last value and cannot be restarted. Allows to disable <a href="../index.html#sideeffects"><span>effectful</span></a> signals.</p><p>The <code>strong</code> argument should only be used on platforms where weak arrays have a strong semantics (i.e. JavaScript). See <a href="../index.html#strongstop"><span>details</span></a>.</p><p><b>Note.</b> If executed in an update step the signal may still update in the step.</p></dd></dl><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal s s'</code> is <code>true</code> iff <code>s</code> and <code>s'</code> are equal. If both signals are <a href="index.html#val-const"><code>const</code></a>ant <code>eq</code> is used between their value (defauts to structural equality). If both signals are not <a href="index.html#val-const"><code>const</code></a>ant, physical equality is used.</p></dd></dl><dl><dt class="spec value" id="val-trace"><a href="#val-trace" class="anchor"></a><code><span class="keyword">val</span> trace : ?&#8288;iff:bool <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>trace iff tr s</code> is <code>s</code> except <code>tr</code> is invoked with <code>s</code>'s current value and on <code>s</code> changes when <code>iff</code> is <code>true</code> (defaults to <code>S.const true</code>). For all t where [<code>s</code>]<sub>t</sub> <code>= v</code> and (t = 0 or ([<code>s</code>]<sub>t-dt</sub><code>= v'</code> and <code>eq v v' = false</code>)) and [<code>iff</code>]<sub>t</sub> = <code>true</code>, <code>tr</code> is invoked with <code>v</code>.</p></dd></dl></section><section><header><h2 id="from-events"><a href="#from-events" class="anchor"></a>From events</h2></header><dl><dt class="spec value" id="val-hold"><a href="#val-hold" class="anchor"></a><code><span class="keyword">val</span> hold : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>hold i e</code> has the value of <code>e</code>'s last occurrence or <code>i</code> if there wasn't any.</p><ul><li>[<code>hold i e</code>]<sub>t</sub> <code>= i</code> if [<code>e</code>]<sub>&lt;=t</sub> <code>= None</code></li><li>[<code>hold i e</code>]<sub>t</sub> <code>= v</code> if [<code>e</code>]<sub>&lt;=t</sub> <code>= Some v</code></li></ul></dd></dl></section><section><header><h2 id="tr"><a href="#tr" class="anchor"></a>Transforming and filtering</h2></header><dl><dt class="spec value" id="val-app"><a href="#val-app" class="anchor"></a><code><span class="keyword">val</span> app : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>app sf s</code> holds the value of <code>sf</code> applied to the value of <code>s</code>, [<code>app sf s</code>]<sub>t</sub> <code>=</code> [<code>sf</code>]<sub>t</sub> [<code>s</code>]<sub>t</sub>.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>map f s</code> is <code>s</code> transformed by <code>f</code>, [<code>map f s</code>]<sub>t</sub> = <code>f</code> [<code>s</code>]<sub>t</sub>.</p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>filter f i s</code> is <code>s</code>'s values that satisfy <code>p</code>. If a value does not satisfy <code>p</code> it holds the last value that was satisfied or <code>i</code> if there is none.</p><ul><li>[<code>filter p s</code>]<sub>t</sub> <code>=</code> [<code>s</code>]<sub>t</sub> if <code>p</code> [<code>s</code>]<sub>t</sub><code> = true</code>.</li><li>[<code>filter p s</code>]<sub>t</sub> <code>=</code> [<code>s</code>]<sub>t'</sub> if <code>p</code> [<code>s</code>]<sub>t</sub><code> = false</code> and t' is the greatest t' &lt; t with <code>p</code> [<code>s</code>]<sub>t'</sub><code> = true</code>.</li><li>[<code>filter p e</code>]<sub>t</sub> <code>= i</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-fmap"><a href="#val-fmap" class="anchor"></a><code><span class="keyword">val</span> fmap : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>fmap fm i s</code> is <code>s</code> filtered and mapped by <code>fm</code>.</p><ul><li>[<code>fmap fm i s</code>]<sub>t</sub> <code>=</code> v if <code>fm</code> [<code>s</code>]<sub>t</sub><code> = Some v</code>.</li><li>[<code>fmap fm i s</code>]<sub>t</sub> <code>=</code> [<code>fmap fm i s</code>]<sub>t'</sub> if <code>fm</code> [<code>s</code>]<sub>t</sub> <code>= None</code> and t' is the greatest t' &lt; t with <code>fm</code> [<code>s</code>]<sub>t'</sub> <code>&lt;&gt; None</code>.</li><li>[<code>fmap fm i s</code>]<sub>t</sub> <code>= i</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-diff"><a href="#val-diff" class="anchor"></a><code><span class="keyword">val</span> diff : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>diff f s</code> is an event with occurrences whenever <code>s</code> changes from <code>v'</code> to <code>v</code> and <code>eq v v'</code> is <code>false</code> (<code>eq</code> is the signal's equality function). The value of the occurrence is <code>f v v'</code>.</p><ul><li>[<code>diff f s</code>]<sub>t</sub> <code>= Some d</code> if [<code>s</code>]<sub>t</sub> <code>= v</code> and [<code>s</code>]<sub>t-dt</sub> <code>= v'</code> and <code>eq v v' = false</code> and <code>f v v' = d</code>.</li><li>[<code>diff f s</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-changes"><a href="#val-changes" class="anchor"></a><code><span class="keyword">val</span> changes : <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>changes s</code> is <code>diff (fun v _ -&gt; v) s</code>.</p></dd></dl><dl><dt class="spec value" id="val-sample"><a href="#val-sample" class="anchor"></a><code><span class="keyword">val</span> sample : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>sample f e s</code> samples <code>s</code> at <code>e</code>'s occurrences.</p><ul><li>[<code>sample f e s</code>]<sub>t</sub> <code>= Some (f ev sv)</code> if [<code>e</code>]<sub>t</sub> <code>= Some ev</code> and [<code>s</code>]<sub>t</sub> <code>= sv</code>.</li><li>[<code>sample e s</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-on"><a href="#val-on" class="anchor"></a><code><span class="keyword">val</span> on : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> bool <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>on c i s</code> is the signal <code>s</code> whenever <code>c</code> is <code>true</code>. When <code>c</code> is <code>false</code> it holds the last value <code>s</code> had when <code>c</code> was the last time <code>true</code> or <code>i</code> if it never was.</p><ul><li>[<code>on c i s</code>]<sub>t</sub> <code>=</code> [<code>s</code>]<sub>t</sub> if [<code>c</code>]<sub>t</sub> <code>= true</code></li><li>[<code>on c i s</code>]<sub>t</sub> <code>=</code> [<code>s</code>]<sub>t'</sub> if [<code>c</code>]<sub>t</sub> <code>= false</code> where t' is the greatest t' &lt; t with [<code>c</code>]<sub>t'</sub> <code>= true</code>.</li><li>[<code>on c i s</code>]<sub>t</sub> <code>=</code> <code>i</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-when_"><a href="#val-when_" class="anchor"></a><code><span class="keyword">val</span> when_ : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> bool <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><dl><dt>deprecated</dt><dd><p>Use <a href="index.html#val-on"><code>on</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-dismiss"><a href="#val-dismiss" class="anchor"></a><code><span class="keyword">val</span> dismiss : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>dismiss c i s</code> is the signal <code>s</code> except changes when <code>c</code> occurs are ignored. If <code>c</code> occurs initially <code>i</code> is used.</p><ul><li>[<code>dismiss c i s</code>]<sub>t</sub> <code>=</code> [<code>s</code>]<sub>t'</sub> where t' is the greatest t' &lt;= t with [<code>c</code>]<sub>t'</sub> <code>= None</code> and [<code>s</code>]<sub>t'-dt</sub> <code>&lt;&gt;</code> [<code>s</code>]<sub>t'</sub></li><li>[<code>dismiss_ c i s</code>]<sub>0</sub> <code>=</code> <code>v</code> where <code>v = i</code> if [<code>c</code>]<sub>0</sub> <code>= Some _</code> and <code>v =</code> [<code>s</code>]<sub>0</sub> otherwise.</li></ul></dd></dl></section><section><header><h2 id="acc"><a href="#acc" class="anchor"></a>Accumulating</h2></header><dl><dt class="spec value" id="val-accum"><a href="#val-accum" class="anchor"></a><code><span class="keyword">val</span> accum : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>accum e i</code> is <code>S.hold i (</code><a href="../E/index.html#accum"><span>Accumulating</span></a><code> e i)</code>.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>fold f i e</code> is <code>S.hold i (</code><a href="../E/index.html#val-fold"><code>E.fold</code></a><code> f i e)</code>.</p></dd></dl></section><section><header><h2 id="combine"><a href="#combine" class="anchor"></a>Combining</h2></header><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a> list <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>merge f a sl</code> merges the value of every signal in <code>sl</code> using <code>f</code> and the accumulator <code>a</code>.</p><p>[<code>merge f a sl</code>]<sub>t</sub> <code>= List.fold_left f a (List.map</code> []<sub>t</sub><code> sl)</code>.</p></dd></dl><dl><dt class="spec value" id="val-switch"><a href="#val-switch" class="anchor"></a><code><span class="keyword">val</span> switch : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>switch ss</code> is the inner signal of <code>ss</code>.</p><ul><li>[<code>switch ss</code>]<sub>t</sub> <code>=</code> [[<code>ss</code>]<sub>t</sub>]<sub>t</sub>.</li></ul></dd></dl><dl><dt class="spec value" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span class="keyword">val</span> bind : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a></code></dt><dd><p><code>bind s sf</code> is <code>switch (map ~eq:( == ) sf s)</code>.</p></dd></dl><dl><dt class="spec value" id="val-fix"><a href="#val-fix" class="anchor"></a><code><span class="keyword">val</span> fix : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> * <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>fix i sf</code> allow to refer to the value a signal had an infinitesimal amount of time before.</p><p>In <code>fix sf</code>, <code>sf</code> is called with a signal <code>s</code> that represents the signal returned by <code>sf</code> delayed by an infinitesimal amount time. If <code>s', r = sf s</code> then <code>r</code> is returned by <code>fix</code> and <code>s</code> is such that :</p><ul><li>[<code>s</code>]<sub>t</sub> <code>=</code> <code>i</code> for t = 0.</li><li>[<code>s</code>]<sub>t</sub> <code>=</code> [<code>s'</code>]<sub>t-dt</sub> otherwise.</li></ul><p><code>eq</code> is the equality used by <code>s</code>.</p><p><b>Raises.</b> <code>Invalid_argument</code> if <code>s'</code> is directly a delayed signal (i.e. a signal given to a fixing function).</p><p><b>Note.</b> Regarding values depending on the result <code>r</code> of <code>s', r = sf s</code> the following two cases need to be distinguished :</p><ul><li><p>After <code>sf s</code> is applied, <code>s'</code> does not depend on a value that is in a step and <code>s</code> has no dependents in a step (e.g in the simple case where <code>fix</code> is applied outside a step).</p><p>In that case if the initial value of <code>s'</code> differs from <code>i</code>, <code>s</code> and its dependents need to be updated and a special update step will be triggered for this. Values depending on the result <code>r</code> will be created only after this special update step has finished (e.g. they won't see the <code>i</code> of <code>s</code> if <code>r = s</code>).</p></li><li>Otherwise, values depending on <code>r</code> will be created in the same step as <code>s</code> and <code>s'</code> (e.g. they will see the <code>i</code> of <code>s</code> if <code>r = s</code>).</li></ul></dd></dl></section><section><header><h2 id="lifting"><a href="#lifting" class="anchor"></a>Lifting</h2><p>Lifting combinators. For a given <code>n</code> the semantics is :</p><p>[<code>ln f a1</code> ... <code>an</code>]<sub>t</sub> = f [<code>a1</code>]<sub>t</sub> ... [<code>an</code>]<sub>t</sub></p></header><dl><dt class="spec value" id="val-l1"><a href="#val-l1" class="anchor"></a><code><span class="keyword">val</span> l1 : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a></code></dt><dt class="spec value" id="val-l2"><a href="#val-l2" class="anchor"></a><code><span class="keyword">val</span> l2 : ?&#8288;eq:(<span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="../index.html#type-signal">signal</a></code></dt><dt class="spec value" id="val-l3"><a href="#val-l3" class="anchor"></a><code><span class="keyword">val</span> l3 : ?&#8288;eq:(<span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'d</span> <a href="../index.html#type-signal">signal</a></code></dt><dt class="spec value" id="val-l4"><a href="#val-l4" class="anchor"></a><code><span class="keyword">val</span> l4 : ?&#8288;eq:(<span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'d</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'e</span> <a href="../index.html#type-signal">signal</a></code></dt><dt class="spec value" id="val-l5"><a href="#val-l5" class="anchor"></a><code><span class="keyword">val</span> l5 : ?&#8288;eq:(<span class="type-var">'f</span> <span>&#45;&gt;</span> <span class="type-var">'f</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'f</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'d</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'e</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'f</span> <a href="../index.html#type-signal">signal</a></code></dt><dt class="spec value" id="val-l6"><a href="#val-l6" class="anchor"></a><code><span class="keyword">val</span> l6 : ?&#8288;eq:(<span class="type-var">'g</span> <span>&#45;&gt;</span> <span class="type-var">'g</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'f</span> <span>&#45;&gt;</span> <span class="type-var">'g</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'d</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'e</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'f</span> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'g</span> <a href="../index.html#type-signal">signal</a></code></dt></dl><aside><p>The following modules lift some of <code>Pervasives</code> functions and operators.</p></aside><div class="spec module" id="module-Bool"><a href="#module-Bool" class="anchor"></a><code><span class="keyword">module</span> <a href="Bool/index.html">Bool</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Int"><a href="#module-Int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int/index.html">Int</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Float"><a href="#module-Float" class="anchor"></a><code><span class="keyword">module</span> <a href="Float/index.html">Float</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Pair"><a href="#module-Pair" class="anchor"></a><code><span class="keyword">module</span> <a href="Pair/index.html">Pair</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Option"><a href="#module-Option" class="anchor"></a><code><span class="keyword">module</span> <a href="Option/index.html">Option</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Compare"><a href="#module-Compare" class="anchor"></a><code><span class="keyword">module</span> <a href="Compare/index.html">Compare</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="special"><a href="#special" class="anchor"></a>Combinator specialization</h2><p>Given an equality function <code>equal</code> and a type <code>t</code>, the functor <a href="Make/index.html"><code>Make</code></a> automatically applies the <code>eq</code> parameter of the combinators. The outcome is combinators whose <em>results</em> are signals with values in <code>t</code>.</p><p>Basic types are already specialized in the module <a href="Special/index.html"><code>Special</code></a>, open this module to use them.</p></header><dl><dt class="spec module-type" id="module-type-EqType"><a href="#module-type-EqType" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-EqType/index.html">EqType</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Input signature of <a href="Make/index.html"><code>Make</code></a></p></dd></dl><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Output signature of <a href="Make/index.html"><code>Make</code></a></p></dd></dl><dl><dt class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-Eq/index.html">Eq</a> : <a href="index.html#module-type-EqType">EqType</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="Make/index.html#type-v">v</a> = <span class="type-var">'a</span> <a href="Make/argument-1-Eq/index.html#type-t">Eq.t</a></code></dt><dd><p>Functor specializing the combinators for the given signal value type</p></dd></dl><dl><dt class="spec module" id="module-Special"><a href="#module-Special" class="anchor"></a><code><span class="keyword">module</span> <a href="Special/index.html">Special</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Specialization for booleans, integers and floats.</p></dd></dl></section></div></body></html>