<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tuntap (tuntap.Tuntap)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tuntap</a> &#x00BB; Tuntap</nav><h1>Module <code>Tuntap</code></h1><p>Module for dealing with TUN/TAP devices. TUN refers to layer 3 virtual interfaces whereas TAP refers to layer 2 ones.</p></header><dl><dt class="spec value" id="val-opentun"><a href="#val-opentun" class="anchor"></a><code><span class="keyword">val</span> opentun : ?&#8288;pi:bool <span>&#45;&gt;</span> ?&#8288;persist:bool <span>&#45;&gt;</span> ?&#8288;user:int <span>&#45;&gt;</span> ?&#8288;group:int <span>&#45;&gt;</span> ?&#8288;devname:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> * string</code></dt><dd><p><code>opentun ~pi ~persist ~user ~group ~devname ()</code> will create a TUN interface. If <code>devname</code> is specified, or if <code>devname</code> specify an unexistant device, a new device will be created, otherwise, the interface <code>devname</code> will be opened. <code>no_pi</code> is to indicate if you want packet information associated with your frames (tap) or packets (tun) (defaults to no information). <code>persist</code> will set the device persistent with permissions set to <code>user</code> and <code>group</code> if supported by your OS (currently MacOSX does not support it). The return value is a pair consisting of a fd opened on the freshly created interface, and its name as will be displayed by command <code>ifconfig</code> for example.</p></dd></dl><dl><dt class="spec value" id="val-opentap"><a href="#val-opentap" class="anchor"></a><code><span class="keyword">val</span> opentap : ?&#8288;pi:bool <span>&#45;&gt;</span> ?&#8288;persist:bool <span>&#45;&gt;</span> ?&#8288;user:int <span>&#45;&gt;</span> ?&#8288;group:int <span>&#45;&gt;</span> ?&#8288;devname:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> * string</code></dt><dd><p>Like <code>opentun</code>, but open TAP interfaces instead of TUN ones.</p></dd></dl><dl><dt class="spec value" id="val-closetun"><a href="#val-closetun" class="anchor"></a><code><span class="keyword">val</span> closetun : string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>closetun devname kind</code> will destroy <code>devname</code>, if it exists.</p></dd></dl><dl><dt class="spec value" id="val-closetap"><a href="#val-closetap" class="anchor"></a><code><span class="keyword">val</span> closetap : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Like <code>closetun</code>, but for TAP interfaces.</p></dd></dl><dl><dt class="spec value" id="val-get_ifnamsiz"><a href="#val-get_ifnamsiz" class="anchor"></a><code><span class="keyword">val</span> get_ifnamsiz : unit <span>&#45;&gt;</span> int</code></dt><dd><p><code>get_ifnamsiz ()</code> is the value of the constant IFNAMSIZ, defined in &lt;net/if.h&gt;. Useful for allocating buffers that contain interface names.</p></dd></dl><dl><dt class="spec value" id="val-get_macaddr"><a href="#val-get_macaddr" class="anchor"></a><code><span class="keyword">val</span> get_macaddr : string <span>&#45;&gt;</span> <a href="../../ipaddr/Macaddr/index.html#type-t">Macaddr.t</a></code></dt><dd><p><code>get_hwaddr devname</code> is the MAC address of interface <code>devname</code>, as a raw string (not hexa).</p></dd></dl><dl><dt class="spec value" id="val-set_ipv4"><a href="#val-set_ipv4" class="anchor"></a><code><span class="keyword">val</span> set_ipv4 : ?&#8288;netmask:<a href="../../ipaddr/Ipaddr/V4/Prefix/index.html#type-t">Ipaddr.V4.Prefix.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_ipv4 ~netmask dev ipaddr</code> assigns an <code>ipaddr</code> to interface <code>dev</code>, with associated netmask <code>netmask</code> if specified. If unspecified, the kernel will assign a default netmask automatically.</p></dd></dl><dl><dt class="spec value" id="val-set_up_and_running"><a href="#val-set_up_and_running" class="anchor"></a><code><span class="keyword">val</span> set_up_and_running : string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_up_and_running devname</code> sets interface <code>devname</code> up and running. Note that when using the <code>set_ipv4</code> function, the interface will automatically be set up and running.</p></dd></dl><dl><dt class="spec value" id="val-getifaddrs"><a href="#val-getifaddrs" class="anchor"></a><code><span class="keyword">val</span> getifaddrs : unit <span>&#45;&gt;</span> (string * [ `V4 of <a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> * <a href="../../ipaddr/Ipaddr/V4/Prefix/index.html#type-t">Ipaddr.V4.Prefix.t</a> | `V6 of <a href="../../ipaddr/Ipaddr/V6/index.html#type-t">Ipaddr.V6.t</a> * <a href="../../ipaddr/Ipaddr/V6/Prefix/index.html#type-t">Ipaddr.V6.Prefix.t</a> ]) list</code></dt><dd><p><code>getifaddrs ()</code> is the list that associates interface names with IP addresses and prefix. Only interfaces that have an IP address assigned are returned.</p></dd></dl><dl><dt class="spec value" id="val-getifaddrs_v4"><a href="#val-getifaddrs_v4" class="anchor"></a><code><span class="keyword">val</span> getifaddrs_v4 : unit <span>&#45;&gt;</span> (string * (<a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> * <a href="../../ipaddr/Ipaddr/V4/Prefix/index.html#type-t">Ipaddr.V4.Prefix.t</a>)) list</code></dt><dd><p>Same as <code>getifaddrs</code> but only return interfaces that have an IPv4 assigned.</p></dd></dl><dl><dt class="spec value" id="val-getifaddrs_v6"><a href="#val-getifaddrs_v6" class="anchor"></a><code><span class="keyword">val</span> getifaddrs_v6 : unit <span>&#45;&gt;</span> (string * (<a href="../../ipaddr/Ipaddr/V6/index.html#type-t">Ipaddr.V6.t</a> * <a href="../../ipaddr/Ipaddr/V6/Prefix/index.html#type-t">Ipaddr.V6.Prefix.t</a>)) list</code></dt><dd><p>Same as <code>getifaddrs</code> but only return interfaces that have an IPv6 assigned.</p></dd></dl><dl><dt class="spec value" id="val-addrs_of_ifname"><a href="#val-addrs_of_ifname" class="anchor"></a><code><span class="keyword">val</span> addrs_of_ifname : string <span>&#45;&gt;</span> [ `V4 of <a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> * <a href="../../ipaddr/Ipaddr/V4/Prefix/index.html#type-t">Ipaddr.V4.Prefix.t</a> | `V6 of <a href="../../ipaddr/Ipaddr/V6/index.html#type-t">Ipaddr.V6.t</a> * <a href="../../ipaddr/Ipaddr/V6/Prefix/index.html#type-t">Ipaddr.V6.Prefix.t</a> ] list</code></dt><dd><p><code>addrs_of_ifname ifname</code> is the list of IP addresses and their prefixes associated to interface <code>ifname</code>.</p></dd></dl><dl><dt class="spec value" id="val-v4_of_ifname"><a href="#val-v4_of_ifname" class="anchor"></a><code><span class="keyword">val</span> v4_of_ifname : string <span>&#45;&gt;</span> (<a href="../../ipaddr/Ipaddr/V4/index.html#type-t">Ipaddr.V4.t</a> * <a href="../../ipaddr/Ipaddr/V4/Prefix/index.html#type-t">Ipaddr.V4.Prefix.t</a>) list</code></dt><dd><p><code>v4_of_ifname ifname</code> is the list of IPv4 addresses and their prefixes associated to interface <code>ifname</code>.</p></dd></dl><dl><dt class="spec value" id="val-v6_of_ifname"><a href="#val-v6_of_ifname" class="anchor"></a><code><span class="keyword">val</span> v6_of_ifname : string <span>&#45;&gt;</span> (<a href="../../ipaddr/Ipaddr/V6/index.html#type-t">Ipaddr.V6.t</a> * <a href="../../ipaddr/Ipaddr/V6/Prefix/index.html#type-t">Ipaddr.V6.Prefix.t</a>) list</code></dt><dd><p><code>v6_of_ifname ifname</code> is the list of IPv6 addresses and their prefixes associated to interface <code>ifname</code>.</p></dd></dl></div></body></html>