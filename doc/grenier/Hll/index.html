<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hll (grenier.Hll)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">grenier</a> &#x00BB; Hll</nav><h1>Module <code>Hll</code></h1><p>An implementation of HyperLogLog probabilistic cardinality estimator.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Type of HyperLogLog counters</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : error:float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Create a new counter with <code>error</code> error rate. <code>error</code> should verify <code>0.0 &lt; error &amp;&amp; error &lt; 1.0</code>. <code>0.05</code> is a reasonable default.</p><p>Use <code>estimate_memory</code> to measure memory consumption and runtime of this function.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int64 <span>&#45;&gt;</span> unit</code></dt><dd><p><code>add t k</code> counts item <code>k</code> in <code>t</code>.</p><p><code>k</code> should be &quot;random&quot;: it should be the output of some cryptographic hashing algorithm like SHA. It is not treated as an integer. This is key to getting proper results. No patterns should appear in the bits of the different items added.</p><p>Runtime is O(1).</p></dd></dl><dl><dt class="spec value" id="val-estimate_memory"><a href="#val-estimate_memory" class="anchor"></a><code><span class="keyword">val</span> estimate_memory : error:float <span>&#45;&gt;</span> int</code></dt><dd><p>Estimate the memory consumed in bytes by a counter with the specified error rate.</p><p>This ignores the constant overhead of the OCaml representation, around two words. It is a <code>bytes</code> of <code>estimate_memory ~error + 1</code> length.</p></dd></dl><dl><dt class="spec value" id="val-card"><a href="#val-card" class="anchor"></a><code><span class="keyword">val</span> card : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Get the cardinality estimation. Defaults to HyperLogLog++.</p></dd></dl><dl><dt class="spec value" id="val-card_hll"><a href="#val-card_hll" class="anchor"></a><code><span class="keyword">val</span> card_hll : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dt class="spec value" id="val-card_hllpp"><a href="#val-card_hllpp" class="anchor"></a><code><span class="keyword">val</span> card_hllpp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dt class="spec value" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val</span> copy : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Get a copy of a counter.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : into:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>merge ~into:t0 t'</code> has the same effect as adding all items added to <code>t'</code> to <code>t0</code>.</p><p><code>t0</code> and <code>t'</code> must have been constructed with the same error rate!</p></dd></dl><dl><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Reset counter to 0.</p></dd></dl><dl><dt class="spec value" id="val-hash_int64"><a href="#val-hash_int64" class="anchor"></a><code><span class="keyword">val</span> hash_int64 : int64 <span>&#45;&gt;</span> int64</code></dt><dd><p>The following algorithm provide a reasonable hashing function for integers, if you want to feed the HLL with &quot;normal&quot; integers.</p></dd></dl></div></body></html>