<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Meta (b0.B0_opam.Meta)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">b0</a> &#x00BB; <a href="../index.html">B0_opam</a> &#x00BB; Meta</nav><header class="odoc-preamble"><h1>Module <code><span>B0_opam.Meta</span></code></h1><p><code>opam</code> metadata.</p><p>Some of the metadata is covered by <a href="../../B0_meta/index.html#std">standard keys</a>.</p></header><nav class="odoc-toc"><ul><li><a href="#pkg_derivation">Package derivation</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-pkg_spec" class="anchored"><a href="#type-pkg_spec" class="anchor"></a><code><span><span class="keyword">type</span> pkg_spec</span><span> = string * string</span></code></div><div class="spec-doc"><p>The type for package specifications. A package name and a <a href="http://opam.ocaml.org/doc/Manual.html#Filtered-package-formulas">filtered package formula</a>, use <code>&quot;&quot;</code> if you don't have any constraint.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build" class="anchored"><a href="#val-build" class="anchor"></a><code><span><span class="keyword">val</span> build : <span>string <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>build</code> is an opam <code>build:</code> field value. This is a raw string in opam syntax that defines the whole field. Used to override automatic opam file generation, see <a href="#val-pkg_of_pack"><code>pkg_of_pack</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-depends" class="anchored"><a href="#val-depends" class="anchor"></a><code><span><span class="keyword">val</span> depends : <span><span><a href="#type-pkg_spec">pkg_spec</a> list</span> <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>depends</code> is an opam <code>depends:</code> field value. Used to override automatic opam file dependency generation, see <a href="#val-pkg_of_pack"><code>pkg_of_pack</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-depopts" class="anchored"><a href="#val-depopts" class="anchor"></a><code><span><span class="keyword">val</span> depopts : <span><span><a href="#type-pkg_spec">pkg_spec</a> list</span> <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>depopts</code> is an opam <code>depopts:</code> field value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-conflicts" class="anchored"><a href="#val-conflicts" class="anchor"></a><code><span><span class="keyword">val</span> conflicts : <span><span><a href="#type-pkg_spec">pkg_spec</a> list</span> <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>conflicts</code> is an opam <code>conflicts:</code> field value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-file_addendum" class="anchored"><a href="#val-file_addendum" class="anchor"></a><code><span><span class="keyword">val</span> file_addendum : <span><a href="../File/index.html#type-t">File.t</a> <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>file_addendum</code> is an <code>opam</code> file fragment appended at the end of a generated <code>opam</code> file. See <a href="../File/index.html#val-pkg_of_meta"><code>B0_opam.File.pkg_of_meta</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-install" class="anchored"><a href="#val-install" class="anchor"></a><code><span><span class="keyword">val</span> install : <span>string <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>install</code> is an opam <code>install:</code> field value. This is a raw string in opam syntax that defines the whole field. Used to override automatic opam file generation, see <a href="#val-pkg_of_pack"><code>pkg_of_pack</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span>string <a href="../../B0_meta/index.html#type-key">B0_meta.key</a></span></span></code></div><div class="spec-doc"><p><code>name</code> is an <code>opam</code> <code>name:</code> field value. Use to override automatic <code>opam</code> package name generation, see <a href="#val-pkg_of_pack"><code>pkg_of_pack</code></a>.</p></div></div><h2 id="pkg_derivation"><a href="#pkg_derivation" class="anchor"></a>Package derivation</h2><div class="odoc-spec"><div class="spec value" id="val-pkg_of_pack" class="anchored"><a href="#val-pkg_of_pack" class="anchor"></a><code><span><span class="keyword">val</span> pkg_of_pack : <span><a href="../../B0_pack/index.html#type-t">B0_pack.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../B0_meta/index.html#type-t">B0_meta.t</a></span></code></div><div class="spec-doc"><p><code>pkg_of_pack p</code> is <code>opam</code> package metadata for pack <code>p</code> ready to be used with <a href="../File/index.html#val-pkg_of_meta"><code>File.pkg_of_meta</code></a> to derive an opam package file.</p><p>This is <code>p</code>'s metadata with the following fields added if they are unspecified:</p><ul><li><a href="#val-name"><code>name</code></a>, the value of <a href="../index.html#val-pkg_name_of_pack"><code>B0_opam.pkg_name_of_pack</code></a><code> p</code>.</li><li><a href="../../B0_meta/index.html#val-synopsis"><code>B0_meta.synopsis</code></a> and <a href="../../B0_meta/index.html#val-description"><code>B0_meta.description</code></a>. The fields are tentatively derived from an existing <code>README.md</code> in the <span class="xref-unresolved">scope directory</span> of <code>p</code>. The first marked up section of the file is extracted, its title is parsed according to the pattern '$(NAME) $(SEP) $(SYNOPSIS)' to get a synopsis line and the body up to the next (sub)section defines the description.</li><li><a href="#val-build"><code>build</code></a>, a locked b0 build of the pack is defined.</li><li><a href="#val-depends"><code>depends</code></a>, we collect the OCaml libraries required by units in the pack, derive a package names out of them. <b>FIXME.</b> This is the poc but it's not workable for now we don't have enough metadata in library names.</li></ul></div></div></div></body></html>