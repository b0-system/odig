<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Subtle_crypto (brr.Brr_webcrypto.Subtle_crypto)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">brr</a> &#x00BB; <a href="../index.html">Brr_webcrypto</a> &#x00BB; Subtle_crypto</nav><header class="odoc-preamble"><h1>Module <code><span>Brr_webcrypto.Subtle_crypto</span></code></h1><p><code>SubtleCrypto</code> objects</p></header><nav class="odoc-toc"><ul><li><a href="#sign">Signatures</a></li><li><a href="#gen">Key generation</a></li><li><a href="#derive">Key derivation</a></li><li><a href="#codec">Key encoding and decoding</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto"><code>SubtleCrypto</code></a> objects.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-encrypt" class="anchored"><a href="#val-encrypt" class="anchor"></a><code><span><span class="keyword">val</span> encrypt : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>encrypt s a k data</code> is <code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt">encrypted</a> with key <code>k</code> and algorithm <code>a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-decrypt" class="anchored"><a href="#val-decrypt" class="anchor"></a><code><span><span class="keyword">val</span> decrypt : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>decrypt s a k data</code> is <code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/decrypt">decrypted</a> with key <code>k</code> and algorithm <code>a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-digest" class="anchored"><a href="#val-digest" class="anchor"></a><code><span><span class="keyword">val</span> digest : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>digest s a data</code> is the <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest">digest</a> of <code>data</code> according to algorithm <code>a</code>.</p></div></div><h2 id="sign"><a href="#sign" class="anchor"></a>Signatures</h2><div class="odoc-spec"><div class="spec value" id="val-sign" class="anchored"><a href="#val-sign" class="anchor"></a><code><span><span class="keyword">val</span> sign : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>sign s a k data</code> is the <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/sign">signature</a> of <code>data</code> with key <code>k</code> and algorithm <code>a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-verify" class="anchored"><a href="#val-verify" class="anchor"></a><code><span><span class="keyword">val</span> verify : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span>sig':<span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'c</span>, <span class="type-var">'d</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>verify s a k ~sig' data</code> is <code>true</code> iff the signature of <code>data</code> with key <code>k</code> and algorithm <code>a</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/verify">matches</a> <code>sig'</code>.</p></div></div><h2 id="gen"><a href="#gen" class="anchor"></a>Key generation</h2><div class="odoc-spec"><div class="spec value" id="val-generate_key" class="anchored"><a href="#val-generate_key" class="anchor"></a><code><span><span class="keyword">val</span> generate_key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>extractable:bool <span class="arrow">&#45;&gt;</span></span> <span>usages:<span><a href="../Crypto_key/Usage/index.html#type-t">Crypto_key.Usage.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>generate_key s a ~extractable ~usage</code> is a key <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/generateKey">generated</a> for algorithm <code>a</code> and usages <code>usages</code>. <b>Warning</b> if the algorithm generates a key pair use <a href="#val-generate_key_pair"><code>generate_key_pair</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-generate_key_pair" class="anchored"><a href="#val-generate_key_pair" class="anchor"></a><code><span><span class="keyword">val</span> generate_key_pair : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>extractable:bool <span class="arrow">&#45;&gt;</span></span> <span>usages:<span><a href="../Crypto_key/Usage/index.html#type-t">Crypto_key.Usage.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-pair">Crypto_key.pair</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>generate_key s a ~extractable ~usage</code> is a key <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/generateKey">generated</a> of type and parameters <code>a</code> and usages <code>usages</code>. <b>Warning</b> if the algorithm generates a single key use <a href="#val-generate_key"><code>generate_key</code></a>.</p></div></div><h2 id="derive"><a href="#derive" class="anchor"></a>Key derivation</h2><div class="odoc-spec"><div class="spec value" id="val-derive_bits" class="anchored"><a href="#val-derive_bits" class="anchor"></a><code><span><span class="keyword">val</span> derive_bits : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>derive_bits s a k l</code> are <code>l</code> bits <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/deriveBits">derived</a> from <code>k</code> with algorithm <code>a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-derive_key" class="anchored"><a href="#val-derive_key" class="anchor"></a><code><span><span class="keyword">val</span> derive_key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span>derived:<a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>extractable:bool <span class="arrow">&#45;&gt;</span></span> <span>usages:<span><a href="../Crypto_key/Usage/index.html#type-t">Crypto_key.Usage.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>derive_key s a k ~derived_type ~extractable ~usages</code> is a key of type and parameters <code>~derived</code> and usages <code>usages</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/deriveKey">derived</a> from key <code>k</code> of type and parameters <code>a</code>.</p></div></div><h2 id="codec"><a href="#codec" class="anchor"></a>Key encoding and decoding</h2><div class="odoc-spec"><div class="spec value" id="val-export_key" class="anchored"><a href="#val-export_key" class="anchor"></a><code><span><span class="keyword">val</span> export_key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/Format/index.html#type-t">Crypto_key.Format.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>[ <span>`Buffer of <a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a></span> <span><span>| `Json_web_key</span> of <a href="../../Brr/Json/index.html#type-t">Brr.Json.t</a></span> ]</span> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>export_key s f k</code> is the key <code>k</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/exportKey">exported</a> in format <code>f</code>. <code>`Json_web_key</code> is only returned if <a href="../Crypto_key/Format/index.html#val-jwk"><code>Crypto_key.Format.jwk</code></a> is specified.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-import_key" class="anchored"><a href="#val-import_key" class="anchor"></a><code><span><span class="keyword">val</span> import_key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/Format/index.html#type-t">Crypto_key.Format.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>[ <span>`Buffer of <a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a></span> <span><span>| `Json_web_key</span> of <a href="../../Brr/Json/index.html#type-t">Brr.Json.t</a></span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>extractable:bool <span class="arrow">&#45;&gt;</span></span>
<span>usages:<span><a href="../Crypto_key/Usage/index.html#type-t">Crypto_key.Usage.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>import_key s f k a ~extractable ~usage</code> is the key <code>k</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/importKey">imported</a> from format <code>f</code> and type <code>a</code> used for <code>usages</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-wrap_key" class="anchored"><a href="#val-wrap_key" class="anchor"></a><code><span><span class="keyword">val</span> wrap_key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/Format/index.html#type-t">Crypto_key.Format.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span>wrap_key:<a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span>wrapper:<a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Brr/Tarray/Buffer/index.html#type-t">Brr.Tarray.Buffer.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>wrap_key s f k ~wrap_key ~wrapper</code> is like <a href="#val-export_key"><code>export_key</code></a> but <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/wrapKey">encrypts</a> the result with <code>wrap_key</code> ad algorithm <code>wrapper</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unwrap_key" class="anchored"><a href="#val-unwrap_key" class="anchor"></a><code><span><span class="keyword">val</span> unwrap_key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/Format/index.html#type-t">Crypto_key.Format.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Brr/Tarray/index.html#type-t">Brr.Tarray.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>wrap_key:<a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <span class="arrow">&#45;&gt;</span></span> <span>wrapper:<a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unwrapped:<a href="../Crypto_algo/index.html#type-t">Crypto_algo.t</a> <span class="arrow">&#45;&gt;</span></span>
<span>extractable:bool <span class="arrow">&#45;&gt;</span></span> <span>usages:<span><a href="../Crypto_key/Usage/index.html#type-t">Crypto_key.Usage.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Crypto_key/index.html#type-t">Crypto_key.t</a> <a href="../../Fut/index.html#type-or_error">Fut.or_error</a></span></span></code></div><div class="spec-doc"><p><code>unwrap_key s f b ~wrap_key ~wrapper ~unwrapped ~extractable ~usages</code> is like <a href="#val-import_key"><code>import_key</code></a> but <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/unwrapKey">unwraps</a> the wrapper of <code>b</code> made wtih <code>wrap_key</code> and algorithm <code>wrapped</code>.</p></div></div></div></body></html>