<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamConsole (opam-core.OpamConsole)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">opam-core</a> &#x00BB; OpamConsole</nav><h1>Module <code>OpamConsole</code></h1><p>Console output, ANSI color, logging and user querying</p></header><aside><p>Global configuration parameters (read from OpamGlobalConfig, and the environment when necessary)</p></aside><dl><dt class="spec value" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span class="keyword">val</span> debug : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-verbose"><a href="#val-verbose" class="anchor"></a><code><span class="keyword">val</span> verbose : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-color"><a href="#val-color" class="anchor"></a><code><span class="keyword">val</span> color : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-utf8"><a href="#val-utf8" class="anchor"></a><code><span class="keyword">val</span> utf8 : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-utf8_extended"><a href="#val-utf8_extended" class="anchor"></a><code><span class="keyword">val</span> utf8_extended : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-disp_status_line"><a href="#val-disp_status_line" class="anchor"></a><code><span class="keyword">val</span> disp_status_line : unit <span>&#45;&gt;</span> bool</code></dt></dl><aside><p>General text formatting</p></aside><dl><dt class="spec type" id="type-text_style"><a href="#type-text_style" class="anchor"></a><code><span class="keyword">type</span> text_style</code> = <code>[ </code><table class="variant"><tr id="type-text_style.black" class="anchored"><td class="def constructor"><a href="#type-text_style.black" class="anchor"></a><code>| </code><code>`black</code></td></tr><tr id="type-text_style.blue" class="anchored"><td class="def constructor"><a href="#type-text_style.blue" class="anchor"></a><code>| </code><code>`blue</code></td></tr><tr id="type-text_style.bold" class="anchored"><td class="def constructor"><a href="#type-text_style.bold" class="anchor"></a><code>| </code><code>`bold</code></td></tr><tr id="type-text_style.crossed" class="anchored"><td class="def constructor"><a href="#type-text_style.crossed" class="anchor"></a><code>| </code><code>`crossed</code></td></tr><tr id="type-text_style.cyan" class="anchored"><td class="def constructor"><a href="#type-text_style.cyan" class="anchor"></a><code>| </code><code>`cyan</code></td></tr><tr id="type-text_style.green" class="anchored"><td class="def constructor"><a href="#type-text_style.green" class="anchor"></a><code>| </code><code>`green</code></td></tr><tr id="type-text_style.magenta" class="anchored"><td class="def constructor"><a href="#type-text_style.magenta" class="anchor"></a><code>| </code><code>`magenta</code></td></tr><tr id="type-text_style.red" class="anchored"><td class="def constructor"><a href="#type-text_style.red" class="anchor"></a><code>| </code><code>`red</code></td></tr><tr id="type-text_style.underline" class="anchored"><td class="def constructor"><a href="#type-text_style.underline" class="anchor"></a><code>| </code><code>`underline</code></td></tr><tr id="type-text_style.white" class="anchored"><td class="def constructor"><a href="#type-text_style.white" class="anchor"></a><code>| </code><code>`white</code></td></tr><tr id="type-text_style.yellow" class="anchored"><td class="def constructor"><a href="#type-text_style.yellow" class="anchor"></a><code>| </code><code>`yellow</code></td></tr></table><code> ]</code></dt><dd><p>Settable attributes for ANSI terminal output. Nesting is generally not handled.</p></dd></dl><dl><dt class="spec value" id="val-colorise"><a href="#val-colorise" class="anchor"></a><code><span class="keyword">val</span> colorise : <a href="index.html#type-text_style">text_style</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p>Helper coloring functions. Returns the string unchanged if color is disabled</p></dd></dl><dl><dt class="spec value" id="val-colorise'"><a href="#val-colorise'" class="anchor"></a><code><span class="keyword">val</span> colorise' : <a href="index.html#type-text_style">text_style</a> list <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-acolor"><a href="#val-acolor" class="anchor"></a><code><span class="keyword">val</span> acolor : <a href="index.html#type-text_style">text_style</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-acolor_w"><a href="#val-acolor_w" class="anchor"></a><code><span class="keyword">val</span> acolor_w : int <span>&#45;&gt;</span> <a href="index.html#type-text_style">text_style</a> <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/index.html#type-out_channel">Stdlib.out_channel</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt></dl><div class="spec module" id="module-Symbols"><a href="#module-Symbols" class="anchor"></a><code><span class="keyword">module</span> <a href="Symbols/index.html">Symbols</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-utf8_symbol"><a href="#val-utf8_symbol" class="anchor"></a><code><span class="keyword">val</span> utf8_symbol : <a href="../../ocaml/Stdlib/Uchar/index.html#type-t">OpamCompat.Uchar.t</a> <span>&#45;&gt;</span> ?&#8288;alternates:<a href="../../ocaml/Stdlib/Uchar/index.html#type-t">OpamCompat.Uchar.t</a> list <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt></dl><aside><p>Logging</p></aside><dl><dt class="spec value" id="val-timer"><a href="#val-timer" class="anchor"></a><code><span class="keyword">val</span> timer : unit <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> float</code></dt><dd><p>Timers, only active when debug is on. Returns the time between the application to each argument, in seconds</p></dd></dl><dl><dt class="spec value" id="val-log"><a href="#val-log" class="anchor"></a><code><span class="keyword">val</span> log : string <span>&#45;&gt;</span> ?&#8288;level:int <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <a href="../../ocaml/Stdlib/index.html#type-out_channel">Stdlib.out_channel</a>, unit) <a href="../../ocaml/Stdlib/index.html#type-format">Stdlib.format</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>log section ~level fmt args</code>. Used for debug messages, default level is 1</p></dd></dl><dl><dt class="spec value" id="val-slog"><a href="#val-slog" class="anchor"></a><code><span class="keyword">val</span> slog : (<span class="type-var">'a</span> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/index.html#type-out_channel">Stdlib.out_channel</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Helper to pass stringifiers to log (use <code>log &quot;%a&quot; (slog to_string) x</code> rather than <code>log &quot;%s&quot; (to_string x)</code> to avoid costly unneeded stringifications</p></dd></dl><dl><dt class="spec value" id="val-error"><a href="#val-error" class="anchor"></a><code><span class="keyword">val</span> error : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-warning"><a href="#val-warning" class="anchor"></a><code><span class="keyword">val</span> warning : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-note"><a href="#val-note" class="anchor"></a><code><span class="keyword">val</span> note : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-errmsg"><a href="#val-errmsg" class="anchor"></a><code><span class="keyword">val</span> errmsg : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Message without prefix, reformat or newline, to stderr (useful to continue error messages without repeating &quot;<code>ERROR</code>&quot;)</p></dd></dl><dl><dt class="spec value" id="val-error_and_exit"><a href="#val-error_and_exit" class="anchor"></a><code><span class="keyword">val</span> error_and_exit : <a href="../OpamStd/Sys/index.html#type-exit_reason">OpamStd.Sys.exit_reason</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, unit, string, <span class="type-var">'b</span>) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-msg"><a href="#val-msg" class="anchor"></a><code><span class="keyword">val</span> msg : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-formatted_msg"><a href="#val-formatted_msg" class="anchor"></a><code><span class="keyword">val</span> formatted_msg : ?&#8288;indent:int <span>&#45;&gt;</span> (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-header_msg"><a href="#val-header_msg" class="anchor"></a><code><span class="keyword">val</span> header_msg : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-header_error"><a href="#val-header_error" class="anchor"></a><code><span class="keyword">val</span> header_error : (<span class="type-var">'a</span>, unit, string, (<span class="type-var">'b</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-carriage_delete"><a href="#val-carriage_delete" class="anchor"></a><code><span class="keyword">val</span> carriage_delete : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Erase the current line on stdout (doesn't flush stdout)</p></dd></dl><dl><dt class="spec value" id="val-status_line"><a href="#val-status_line" class="anchor"></a><code><span class="keyword">val</span> status_line : (<span class="type-var">'a</span>, unit, string, unit) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Display a dynamic status line to stdout, that will be erased on next call. The message should not be wider than screen nor contain newlines. Use <a href="index.html#val-clear_status"><code>clear_status</code></a> when the status line should be erased.</p></dd></dl><dl><dt class="spec value" id="val-clear_status"><a href="#val-clear_status" class="anchor"></a><code><span class="keyword">val</span> clear_status : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Erase the status line and restore the cursor to the start of the line</p></dd></dl><dl><dt class="spec value" id="val-confirm"><a href="#val-confirm" class="anchor"></a><code><span class="keyword">val</span> confirm : ?&#8288;default:bool <span>&#45;&gt;</span> (<span class="type-var">'a</span>, unit, string, bool) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Ask the user to press Y/y/N/n to continue (returns a boolean). Defaults to true (yes) if unspecified</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : (<span class="type-var">'a</span>, unit, string, string option) <a href="../../ocaml/Stdlib/index.html#type-format4">Stdlib.format4</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Read some input from the user (returns a string option)</p></dd></dl><dl><dt class="spec value" id="val-print_table"><a href="#val-print_table" class="anchor"></a><code><span class="keyword">val</span> print_table : ?&#8288;cut:[ `Wrap of string | `Truncate | `None ] <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/index.html#type-out_channel">Stdlib.out_channel</a> <span>&#45;&gt;</span> sep:string <span>&#45;&gt;</span> string list list <span>&#45;&gt;</span> unit</code></dt><dd><p>Prints a table; generally called on tables passed through <code>align_table</code>. The default <code>cut</code> is to wrap on stdout, stderr, keep as-is otherwise. <code>`Wrap sep</code> prepends <code>sep</code> on wrapped lines</p></dd></dl></div></body></html>