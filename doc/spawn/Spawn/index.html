<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Spawn (spawn.Spawn)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">spawn</a> &#x00BB; Spawn</nav><header class="odoc-preamble"><h1>Module <code><span>Spawn</span></code></h1><p>Mini spawn library</p></header><div class="odoc-content"><p>Note: on Unix, spawn uses vfork by default. It has been tested, but if you believe this is causing a problem in your application, you can change this default at runtime by setting the environment variable <code>SPAWN_USE_FORK</code>.</p><div class="odoc-spec"><div class="spec module" id="module-Working_dir" class="anchored"><a href="#module-Working_dir" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Working_dir/index.html">Working_dir</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Unix_backend" class="anchored"><a href="#module-Unix_backend" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Unix_backend/index.html">Unix_backend</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Env" class="anchored"><a href="#module-Env" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Env/index.html">Env</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-spawn" class="anchored"><a href="#val-spawn" class="anchor"></a><code><span><span class="keyword">val</span> spawn : <span>?env:<a href="Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?cwd:<a href="Working_dir/index.html#type-t">Working_dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span>prog:string <span class="arrow">&#45;&gt;</span></span> <span>argv:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>?stdin:<a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>?stdout:<a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span>
<span>?stderr:<a href="../../ocaml/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span>?unix_backend:<a href="Unix_backend/index.html#type-t">Unix_backend.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Spawn a sub-command and return its PID. This function is low-level and should be used to build higher-level APIs.</p><p>In case of errors, it raises <code>Unix.Unix_error</code>.</p><p><b>Binary</b></p><p><code>prog</code> is not searched in <code>PATH</code>. It is up to the caller to do the path resolution before calling this function. Note that there is no special treatment of executable text files without a proper #!. The execvp function from the C library calls <code>/bin/sh</code> in this case to imitate the behaviors of a shell but this function doesn't.</p><p>Note that when <code>prog</code> is a relative filename, it is interpreted as a path relative to the working directory specified by the <code>cwd</code> argument. On Windows, this differs from what the underlying <code>CreateProcess</code> function does.</p><p><b>Command line arguments</b></p><p><code>argv</code> is the full command line. The first element should be the program name and subsequent elements the command line arguments. Note that the head of <code>argv</code> doesn't necessarily have to be equal to <code>prog</code>. For instance it might be <code>foo</code> while <code>prog</code> might be <code>/usr/bin/foo</code>.</p><p><b>Environment</b></p><p><code>env</code> represents the environment in which the sub-process is executed. If not specified, the environment from the process calling this function is used.</p><p><b>Working directory</b></p><p><code>cwd</code> describes what the current working directory of the sub-process should be. It defaults to <code>Inherit</code>. It is an error to pass <code>Fd _</code> on Windows.</p><p><b>Standard input/outputs</b></p><p><code>stdin</code>, <code>stdout</code> and <code>stderr</code> are the file descriptors used as standard input, output and error output of the sub-process. When not specified, they default to the ones from the calling process.</p><p><b>Signals</b></p><p>On Unix, the sub-process will have all its signals unblocked.</p><p><b>Implementation</b></p><p><code>unix_backend</code> describes what backend to use on Unix. If set to <code>Default</code>, <code>vfork</code> is used unless the environment variable <code>SPAWN_USE_FORK</code> is set. On Windows, <code>CreateProcess</code> is used.</p></div></div></div></body></html>