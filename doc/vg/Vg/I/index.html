<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>I (vg.Vg.I)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">vg</a> &#x00BB; <a href="../index.html">Vg</a> &#x00BB; I</nav><header class="odoc-preamble"><h1>Module <code><span>Vg.I</span></code></h1><p>Images.</p><p>Consult their <a href="../index.html#semimages">semantics</a>.</p><p>The <code>|&gt;</code> operator is used to compose images. For this reason image combinators always take the image to use as the last argument.</p></header><nav class="odoc-toc"><ul><li><a href="#images">Images</a></li><li><a href="#prims">Primitive images</a></li><li><a href="#cut">Cutting images</a></li><li><a href="#blend">Blending images</a></li><li><a href="#transf">Transforming images</a></li><li><a href="#predicates">Predicates and comparisons</a></li><li><a href="#printers">Printers</a></li></ul></nav><div class="odoc-content"><h2 id="images"><a href="#images" class="anchor"></a>Images</h2><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p>The type for images.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-void" class="anchored"><a href="#val-void" class="anchor"></a><code><span><span class="keyword">val</span> void : <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>void</code> is <code>const </code><a href="../../../gg/Gg/Color/index.html#val-void"><code>Gg.Color.void</code></a>, an invisible black image. <code>void</code> is an identity element for <a href="#val-blend"><code>blend</code></a>.</p></div></div><h2 id="prims"><a href="#prims" class="anchor"></a>Primitive images</h2><div class="odoc-spec"><div class="spec value" id="val-const" class="anchored"><a href="#val-const" class="anchor"></a><code><span><span class="keyword">val</span> const : <span><a href="../../../gg/Gg/index.html#type-color">Gg.color</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>const c</code> is an image of color <code>c</code>.</p><ul><li>[<code>const c</code>]<sub><code>pt</code></sub> <code>= c</code> for any <code>pt</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-axial" class="anchored"><a href="#val-axial" class="anchor"></a><code><span><span class="keyword">val</span> axial : <span><a href="../../../gg/Gg/Color/index.html#type-stops">Gg.Color.stops</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../gg/Gg/index.html#type-p2">Gg.p2</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../gg/Gg/index.html#type-p2">Gg.p2</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>axial stops pt pt'</code> is an image with an axial color gradient varying between <code>pt</code> and <code>pt'</code> according to <a href="../index.html#semstops">color stops</a> <code>stops</code>.</p><ul><li>[<code>axial stops pt pt'</code>]<sub><code>q</code></sub> <code>=</code> [<code>stops</code>]<sub><code>t</code></sub> if <code>q</code> is on the line perpendicular to the line <code>pt</code> and <code>pt'</code> at the point <code>pt + t * (pt' - pt)</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-radial" class="anchored"><a href="#val-radial" class="anchor"></a><code><span><span class="keyword">val</span> radial : <span><a href="../../../gg/Gg/Color/index.html#type-stops">Gg.Color.stops</a> <span class="arrow">&#45;&gt;</span></span> <span>?f:<a href="../../../gg/Gg/index.html#type-p2">Gg.p2</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../gg/Gg/index.html#type-p2">Gg.p2</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>radial stops ~f c r</code> is an image with a color gradient varying according to <a href="../index.html#semstops">color stops</a> <code>stops</code> on circles whose center are on the segment from <code>f</code> to <code>c</code> and radius vary, respectively, from <code>0</code> to <code>r</code>. The focus <code>f</code> defaults to <code>c</code>, it must be inside the circle <code>(c, r)</code>.</p><ul><li>[<code>radial stops ~f c r</code>]<sub><code>p</code></sub> <code>=</code> [<code>stops</code>]<sub><code>t</code></sub> if <code>t</code> is the smallest value such that <code>p</code> is on the circle defined by radius <code>t * r</code> and center <code>f + t * (c - f)</code>.</li></ul></div></div><h2 id="cut"><a href="#cut" class="anchor"></a>Cutting images</h2><div class="odoc-spec"><div class="spec value" id="val-cut" class="anchored"><a href="#val-cut" class="anchor"></a><code><span><span class="keyword">val</span> cut : <span>?area:<a href="../P/index.html#type-area">P.area</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-path">path</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>cut area p i</code> is <code>i</code> with the <a href="../index.html#sempaths">area</a> outside [<code>a</code>, <code>p</code>] cut out, i.e. mapped to <a href="../../../gg/Gg/Color/index.html#val-void"><code>Gg.Color.void</code></a>. <code>area</code> defaults to <a href="../P/index.html#type-area"><code>`Anz</code></a>.</p><ul><li>[<code>cut area p i</code>]<sub><code>pt</code></sub> <code>=</code> [<code>i</code>]<sub><code>pt</code></sub> if [<code>a</code>, <code>p</code>]<sub><code>pt</code></sub></li><li>[<code>cut area p i</code>]<sub><code>pt</code></sub> <code>=</code> <a href="../../../gg/Gg/Color/index.html#val-void"><code>Gg.Color.void</code></a> otherwise.</li></ul><p><b>Warning.</b> For <em>outline</em> cuts most renderers support only cutting into <a href="#val-const"><code>const</code></a> <a href="#val-axial"><code>axial</code></a> and <a href="#val-radial"><code>radial</code></a> images. Consult the individual renderer documentation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cut_glyphs" class="anchored"><a href="#val-cut_glyphs" class="anchor"></a><code><span><span class="keyword">val</span> cut_glyphs : <span>?area:<span>[ <span>`O of <a href="../P/index.html#type-outline">P.outline</a></span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>?text:string <span class="arrow">&#45;&gt;</span></span>
<span>?blocks:<span>(bool * <span><span>(int * int)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>?advances:<span><a href="../../../gg/Gg/index.html#type-v2">Gg.v2</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-font">font</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../index.html#type-glyph">glyph</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><b>WARNING.</b> The interface and specifics of glyph rendering are still subject to change in the future.</p><p><code>cut_glyphs area text blocks advances font glyphs i</code> is like <a href="#val-cut"><code>cut</code></a> except the path cut is the union of all the paths of the glyphs <code>glyphs</code> of the font <code>font</code>.</p><p>The origin of the first glyph is set to <code>P2.o</code>, the origin of each subsequent glyph in <code>glyphs</code> is offset by the advance vector of the previous glyph as provided by <code>font</code>. Advance vectors for each glyph can be overriden by providing their value in <code>advances</code>, if the length of <code>advances</code> is smaller than <code>glyphs</code> the rendering results are undefined.</p><p>If provided the <code>text</code> parameter indicates the UTF-8 text corresponding to the sequence of glyphs. This may be used by certain renderer to allow text search in the result or to draw the text if it lacks control over glyph rendering (in which case an empty list of glyphs may be passed).</p><p>If provided <code>blocks</code> is used to specify a sequential map between <code>glyphs</code> and the characters of <code>text</code>. The number of elements in the list defines the number of blocks. Starting at the head of each sequence, each block <code>(char_adv, glyph_adv)</code> indicates the number of characters and glyphs that make the next block (one or the other may be 0). If the boolean is <code>true</code> the glyph sequence is reversed for peforming the map. If <code>blocks</code> is unspecified a one to one map between glyphs and characters is assumed with undefined results if the number of glyphs and characters differ.</p><p>If <code>area</code> is provided, the outline area of the glyphs are cut as specified, otherwise the area of the glyphs is determined as mandated by the font. <b>Warning.</b> Backend support is poor this may be removed in the future.</p></div></div><h2 id="blend"><a href="#blend" class="anchor"></a>Blending images</h2><div class="odoc-spec"><div class="spec value" id="val-blend" class="anchored"><a href="#val-blend" class="anchor"></a><code><span><span class="keyword">val</span> blend : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>blend src dst</code> is <code>src</code> blended over <code>dst</code> using source over destination alpha blending.</p><ul><li>[<code>blend src dst</code>]<sub><code>p</code></sub> <code>=</code> <code>Color.blend</code>  [<code>src</code>]<sub><code>p</code></sub>  [<code>dst</code>]<sub><code>p</code></sub></li></ul></div></div><h2 id="transf"><a href="#transf" class="anchor"></a>Transforming images</h2><div class="odoc-spec"><div class="spec value" id="val-move" class="anchored"><a href="#val-move" class="anchor"></a><code><span><span class="keyword">val</span> move : <span><a href="../../../gg/Gg/index.html#type-v2">Gg.v2</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>move v i</code> is <code>i</code> translated by <code>v</code>.</p><ul><li>[<code>move v i</code>]<sub><code>pt</code></sub> <code>=</code> [<code>i</code>]<sub><code>pt-v</code></sub> for any <code>pt</code></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-rot" class="anchored"><a href="#val-rot" class="anchor"></a><code><span><span class="keyword">val</span> rot : <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>rot a i</code> is <code>i</code> rotated by <code>a</code>.</p><ul><li>[<code>rot a i</code>]<sub><code>pt</code></sub> <code>=</code> [<code>i</code>]<sub><code>m⋅pt</code></sub> for any <code>pt</code> and with <code>m = M2.rot -a</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-scale" class="anchored"><a href="#val-scale" class="anchor"></a><code><span><span class="keyword">val</span> scale : <span><a href="../../../gg/Gg/index.html#type-v2">Gg.v2</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>scale s i</code> is <code>i</code> scaled by <code>s</code>.</p><ul><li>[<code>scale s i</code>]<sub><code>(x,y)</code></sub> <code>=</code> [<code>i</code>]<sub><code>(x/s</code><sub>x</sub><code>,y/s</code><sub>y</sub><code>)</code></sub> for any <code>(x,y)</code></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-tr" class="anchored"><a href="#val-tr" class="anchor"></a><code><span><span class="keyword">val</span> tr : <span><a href="../../../gg/Gg/index.html#type-m3">Gg.m3</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>tr m i</code> is the affine transform in homogenous 2D space of each point of <code>i</code> by <code>m</code> (see <a href="../../../gg/Gg/P2/index.html#val-tr"><code>Gg.P2.tr</code></a>).</p><ul><li>[<code>tr m i</code>]<sub><code>pt</code></sub> <code>=</code> [<code>i</code>]<sub><code>m</code><sup>-1</sup>⋅<code>pt</code></sub> for any <code>pt</code></li></ul></div></div><h2 id="predicates"><a href="#predicates" class="anchor"></a>Predicates and comparisons</h2><p><b>Note.</b> These predicates consider the structure of image values not their denotational interpretation; a single denotational interpretation can have many structural representations.</p><div class="odoc-spec"><div class="spec value" id="val-is_void" class="anchored"><a href="#val-is_void" class="anchor"></a><code><span><span class="keyword">val</span> is_void : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_void i</code> is <code>i == void</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal i i'</code> is <code>i = i'</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal_f" class="anchored"><a href="#val-equal_f" class="anchor"></a><code><span><span class="keyword">val</span> equal_f : <span><span>(<span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal eq i i'</code> is like <a href="#val-equal"><code>equal</code></a> but uses <code>eq</code> to test floating point values.</p><p><b>Note.</b> Raster images are tested with <a href="../../../gg/Gg/Raster/index.html#val-equal"><code>Gg.Raster.equal</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare i i'</code> is <code>Stdlib.compare i i'</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_f" class="anchored"><a href="#val-compare_f" class="anchor"></a><code><span><span class="keyword">val</span> compare_f : <span><span>(<span>float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare_f cmp i i'</code> is like <a href="#val-compare"><code>compare</code></a> but uses <code>cmp</code> to compare floating point values.</p><p><b>Note.</b> Raster images are tested with <a href="../../../gg/Gg/Raster/index.html#val-compare"><code>Gg.Raster.compare</code></a>.</p></div></div><h2 id="printers"><a href="#printers" class="anchor"></a>Printers</h2><div class="odoc-spec"><div class="spec value" id="val-to_string" class="anchored"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string i</code> is a textual representation of <code>i</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp ppf i</code> prints a textual representation of <code>i</code> on <code>ppf</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_f" class="anchored"><a href="#val-pp_f" class="anchor"></a><code><span><span class="keyword">val</span> pp_f : <span><span>(<span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_f pp_float ppf i</code> prints <code>i</code> like <a href="#val-pp"><code>pp</code></a> but uses <code>pp_float</code> to print floating point values.</p></div></div></div></body></html>