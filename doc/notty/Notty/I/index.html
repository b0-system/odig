<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>I (notty.Notty.I)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">notty</a> &#x00BB; <a href="../index.html">Notty</a> &#x00BB; I</nav><header class="odoc-preamble"><h1>Module <code><span>Notty.I</span></code></h1><p><code>I</code> is for image.</p><p>Construction and composition of images.</p><p>Consult the <a href="../index.html#basics">basics</a> for an overview.</p></header><nav class="odoc-toc"><ul><li><a href="#imgprims">Primitives</a></li><li><a href="#imgcomp">Image composition</a></li><li><a href="#imgcrop">Cropping and padding</a></li><li><a href="#additional-combinators">Additional combinators</a></li><li><a href="#format-interoperability"><code>Format</code> interoperability</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../index.html#type-image">image</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-height" class="anchored"><a href="#val-height" class="anchor"></a><code><span><span class="keyword">val</span> height : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-width" class="anchored"><a href="#val-width" class="anchor"></a><code><span><span class="keyword">val</span> width : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal t1 t2</code> is <code>true</code> iff <code>t1</code> and <code>t2</code> are constructed by the same term.</p><p><b>Note</b> This is a weak form of equality. Images that are not <code>equal</code> could still render the same.</p></div></div><h2 id="imgprims"><a href="#imgprims" class="anchor"></a>Primitives</h2><div class="odoc-spec"><div class="spec value" id="val-empty" class="anchored"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>empty</code> is a zero-sized image.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string" class="anchored"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>string attr s</code> is an image containing text <code>s</code>, styled with <code>attr</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>string</code> is not a valid UTF-8 sequence, or contains <span class="xref-unresolved">control characters</span>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-uchars" class="anchored"><a href="#val-uchars" class="anchor"></a><code><span><span class="keyword">val</span> uchars : <span><a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../../ocaml/Stdlib/Uchar/index.html#type-t">Uchar.t</a> array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>uchars attr us</code> is an image containing text <code>us</code>, styled with <code>attr</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>us</code> contains <span class="xref-unresolved">control characters</span>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-char" class="anchored"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span><a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>char attr c w h</code> is a <code>w * h</code> grid of <code>c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>c</code> is a <span class="xref-unresolved">control character</span>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-uchar" class="anchored"><a href="#val-uchar" class="anchor"></a><code><span><span class="keyword">val</span> uchar : <span><a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ocaml/Stdlib/Uchar/index.html#type-t">Uchar.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>uchar attr u w h</code> is a <code>w * h</code> grid of <code>u</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>u</code> is a <span class="xref-unresolved">control character</span>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-void" class="anchored"><a href="#val-void" class="anchor"></a><code><span><span class="keyword">val</span> void : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>void w h</code> is a <code>w * h</code> rectangle of transparent cells.</p><p><code>void</code> is magical: it has geometry, but no displayable content. This is different, for example, from the space character <code>U+0020</code>, which renders as a cell filled with the background color. This means that <code>void</code> interacts specially with <a href="#val-(&lt;/&gt;)">overlays</a>.</p><p><code>void 0 0 = empty</code>. <code>void</code> with only one dimension <code>0</code> acts as a spacing element in the other dimension. Negative size is treated as <code>0</code>.</p></div></div><h2 id="imgcomp"><a href="#imgcomp" class="anchor"></a>Image composition</h2><p>Three basic composition modes allow construction of more complex images from simpler ones.</p><p>Composition operators are left-associative and form a monoid with <code>void</code>.</p><div class="odoc-spec"><div class="spec value" id="val-(&lt;|&gt;)" class="anchored"><a href="#val-(&lt;|&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;|&gt;) : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>i1 &lt;|&gt; i2</code> is the horizontal combination of <code>i1</code> and <code>i2</code>.</p><p><code>width (i1 &lt;|&gt; i2) = width i1 + width i2</code> <code>height (i1 &lt;|&gt; i2) = max (height i1) (height i2)</code></p><p>Images are top-aligned. The missing region is implicitly filled with <a href="#val-void"><code>void</code></a>.</p><pre>[x] &lt;|&gt; [y] = [xy]
        [y]   [.y]</pre><p>where <code>.</code> denotes <a href="#val-void"><code>void</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;-&gt;)" class="anchored"><a href="#val-(&lt;-&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;-&gt;) : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>i1 &lt;-&gt; i2</code> is the vertical combination of <code>i1</code> and <code>i2</code>.</p><p><code>width (i1 &lt;-&gt; i2) = max (width i1) (width i2)</code> <code>height (i1 &lt;-&gt; i2) = height i1 + height i2</code></p><p>Images are left-aligned. The missing region is implicitly filled with <a href="#val-void"><code>void</code></a>.</p><pre>[xx] &lt;-&gt; [y] = [xx]
               [y.]</pre></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;/&gt;)" class="anchored"><a href="#val-(&lt;/&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;/&gt;) : <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>i1 &lt;/&gt; i2</code> is <code>i1</code> overlaid over <code>i2</code>.</p><p><code>width (i1 &lt;/&gt; i2) = max (width i1) (width i2)</code> <code>height (i1 &lt;/&gt; i2) = max (height i1) (height i2)</code></p><p>Images are top-left-aligned. In the region of their overlap, only the <a href="#val-void"><code>void</code></a> cells of <code>i1</code> show fragments of <code>i2</code>.</p><pre>[x.x] &lt;/&gt; [yyyy] = [xyxy]</pre></div></div><h2 id="imgcrop"><a href="#imgcrop" class="anchor"></a>Cropping and padding</h2><div class="odoc-spec"><div class="spec value" id="val-hcrop" class="anchored"><a href="#val-hcrop" class="anchor"></a><code><span><span class="keyword">val</span> hcrop : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>hcrop left right i</code> is <code>i</code> with <code>left</code> leftmost, and <code>right</code> rightmost columns missing. If <code>left + right &gt;= width i</code> the result is <code>empty</code>.</p><p>If either <code>left</code> or <code>right</code> is negative, instead of being cropped, the image is padded on that side.</p><p>For example:</p><ul><li><code>hcrop 0 1 [abc]</code> = <code>[ab]</code></li><li><code>hcrop 1 1 [abc]</code> = <code>[b]</code></li><li><code>hcrop (-1) 1 [abc]</code> = <code>void 1 1 &lt;|&gt; hcrop 0 1 [abc]</code> = <code>[.ab]</code></li><li><code>hcrop 2 2 [abc]</code> = <code>empty</code></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-vcrop" class="anchored"><a href="#val-vcrop" class="anchor"></a><code><span><span class="keyword">val</span> vcrop : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>vcrop top bottom i</code> is the vertical analogue to <a href="#val-hcrop"><code>hcrop</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-crop" class="anchored"><a href="#val-crop" class="anchor"></a><code><span><span class="keyword">val</span> crop : <span>?l:int <span class="arrow">&#45;&gt;</span></span> <span>?r:int <span class="arrow">&#45;&gt;</span></span> <span>?t:int <span class="arrow">&#45;&gt;</span></span> <span>?b:int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>crop ~l:left ~r:right ~t:top ~b:bottom i</code> is <code>vcrop left right (hcrop top bottom) i</code>.</p><p>Missing arguments default to <code>0</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hpad" class="anchored"><a href="#val-hpad" class="anchor"></a><code><span><span class="keyword">val</span> hpad : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><a href="#val-hcrop"><code>hcrop</code></a> with margins negated.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-vpad" class="anchored"><a href="#val-vpad" class="anchor"></a><code><span><span class="keyword">val</span> vpad : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><a href="#val-vcrop"><code>vcrop</code></a> with margins negated.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pad" class="anchored"><a href="#val-pad" class="anchor"></a><code><span><span class="keyword">val</span> pad : <span>?l:int <span class="arrow">&#45;&gt;</span></span> <span>?r:int <span class="arrow">&#45;&gt;</span></span> <span>?t:int <span class="arrow">&#45;&gt;</span></span> <span>?b:int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><a href="#val-crop"><code>crop</code></a> with margins negated.</p></div></div><h2 id="additional-combinators"><a href="#additional-combinators" class="anchor"></a>Additional combinators</h2><div class="odoc-spec"><div class="spec value" id="val-hcat" class="anchored"><a href="#val-hcat" class="anchor"></a><code><span><span class="keyword">val</span> hcat : <span><span><a href="../index.html#type-image">image</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>hcat xs</code> horizontally concatenates <code>xs</code>. See <a href="#val-(&lt;|&gt;)">beside</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-vcat" class="anchored"><a href="#val-vcat" class="anchor"></a><code><span><span class="keyword">val</span> vcat : <span><span><a href="../index.html#type-image">image</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>vcat xs</code> vertically concatenates <code>xs</code>. See <a href="#val-(&lt;-&gt;)">above</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zcat" class="anchored"><a href="#val-zcat" class="anchor"></a><code><span><span class="keyword">val</span> zcat : <span><span><a href="../index.html#type-image">image</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>zcat xs</code> overlays <code>xs</code>. See <a href="#val-(&lt;/&gt;)">over</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tabulate" class="anchored"><a href="#val-tabulate" class="anchor"></a><code><span><span class="keyword">val</span> tabulate : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>tabulate m n f</code> is the grid of values <code>f x y</code> with <code>x = 0..m-1</code> and <code>y = 0..n-1</code>, where <code>x</code> grows to the right, and <code>y</code> growns down.</p><p><code>f a y</code> is to the left of <code>f b y</code> if <code>a &lt; b</code>, and <code>f x a</code> is above <code>f x b</code> if <code>a &lt; b</code>, but the exact alignment is unspecified if the various <code>f x y</code> have different dimensions.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hsnap" class="anchored"><a href="#val-hsnap" class="anchor"></a><code><span><span class="keyword">val</span> hsnap : <span>?align:<span>[ `Left <span>| `Middle</span> <span>| `Right</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>hsnap ~align w i</code> is an image of width strictly <code>w</code> obtained by either horizontally padding or cropping <code>i</code> and positioning it according to <code>~align</code>.</p><p><code>~align</code> defaults to <code>`Middle</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-vsnap" class="anchored"><a href="#val-vsnap" class="anchor"></a><code><span><span class="keyword">val</span> vsnap : <span>?align:<span>[ `Top <span>| `Middle</span> <span>| `Bottom</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-image">image</a></span></code></div><div class="spec-doc"><p><code>vsnap ~align h i</code> is an image of height strictly <code>h</code> obtained by either vertically padding or cropping <code>i</code> and positioning it according to <code>~align</code>.</p><p><code>~align</code> defaults to <code>`Middle</code>.</p></div></div><h2 id="format-interoperability"><a href="#format-interoperability" class="anchor"></a><code>Format</code> interoperability</h2><div class="odoc-spec"><div class="spec value" id="val-strf" class="anchored"><a href="#val-strf" class="anchor"></a><code><span><span class="keyword">val</span> strf : <span>?attr:<a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span>?w:int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>,Â <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a>,Â unit,Â <a href="../index.html#type-image">image</a>)</span> <a href="../../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>strf ?attr ?w:width format ...</code> pretty-prints like <code>Format.asprintf format ...</code>, but returns an <code>image</code>.</p><p><code>attr</code> is the (outermost) attribute. Defaults to <a href="../A/index.html#val-empty"><code>A.empty</code></a>.</p><p><code>width</code> is used to set the margin on the formatter. This is only a hint, and does not guarantee the width of the result. Consult <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html#VALset_margin"><code>Format.set_margin</code></a> for details. Defaults to an unspecified, large number.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if the printing process attempts to directly output <span class="xref-unresolved">control characters</span>, by embedding them in <code>format</code> or a string printed with the <code>%s</code> conversion, for example. <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html#fpp">Formatted printing</a> is allowed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-kstrf" class="anchored"><a href="#val-kstrf" class="anchor"></a><code><span><span class="keyword">val</span> kstrf : <span>?attr:<a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span>?w:int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../index.html#type-image">image</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span>,Â <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a>,Â unit,Â <span class="type-var">'a</span>)</span> <a href="../../../ocaml/Stdlib/index.html#type-format4">format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>kstrf ?attr ?w k format ...</code> is continuation-based <code>strf ?attr ?w format ...</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_attr" class="anchored"><a href="#val-pp_attr" class="anchor"></a><code><span><span class="keyword">val</span> pp_attr : <span><a href="../index.html#type-attr">attr</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_attr a f</code> is a pretty-printer like <code>f</code>, except its output is styled with <code>a</code>. This applies only outside of any styling <code>f</code> itself might embed.</p></div></div></div></body></html>